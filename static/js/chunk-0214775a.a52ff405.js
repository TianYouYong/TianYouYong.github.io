(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0214775a","chunk-1f90fc28","chunk-ab9c89e2","chunk-48786450","chunk-afb9ba68","chunk-8fc9f5e6","chunk-1b1b0c04","chunk-6f1e5936","chunk-68d5bf9e","chunk-2d1c9fca","chunk-159fe6d8","chunk-2d0f012d"],{"004a":function(e,t,a){"use strict";a("1e14")},"03ea":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.visable,"close-on-click-modal":!1,"before-close":e.cancel,"append-to-body":"",width:"750px"},on:{"update:visible":function(t){e.visable=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:20,offset:1}},[a("el-form-item",{attrs:{label:"刷新文件",prop:"freshFile"}},[a("el-input",{staticStyle:{width:"78%"},attrs:{placeholder:"请选择.dll文件",disabled:""},model:{value:e.form.freshFile,callback:function(t){e.$set(e.form,"freshFile",t)},expression:"form.freshFile"}}),e._v(" "),a("upload",{attrs:{"file-type":"dll","limit-size":10,"bt-plain":!0,"bt-size":"medium","ipt-label":"freshFile"},on:{getFile:e.getFile}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20,offset:1}},[a("el-form-item",{attrs:{label:"秘钥文件",prop:"secretFile"}},[a("el-input",{staticStyle:{width:"78%"},attrs:{placeholder:"请选择.dll文件",disabled:""},model:{value:e.form.secretFile,callback:function(t){e.$set(e.form,"secretFile",t)},expression:"form.secretFile"}}),e._v(" "),a("upload",{attrs:{"file-type":"dll","limit-size":10,"bt-plain":!0,"bt-size":"medium","ipt-label":"secretFile"},on:{getFile:e.getFile}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20,offset:1}},[a("el-form-item",{attrs:{label:"校验文件",prop:"checkFile"}},[a("el-input",{staticStyle:{width:"78%"},attrs:{placeholder:"请选择.dll文件",disabled:""},model:{value:e.form.checkFile,callback:function(t){e.$set(e.form,"checkFile",t)},expression:"form.checkFile"}}),e._v(" "),a("upload",{attrs:{"file-type":"dll","limit-size":10,"bt-plain":!0,"bt-size":"medium","ipt-label":"checkFile"},on:{getFile:e.getFile}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20,offset:1}},[a("el-form-item",{attrs:{label:"校验值(十进制)",prop:"checkValue"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.form.checkValue,callback:function(t){e.$set(e.form,"checkValue",t)},expression:"form.checkValue"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20,offset:1}},[a("el-form-item",{attrs:{label:"刷新通道",prop:"channel"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.form.channel,callback:function(t){e.$set(e.form,"channel",t)},expression:"form.channel"}},e._l(e.channelOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:20,offset:1}},[a("el-form-item",{attrs:{label:"数据文件",prop:"dataFile"}},[a("el-input",{staticStyle:{width:"78%"},attrs:{placeholder:"请选择",disabled:""},model:{value:e.form.dataFile,callback:function(t){e.$set(e.form,"dataFile",t)},expression:"form.dataFile"}}),e._v(" "),a("upload",{attrs:{"file-type":"dbc","limit-size":10,"bt-plain":!0,"bt-size":"medium","ipt-label":"dataFile"},on:{getFile:e.getFile}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20,offset:1}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{staticStyle:{width:"78%"},attrs:{placeholder:"请输入内容",type:"textarea",rows:5,maxlength:"30","show-word-limit":""},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}}),e._v(" "),a("el-button",{staticStyle:{width:"21%","vertical-align":"top"},attrs:{type:"primary",plain:""},on:{click:function(t){e.form.remark=""}}},[e._v("清除")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)},n=[],i=(a("7f7f"),a("ac6a"),a("456d"),a("c5f6"),a("7d4e")),o={name:"RemoteRefresh",components:{Upload:i["a"]},props:{visable:{default:!1,type:Boolean},id:{default:0,type:Number},currentInfo:{default:function(){return{}},type:Object}},data:function(){var e=this;return{title:"远程刷写",file:null,formData:new FormData,channelOptions:Object.keys(this.ENUMS.REFRESH_CHANNEL).map((function(t){return{value:t,label:e.ENUMS.REFRESH_CHANNEL[t]}})),form:{},rules:{freshFile:[{required:!0,message:"刷新文件不能为空",trigger:["blur","change"]}],secretFile:[{required:!0,message:"秘钥文件不能为空",trigger:["blur","change"]}],checkFile:[{required:!0,message:"校验文件不能为空",trigger:["blur","change"]}],checkValue:[{required:!0,message:"校验值不能为空",trigger:"blur"},{max:10,message:"校验值长度最多10个字符",trigger:"blur"},{pattern:/\d/,message:"检验值只能是数字",trigger:"blur"}],channel:[{required:!0,message:"请选择刷新通道",trigger:"change"}],dataFile:[{required:!0,message:"数据文件不能为空",trigger:["blur","change"]}]},queryParams:{pageNo:1,pageSize:10,deviceCode:""}}},created:function(){if(this.reset(),this.currentInfo&&this.currentInfo.id){var e=JSON.parse(JSON.stringify(this.currentInfo));this.form.id=e.id}},methods:{getFile:function(e,t){t&&(this.form[t]=e.name)},submitForm:function(){this.$refs["form"].validate((function(e){}))},reset:function(){this.form={id:void 0,deviceCode:"",freshFile:"",secretFile:"",checkFile:"",checkValue:"",channel:"",dataFile:""},this.resetForm("form")},cancel:function(){this.reset(),this.$emit("cancel")}}},l=o,s=a("2877"),c=Object(s["a"])(l,r,n,!1,null,"7c9f2b76",null);t["a"]=c.exports},"0743":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e._v(" "),a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"项目号",prop:"projectCode"}},[a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入项目号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.projectCode,callback:function(t){e.$set(e.queryParams,"projectCode",t)},expression:"queryParams.projectCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备编码",prop:"deviceCode"}},[a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入设备编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.deviceCode,callback:function(t){e.$set(e.queryParams,"deviceCode",t)},expression:"queryParams.deviceCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传状态",prop:"status"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.uploadStatus,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"上传时间",prop:"uploadTime"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss",size:"small"},model:{value:e.uploadTime,callback:function(t){e.uploadTime=t},expression:"uploadTime"}})],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.fileList}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center",prop:"id"}}),e._v(" "),a("el-table-column",{attrs:{label:"项目号",align:"center",prop:"projectCode","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"设备编号",align:"center",prop:"deviceCode","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"上传状态",align:"center",prop:"status",formatter:e.formatter,"show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"上传时间",align:"center",prop:"createTime","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"结束时间",align:"center",prop:"updateTime","show-overflow-tooltip":""}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getFileList}})],1)],1)},n=[],i=(a("ac6a"),a("456d"),a("c0c7")),o=a("b117"),l=a("f121"),s={name:"UploadOverview",components:{},data:function(){var e=this;return{loading:!1,total:0,fileList:null,title:"下载",userOptions:void 0,uploadStatus:Object.keys(this.ENUMS.UPLOAD_STATUS).map((function(t){return{value:t,label:e.ENUMS.UPLOAD_STATUS[t]}})),uploadTime:void 0,queryParams:{pageNo:1,pageSize:10,projectCode:"",deviceCode:"",status:void 0,beginTime:"",endTime:""}}},watch:{},created:function(){this.getFileList(),this.getUserList()},methods:{getFileList:function(){var e=this;this.loading=!0,Object(o["b"])(this.queryParams).then((function(t){console.log("res :>> ",t),t&&200===t.code&&(e.fileList=t.data.list,e.total=t.data.total,e.loading=!1)}))},getUserList:function(){var e=this;this.loading=!0,Object(i["b"])().then((function(t){t&&200===t.code&&(e.userOptions=t.data,e.loading=!1)}))},handleQuery:function(){this.queryParams.pageNo=1,this.uploadTime?(this.queryParams.beginTime=this.uploadTime[0],this.queryParams.endTime=this.uploadTime[1]):(this.queryParams.beginTime="",this.queryParams.endTime=""),this.getFileList()},resetQuery:function(){this.resetForm("queryForm"),this.uploadTime=[],this.handleQuery()},handleDownload:function(e){console.log("row :>> ",e);var t=document.createElement("a");t.href=l["a"].API_DOWNLOAD+e.filePath,t.download=e.fileName,t.click()},reset:function(){this.resetForm("form")},cancel:function(){this.reset()},formatter:function(e,t){return this.ENUMS.UPLOAD_STATUS[e.status]}}},c=s,u=a("2877"),d=Object(u["a"])(c,r,n,!1,null,null,null);t["default"]=d.exports},"0786":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{staticClass:"clearfix"},[a("el-link",{staticClass:"pull-right mt10 mr20 go-back",attrs:{type:"primary"},on:{click:e.goBack}},[e._v(" 返回 - 远程控制")])],1)],1),e._v(" "),a("el-row",{staticClass:"diagnose_content mt-10",attrs:{gutter:24}},[a("el-col",{staticClass:"left",attrs:{span:12}},[a("el-form",{ref:"form",staticClass:"mt20 formBtLine",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"诊断类型",prop:"diagnosisType"}},[a("el-select",{staticStyle:{width:"68%"},attrs:{clearable:""},model:{value:e.form.diagnosisType,callback:function(t){e.$set(e.form,"diagnosisType",t)},expression:"form.diagnosisType"}},e._l(e.diagnoseOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"控制器选择",prop:"channelNo"}},[a("el-select",{staticStyle:{width:"68%"},attrs:{clearable:""},model:{value:e.form.channelNo,callback:function(t){e.$set(e.form,"channelNo",t)},expression:"form.channelNo"}},e._l(e.controllerOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"指令ID",prop:"fileName"}},[a("el-input",{staticStyle:{width:"68%"},attrs:{placeholder:"请选择ID文件",disabled:""},model:{value:e.form.fileName,callback:function(t){e.$set(e.form,"fileName",t)},expression:"form.fileName"}}),e._v(" "),a("upload",{attrs:{"file-type":"any","limit-size":10,"bt-plain":!0,"bt-size":"medium"},on:{getFile:e.getFile}})],1)],1)],1)],1),e._v(" "),a("el-col",{staticClass:"mt15 mb10"},[a("el-button",{attrs:{type:"primary",size:"mini",plain:"",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("批量清除")]),e._v(" "),a("el-button",{staticClass:"pull-right",attrs:{type:"primary",size:"mini",plain:"",icon:"el-icon-refresh"},on:{click:function(t){e.getSnagList(),e.queryDiagnoseLog()}}},[e._v("手动刷新")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.snagList,"max-height":"350"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"ECU编号",align:"center",prop:"ecuNo","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s("ECU"+t.row.ecuNo||!1)+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"故障码DTC",align:"center",prop:"dtcCode","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.dtcCode||"--")+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("清除")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getSnagList}})],1),e._v(" "),a("el-col",{staticClass:"right",attrs:{span:12}},[a("div",{staticClass:"history_wrap"},e._l(e.diagnoseHistory,(function(t,r){return a("div",{key:r},[t.length?a("p",{staticClass:"text-primary"},[e._v("\n                "+e._s(t[0].createTime)+"\n              ")]):e._e(),e._v(" "),e._l(t,(function(t,r){return a("div",{key:r,staticClass:"content_wrap"},[a("p",{staticClass:"text-muted"},[e._v(e._s(t.log))])])}))],2)})),0)]),e._v(" "),a("el-col",{staticClass:"bottomLine",attrs:{span:24}})],1)],1),e._v(" "),a("div",{staticClass:"text-center mt20"},[a("el-button",{attrs:{type:"primary",loading:e.diagnLoading},on:{click:e.submitForm}},[e._v(e._s(e.diagnLoading?"诊断中...":"确 定"))]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("重 置")])],1)],1)},n=[],i=(a("7f7f"),a("ac6a"),a("456d"),a("7d4e")),o=a("8889"),l=a("b74d"),s={name:"RemoteDiagnose",components:{Upload:i["a"]},props:{},data:function(){var e=this;return{file:null,formData:new FormData,diagnoseOptions:Object.keys(this.ENUMS.DIAGNOSE_TYPE).map((function(t){return{value:t,label:e.ENUMS.DIAGNOSE_TYPE[t]}})),controllerOptions:Object.keys(this.ENUMS.CONTROLLER_TYPE).map((function(t){return{value:t,label:e.ENUMS.CONTROLLER_TYPE[t]}})),ids:[],multiple:!0,total:0,snagList:[],tableLoading:!1,diagnLoading:!1,diagnTimer:null,diagnTimerout:null,diagnoseHistory:[],form:{},rules:{diagnosisType:[{required:!0,message:"请选择诊断类型",trigger:"change"}],channelNo:[{required:!0,message:"请选择控制器",trigger:"change"}],fileName:[{required:!0,message:"ID文件不能为空",trigger:["blur","change"]}]},queryParams:{pageNo:1,pageSize:10,orderBy:"createTime",order:"desc"}}},created:function(){this.reset(),this.getSnagList(),this.queryDiagnoseLog()},methods:{getSnagList:function(){var e=this;this.tableLoading=!0,this.queryParams.deviceCode=this.$route.params.deviceCode,this.queryParams.projectCode=this.$route.params.projectCode,Object(l["f"])(this.queryParams).then((function(t){t&&200===t.code?(e.snagList=t.data.list,e.total=t.data.total,e.tableLoading=!1):e.tableLoading=!1}))},queryDiagnoseLog:function(){var e=this,t={projectCode:this.$route.params.projectCode,deviceCode:this.$route.params.deviceCode};Object(l["d"])(t).then((function(t){t&&200===t.code&&(e.diagnoseHistory=t.data)}))},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.multiple=!e.length},handleDelete:function(e){var t=this,a=(e.id?[e.id]:"")||this.ids,r=[];this.snagList.forEach((function(e){a.forEach((function(t){t===e.id&&r.push(e.dtcCode)}))})),this.$confirm('<div class="world-break">确认清除故障码为"'+r+'"的数据项吗？</div>',"提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["c"])(a).then((function(e){if(e&&200===e.code){t.msgSuccess("清除成功");var a=Math.ceil((t.total-1)/t.queryParams.pageSize),r=t.queryParams.pageNo>a?a:t.queryParams.pageNo;t.queryParams.pageNo=r<1?1:r,t.getSnagList()}})).catch((function(e){t.msgError(e.data.message||"清除失败！")}))})).catch((function(){}))},getFile:function(e){console.log("file :>> ",e),e?(this.formData.set("file",e),this.formData.set("remark","file"),this.form.fileName=e.name):(this.formData.set("file",null),this.form.fileName="")},checkDiagnStatus:function(){var e=this,t={deviceCode:this.$route.params.deviceCode};Object(l["a"])(t).then((function(t){t&&200===t.code&&!0===t.data&&(e.$message.success("诊断完成"),clearInterval(e.diagnTimer),clearTimeout(e.diagnTimerout),e.diagnLoading=!1,e.getSnagList(),e.queryDiagnoseLog())}))},goBack:function(){this.$router.go(-1)},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a={deviceCode:e.$route.params.deviceCode};Object(l["a"])(a).then((function(t){t&&200===t.code&&(!1===t.data?e.$message.error("此设备正在诊断中，请稍后重试！"):(e.diagnLoading=!0,Object(o["g"])(e.formData).then((function(t){t&&200===t.code&&(e.form.fileName=t.data.fileName,e.form.filePath=t.data.filePath,e.form.fileType=t.data.fileType,e.form.deviceCode=e.$route.params.deviceCode,e.form.projectCode=e.$route.params.projectCode,Object(l["g"])(e.form).then((function(t){t&&200===t.code&&(e.$message.success("终端正在诊断中..."),e.diagnTimer=setInterval((function(){e.checkDiagnStatus()}),5e3),e.diagnTimerout=setTimeout((function(){clearInterval(e.diagnTimer),clearTimeout(e.diagnTimerout),e.diagnLoading=!1,e.getSnagList(),e.queryDiagnoseLog()}),18e4))})).catch((function(t){e.$message.error(t.data.message||"操作失败"),e.diagnLoading=!1})))})).catch((function(t){e.$message.error("文件上传失败"),e.diagnLoading=!1}))))}))}}))},reset:function(){this.form={deviceCode:"",projectCode:"",diagnosisType:"",channelNo:"",fileName:"",filePath:"",fileType:"",IDFile:""},this.resetForm("form")},cancel:function(){this.reset()}}},c=s,u=(a("b18f"),a("2877")),d=Object(u["a"])(c,r,n,!1,null,"454d9c43",null);t["default"]=d.exports},"0a1c":function(e,t,a){},"0fa7":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"echart-comp",class:e.className,style:{height:e.height,width:e.width}})},n=[],i=a("313e"),o=a.n(i),l=(a("c54d"),a("3139"),a("b515"),a("ed08")),s={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){this.initListener()},activated:function(){this.$_resizeHandler||this.initListener(),this.resize()},beforeDestroy:function(){this.destroyListener()},deactivated:function(){this.destroyListener()},methods:{$_sidebarResizeHandler:function(e){"width"===e.propertyName&&this.$_resizeHandler()},initListener:function(){var e=this;this.$_resizeHandler=Object(l["b"])((function(){e.resize()}),100),window.addEventListener("resize",this.$_resizeHandler),this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},destroyListener:function(){window.removeEventListener("resize",this.$_resizeHandler),this.$_resizeHandler=null,this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)},resize:function(){var e=this.chart;console.log("chart",e),e&&e.resize()}}};a("817d");var c={name:"Echarts",mixins:[s],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},chartData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(e){this.setOptions(e)}}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=o.a.init(this.$el,"macarons"),this.chartData.color=["#D7E0F0"],this.setOptions(this.chartData)},setOptions:function(e){this.chart.setOption(e)}}},u=c,d=(a("9fd4"),a("2877")),m=Object(d["a"])(u,r,n,!1,null,"38d0dd4a",null);t["a"]=m.exports},"123b":function(e,t,a){"use strict";a("84ed")},"141a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{staticClass:"right_line",attrs:{gutter:35}},[a("el-col",{attrs:{span:12}},[a("add-rules")],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("ala-setting")],1)],1)],1)},n=[],i=a("2bb7"),o=a("2019"),l=a("c0c7"),s={name:"AlarmSetting",components:{AddRules:i["default"],AlaSetting:o["default"]},data:function(){return{user:{},roleGroup:{},postGroup:{}}},created:function(){this.getUser()},methods:{getUser:function(){var e=this;Object(l["f"])().then((function(t){e.user=t.data}))}}},c=s,u=(a("004a"),a("2877")),d=Object(u["a"])(c,r,n,!1,null,"8114dca6",null);t["default"]=d.exports},"1aae":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"cockpit_wrap"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("monitor-data",{attrs:{"channel-can-list":e.channelCanList,"can-list":e.canList,option:e.channelOption,"project-info":e.projectInfo},on:{setOptions:e.setOptions,triggerLoading:e.triggerLoading}}),e._v(" "),a("event-list",{attrs:{"event-data":e.eventData},on:{replay:e.videoReplay}})],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"content_bgColor",staticStyle:{"min-height":"978px"}},[a("el-row",{staticClass:"content_header"},[a("el-col",{staticClass:"text-monitor title_item",attrs:{span:8,align:"center"}},[e._v("驾驶舱监控")]),e._v(" "),a("el-col",{attrs:{span:15,offset:1,align:"right"}},[a("el-autocomplete",{ref:"autoInputRef",staticClass:"full-width",attrs:{"fetch-suggestions":e.querySearchAsync,"popper-append-to-body":!1,"value-key":"label",clearable:"","popper-class":"inputOption",size:"mini"},on:{select:e.inputSelectChange},model:{value:e.queryParams_cockpit.projectName,callback:function(t){e.$set(e.queryParams_cockpit,"projectName",t)},expression:"queryParams_cockpit.projectName"}},[a("el-button",{attrs:{slot:"append",type:"primary",size:"mini"},on:{click:e.blurFocus},slot:"append"},[e._v("选择")])],1)],1)],1),e._v(" "),a("el-row",{staticClass:"content_wrap"},[a("div",{staticClass:"driveGps_wrap"},[e.updateMap?a("Map",{attrs:{height:"100%"},on:{getMap:e.getMap}}):e._e()],1),e._v(" "),a("div",{staticClass:"vehicle_speed text-center"},[e._v("\n              车辆时速："+e._s(e.carSpeed+"km/h"||!1)+"\n            ")]),e._v(" "),a("alarm-video",{attrs:{"video-url":e.videoUrl}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:7}},[a("can-data",{ref:"canDataRef",attrs:{"can-data":e.canList}}),e._v(" "),a("drive-behavior",{attrs:{"behavior-data":e.behaviorList}})],1)],1)],1),e._v(" "),a("div",{staticClass:"goback"},[a("div",{staticClass:"goback-text",on:{click:function(t){return e.$router.push("/home")}}},[e._v("\n      返回 "),a("br"),e._v("\n      首页\n    ")])])])},n=[],i=(a("28a5"),a("456d"),a("ac6a"),a("c5f6"),a("313e")),o=a.n(i),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"map",style:"height: "+e.height+"px",attrs:{id:"map-"+e.randomStr+"-"+e.idName}})},s=[],c={props:{idName:{type:String},height:{default:404},hasZoom:{type:Boolean,default:!1},centerPoint:{default:function(){return{lng:116.404,lat:39.915}}},hasCityControl:{default:!1,type:Boolean}},data:function(){return{map:"",randomStr:"",mkrTool:null,hasMarker:!1,Icon:"",overLay:"",points:[]}},mounted:function(){this.createMap()},created:function(){this.randomStr=this.randomString(10)},beforeDestroy:function(){},methods:{addNavigationControl:function(){var e=new window.BMap.NavigationControl({anchor:window.BMAP_ANCHOR_BOTTOM_RIGHT,type:window.BMAP_NAVIGATION_CONTROL_ZOOM,offset:new window.BMap.Size(22,340),showZoomInfo:!0});this.map.addControl(e)},addMapTypeController:function(){var e=new window.BMap.Size(18,300),t=new window.BMap.MapTypeControl({mapTypes:[window.BMAP_NORMAL_MAP,window.BMAP_HYBRID_MAP],anchor:window.BMAP_ANCHOR_BOTTOM_RIGHT,offset:e});this.map.addControl(t)},createCityControl:function(){var e=new BMap.Size(20,20);this.cityListControl=new BMap.CityListControl({anchor:window.BMAP_ANCHOR_TOP_RIGHT,offset:e})},addCityListControl:function(){this.cityListControl&&this.map.addControl(this.cityListControl)},removeCityControl:function(){this.cityListControl&&this.map.removeControl(this.cityListControl)},createMap:function(){var e=this;document.getElementById("map-".concat(this.randomStr,"-").concat(this.idName))&&this.$nextTick((function(){var t;e.map=new BMap.Map("map-".concat(e.randomStr,"-").concat(e.idName),{enableMapClick:!1,enableAutoResize:!1}),e.map.enableScrollWheelZoom(!0),t=new BMap.Point(e.centerPoint.lng,e.centerPoint.lat),e.map.centerAndZoom(t,15),e.$emit("getMap",e.map)}))},randomString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",a=t.length,r="",n=0;n<e;n++)r+=t.charAt(Math.floor(Math.random()*a));return r}}},u=c,d=(a("c7756"),a("2877")),m=Object(d["a"])(u,l,s,!1,null,"22a9ed82",null),p=m.exports,f=a("4c32"),h=a("280a"),g=a("855a"),v=a("4f0f"),b=a("9fe5"),y=a("8975"),_=a("7ca7"),w=a("1f00"),k=a("f76f"),C=a("f121"),x={name:"Cockpit",components:{monitorData:f["default"],eventList:h["default"],alarmVideo:g["default"],canData:v["default"],driveBehavior:b["default"],Map:p},data:function(){return{userId:this.$store.getters.userId,websock:null,videoUrl:"",queryParams_cockpit:{projectName:void 0},channelCanList:[],channelOption:{legend:{x:"left",data:[],textStyle:{color:"#fff",fontSize:"14"}},tooltip:{trigger:"axis",axisPointer:{type:"none"}},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",splitLine:!1,splitArea:{show:!1}},series:[{name:"",data:[],type:"line",itemStyle:{color:"rgba(77,186,205,1)"},areaStyle:{color:new o.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(77,186,205,.4)"},{offset:1,color:"rgb(255, 255, 255,.05)"}])}}]},eventData:[],canList:[],saveQuotasList:[],behaviorList:[{label:"里程",type:"mileage",data:"暂无"},{label:"油量",type:"laveGasoline",data:"暂无"},{label:"车门状态",type:"carDoorStatus",data:"暂无"},{label:"灯光",type:"lightStatus",data:"暂无"},{label:"手刹",type:"holdBrakeStatus",data:"暂无"},{label:"主驾驶安全带",type:"mainSeatBelt",data:"暂无"},{label:"副作用驾驶安全带",type:"deputySeatBelt",data:"暂无"},{label:"剩余续航里程",type:"laveMileage",data:"暂无"},{label:"电池电压",type:"batteryVoltage",data:"暂无"}],projectList:[],orgProjectList:[],projectId:0,currentPlaceId:0,searchTimeout:null,map:null,lushu:{},mycaiId:"京A 666666",arrPois:[],Icon:"",overLay:"",points:[],locationInfo:null,updateMap:!0,carSpeed:0,deviceCode:void 0,projectCode:void 0,projectInfo:{}}},created:function(){console.log("this.$route.query.projectId :>> ",this.$route.query.projectId),this.$route.query.projectId&&(this.projectId=Number(this.$route.query.projectId)),this.getProjectList()},mounted:function(){},beforeDestroy:function(){if(this.deviceCode&&this.projectCode){var e={deviceCode:this.deviceCode,projectCode:this.projectCode};Object(k["e"])(e).then((function(e){e&&e.code}))}this.websock.close()},methods:{initWebSocket:function(e){var t=C["a"].API_WS+e;console.log("wsuri::::>>>>>",t),this.websock=new WebSocket(t),this.websock.onmessage=this.websocketonmessage,this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onclose=this.websocketclose},websocketonopen:function(){var e={userId:this.userId};this.websocketsend(JSON.stringify(e))},websocketonerror:function(){this.initWebSocket(this.deviceCode)},websocketonmessage:function(e){var t=this,a=JSON.parse(e.data);if(this.queryParams_cockpit.projectName){if("gps"===a.topic){var r=Number(a.content.lng),n=Number(a.content.lat),i=new BMap.Point(r,n);0!==r&&0!==n&&BMap.Convertor.translate(i,0,this.translateCallback),this.carSpeed=a.content.speed}if("can_e210_echarts"===a.topic&&(console.log("canInfo>>>>>",a.content),this.canList=a.content,this.channelOption.legend.data=[this.canList[0].signalName],this.channelOption.series[0].name=this.canList[0].signalName,this.channelOption.series[0].data.push(this.canList[0].value),this.channelOption.xAxis.data.push(Object(y["formatDate"])(new Date(this.canList[0].collectTime),"hh:mm:ss")),this.channelOption.series[0].data.length>=10&&(this.channelOption.series[0].data.shift(),this.channelOption.xAxis.data.shift()),this.saveQuotasList.forEach((function(e){t.canList.forEach((function(t){t.signalName===e.signalName&&Object.assign(t,e)}))}))),"alarm_record_data"===a.topic){var o=a.content;o.eventName&&this.eventData.unshift(o)}if("gps_car_info"===a.topic){var l=a.content;Object.keys(l).forEach((function(e){t.behaviorList.forEach((function(t){if(e===t.type)switch(t.data=l[e],t.type){case"carDoorStatus":var a=l[e].split(","),r=[],n=["左前灯","右前灯","左后灯","右后灯"];a.forEach((function(e,t){r.push("0"===e.substr(1,1)?n[t]+"关":n[t]+"开")})),t.data=r.join(", ");break;case"lightStatus":var i=l[e].split(","),o=[],s={0:"近光灯",2:"左转向灯",3:"右转向灯"};i.forEach((function(e,t){Object.keys(s).forEach((function(a){t==a&&e.substr(1,1)&&o.push("0"===e.substr(1,1)?s[t]+"关":s[t]+"开")}))})),t.data=o.join(", ");break;case"mileage":t.data=t.data?t.data+"km":"0km";break;case"laveGasoline":t.data=t.data?t.data+"L":"0L";break;case"speed":t.data=t.data+"km/h";break;case"wireless":t.data=t.data?"-"+t.data+"dbm":"0dbm";break;case"gnss":t.data=t.data?t.data:0;break;case"laveMileage":t.data=t.data?t.data+"km":"0km";break;case"batteryVoltage":t.data=t.data+"v";break;case"holdBrakeStatus":t.data=0===t.data?"未拉起":"拉起";break;case"mainSeatBelt":t.data=0===t.data?"系上":"未系上";break;case"deputySeatBelt":t.data=0===t.data?"系上":"未系上";break;default:break}}))}))}}else this.websock.close()},websocketsend:function(e){console.log("Data::::>>>>>",e),this.websock.send(e)},websocketclose:function(e){console.log("断开连接",e)},translateCallback:function(e){var t=new BMap.Point(e.lng,e.lat);this.points.push(t),this.freshOverlay(t)},setOptions:function(e){this.saveQuotasList=e},triggerLoading:function(e){e&&this.$refs.canDataRef.showLoading()},getProjectList:function(){var e=this;Object(_["d"])().then((function(t){console.log("res all project",t),t&&200===t.code&&(e.orgProjectList=t.data,e.projectList=e.orgProjectList.map((function(e){return{label:e.projectName,value:e.projectId}})),e.projectId&&(e.queryParams_cockpit.projectName=e.orgProjectList.filter((function(t){return t.projectId===e.projectId}))[0].projectName,e.currentPlaceId=e.orgProjectList.filter((function(t){return t.projectId===e.projectId}))[0].placeId,e.projectCode=e.orgProjectList.filter((function(t){return t.projectId===e.projectId}))[0].projectCode,e.deviceCode=e.orgProjectList.filter((function(t){return t.projectId===e.projectId}))[0].deviceCode,e.projectInfo={projectCode:e.projectCode,deviceCode:e.deviceCode},Object(k["e"])(e.projectInfo).then((function(e){e&&e.code})),e.canList=[],e.channelCanList=[],e.saveQuotasList=[],e.getCurrentLocation(e.currentPlaceId),e.queryCanChannel(e.projectCode,e.deviceCode),e.getEventData(e.deviceCode),e.initWebSocket(e.deviceCode)))}))},queryCanChannel:function(e,t){var a=this;if(!e)return this.$message.error("缺少projectCode！"),this.channelCanList=[],!1;if(!t)return this.$message.error("缺少deviceCode！"),this.channelCanList=[],!1;var r={projectCode:e,deviceCode:t};Object(k["b"])(r).then((function(e){e&&200===e.code&&(a.channelCanList=[],a.channelCanList=e.data,a.channelCanList.forEach((function(e){e.label="CAN"+(e.channelNo+1)})))})).catch((function(e){a.$message.error(e.message||"暂无参数！"),a.channelCanList=[]}))},getEventData:function(e){var t=this,a={deviceCode:e};Object(k["a"])(a).then((function(e){e&&200===e.code&&(t.eventData=e.data)}))},getCurrentLocation:function(e){var t=this;Object(w["e"])(e).then((function(e){e&&200===e.code&&(t.locationInfo=e.data,t.updateMap=!1,t.points=[],t.map.clearOverlays(t.overLay),t.$nextTick((function(){t.updateMap=!0})),t.getMap(t.map))}))},querySearchAsync:function(e,t){var a=this.projectList,r=e?a.filter(this.createStateFilter(e)):a;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((function(){t(r)}),0)},createStateFilter:function(e){return function(t){return 0===t.label.toLowerCase().indexOf(e.toLowerCase())}},inputSelectChange:function(e){this.currentPlaceId=this.orgProjectList.filter((function(t){return t.projectId===e.value}))[0].placeId,this.projectCode=this.orgProjectList.filter((function(t){return t.projectId===e.value}))[0].projectCode,this.deviceCode=this.orgProjectList.filter((function(t){return t.projectId===e.value}))[0].deviceCode,this.projectId&&this.websock.close(),this.projectInfo={projectCode:this.projectCode,deviceCode:this.deviceCode},this.getCurrentLocation(this.currentPlaceId),this.queryCanChannel(this.projectCode,this.deviceCode),this.getEventData(this.deviceCode),this.initWebSocket(this.deviceCode),this.channelOption.series[0].data=[],this.channelOption.xAxis.data=[]},blurFocus:function(){this.$refs.autoInputRef.focus()},calculateCenter:function(e){var t=e.length,a=0,r=0,n=0;e.forEach((function(e){var t,i,o,l=e.lng*Math.PI/180,s=e.lat*Math.PI/180;t=Math.cos(s)*Math.cos(l),i=Math.cos(s)*Math.sin(l),o=Math.sin(s),a+=t,r+=i,n+=o})),a/=t,r/=t,n/=t;var i=Math.atan2(r,a),o=Math.sqrt(a*a+r*r),l=Math.atan2(n,o);return{lng:180*i/Math.PI,lat:180*l/Math.PI}},random:function(e,t){return Math.floor(Math.random()*(t-e))+e},getMap:function(e){var t=this;this.$nextTick((function(){t.map=e,t.locationInfo&&t.locationInfo.placeLocationList.length?t.map.centerAndZoom(new BMap.Point(t.calculateCenter(t.locationInfo.placeLocationList).lng,t.calculateCenter(t.locationInfo.placeLocationList).lat),15):t.map.centerAndZoom(new BMap.Point(116.404,39.915),15);var a={strokeColor:"red",fillColor:"white",strokeWeight:1,strokeOpacity:.8,fillOpacity:.6,strokeStyle:"solid"};if(t.locationInfo&&1===t.locationInfo.placeLocationList.length&&(t.cur_circle=new BMap.Circle({lng:t.locationInfo.placeLocationList[0].lng,lat:t.locationInfo.placeLocationList[0].lat},t.locationInfo.areaRadius,a),t.map.addOverlay(t.cur_circle)),t.locationInfo&&t.locationInfo.placeLocationList.length>=4){var r=t.locationInfo.placeLocationList.map((function(e){return{lng:Number(e.lng),lat:Number(e.lat)}}));t.cur_polygon=new BMap.Polygon(r,a),t.map.addOverlay(t.cur_polygon)}}))},freshOverlay:function(e){this.map.clearOverlays(this.overLay);var t={strokeColor:"red",fillColor:"white",strokeWeight:1,strokeOpacity:.8,fillOpacity:.6,strokeStyle:"solid"};if(this.locationInfo&&1===this.locationInfo.placeLocationList.length&&(this.cur_circle=new BMap.Circle({lng:this.locationInfo.placeLocationList[0].lng,lat:this.locationInfo.placeLocationList[0].lat},this.locationInfo.areaRadius,t),this.map.addOverlay(this.cur_circle)),this.locationInfo&&this.locationInfo.placeLocationList.length>=4){var a=this.locationInfo.placeLocationList.map((function(e){return{lng:Number(e.lng),lat:Number(e.lat)}}));this.cur_polygon=new BMap.Polygon(a,t),this.map.addOverlay(this.cur_polygon)}var r=new BMap.Marker(e,{icon:new BMap.Icon("http://developer.baidu.com/map/jsdemo/img/car.png",new BMap.Size(52,26))});this.map.addOverlay(new BMap.Polyline(this.points,{strokeColor:"red",strokeOpacity:.6,strokeWeight:2})),this.overLay=r,this.map.setViewport(this.points),this.map.addOverlay(r)},videoReplay:function(e){this.videoUrl=a("8a9f")("./"+e)}}},N=x,O=(a("a857"),Object(d["a"])(N,r,n,!1,null,"b7bd16c8",null));t["default"]=O.exports},"1b24":function(e,t,a){},"1d70":function(e,t,a){"use strict";a("2255")},"1de6":function(e,t,a){},"1e14":function(e,t,a){},"1e4b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dashboard_wrap"},[r("el-row",{staticClass:"chart-container",attrs:{gutter:24}},[r("el-col",{attrs:{xs:24,sm:24,lg:24}},[r("div",{staticStyle:{width:"100vw",height:"100vh"}},[r("echarts-comp",{attrs:{width:"100%",height:"100%","chart-data":e.option}})],1)])],1),e._v(" "),r("div",{staticClass:"mask"},[r("ul",{staticClass:"list-group"},[r("li",[r("el-row",{attrs:{gutter:0,type:"flex",justify:"center",align:"middle"}},[r("el-col",{staticClass:"num_left flex-center"},[r("div",[r("div",{staticClass:"flex-center"},[r("img",{staticClass:"mt10",attrs:{src:a("ba22")}})]),e._v(" "),r("p",[e._v("报警")])])]),e._v(" "),r("el-col",{staticClass:"num_right flex-center text-center"},[e.statisInfo?r("div",[r("p",[e._v("\n                "+e._s(e.statisInfo.alarmTotal)+"/"+e._s(e.statisInfo.alarmTodayNum)+"\n              ")]),e._v(" "),r("p",{staticClass:"text-muted"},[e._v("总数/本日")])]):e._e()])],1)],1),e._v(" "),r("li",[r("el-row",{attrs:{gutter:0,type:"flex",justify:"center",align:"middle"}},[r("el-col",{staticClass:"num_left flex-center"},[r("div",[r("div",{staticClass:"flex-center"},[r("img",{staticClass:"mt10",attrs:{src:a("3cec")}})]),e._v(" "),r("p",[e._v("设备")])])]),e._v(" "),r("el-col",{staticClass:"num_right flex-center text-center"},[e.statisInfo?r("div",[r("p",[e._v("\n                "+e._s(e.statisInfo.deviceTotal)+"/"+e._s(e.statisInfo.deviceOnlineNum)+"\n              ")]),e._v(" "),r("p",{staticClass:"text-muted"},[e._v("总数/在线")])]):e._e()])],1)],1),e._v(" "),r("li",[r("el-row",{attrs:{gutter:0,type:"flex",justify:"center",align:"middle"}},[r("el-col",{staticClass:"num_left flex-center"},[r("div",[r("div",{staticClass:"flex-center"},[r("img",{staticClass:"mt10",attrs:{src:a("a8e6")}})]),e._v(" "),r("p",[e._v("行驶时长")])])]),e._v(" "),r("el-col",{staticClass:"num_right flex-center text-center"},[e.statisInfo?r("div",[r("p",[e._v(e._s(e.statisInfo.onlineTime)+"小时")])]):e._e()])],1)],1)]),e._v(" "),r("div",{staticClass:"text-primary overview_title text-center"},[e._v("故障概况")]),e._v(" "),r("div",{staticClass:"chart_wrap"},[r("echarts-comp",{staticClass:"chartsPosition",attrs:{width:"100%",height:"320px","chart-data":e.faultOption}})],1),e._v(" "),r("div",{staticClass:"chart_wrap"},[r("echarts-comp",{staticClass:"chartsPosition",attrs:{width:"100%",height:"320px","chart-data":e.todayFaultOption}})],1)])],1)},n=[],i=(a("7f7f"),a("a481"),a("456d"),a("5df3"),a("ac6a"),a("0fa7")),o={"海门":[121.15,31.89],"鄂尔多斯":[109.781327,39.608266],"招远":[120.38,37.35],"舟山":[122.207216,29.985295],"齐齐哈尔":[123.97,47.33],"盐城":[120.13,33.38],"赤峰":[118.87,42.28],"青岛":[120.33,36.07],"乳山":[121.52,36.89],"金昌":[102.188043,38.520089],"泉州":[118.58,24.93],"莱西":[120.53,36.86],"日照":[119.46,35.42],"胶南":[119.97,35.88],"南通":[121.05,32.08],"拉萨":[91.11,29.97],"云浮":[112.02,22.93],"梅州":[116.1,24.55],"文登":[122.05,37.2],"上海":[121.48,31.22],"攀枝花":[101.718637,26.582347],"威海":[122.1,37.5],"承德":[117.93,40.97],"厦门":[118.1,24.46],"汕尾":[115.375279,22.786211],"潮州":[116.63,23.68],"丹东":[124.37,40.13],"太仓":[121.1,31.45],"曲靖":[103.79,25.51],"烟台":[121.39,37.52],"福州":[119.3,26.08],"瓦房店":[121.979603,39.627114],"即墨":[120.45,36.38],"抚顺":[123.97,41.97],"玉溪":[102.52,24.35],"张家口":[114.87,40.82],"阳泉":[113.57,37.85],"莱州":[119.942327,37.177017],"湖州":[120.1,30.86],"汕头":[116.69,23.39],"昆山":[120.95,31.39],"宁波":[121.56,29.86],"湛江":[110.359377,21.270708],"揭阳":[116.35,23.55],"荣成":[122.41,37.16],"连云港":[119.16,34.59],"葫芦岛":[120.836932,40.711052],"常熟":[120.74,31.64],"东莞":[113.75,23.04],"河源":[114.68,23.73],"淮安":[119.15,33.5],"泰州":[119.9,32.49],"南宁":[108.33,22.84],"营口":[122.18,40.65],"惠州":[114.4,23.09],"江阴":[120.26,31.91],"蓬莱":[120.75,37.8],"韶关":[113.62,24.84],"嘉峪关":[98.289152,39.77313],"广州":[113.23,23.16],"延安":[109.47,36.6],"太原":[112.53,37.87],"清远":[113.01,23.7],"中山":[113.38,22.52],"昆明":[102.73,25.04],"寿光":[118.73,36.86],"盘锦":[122.070714,41.119997],"长治":[113.08,36.18],"深圳":[114.07,22.62],"珠海":[113.52,22.3],"宿迁":[118.3,33.96],"咸阳":[108.72,34.36],"铜川":[109.11,35.09],"平度":[119.97,36.77],"佛山":[113.11,23.05],"海口":[110.35,20.02],"江门":[113.06,22.61],"章丘":[117.53,36.72],"肇庆":[112.44,23.05],"大连":[121.62,38.92],"临汾":[111.5,36.08],"吴江":[120.63,31.16],"石嘴山":[106.39,39.04],"沈阳":[123.38,41.8],"苏州":[120.62,31.32],"茂名":[110.88,21.68],"嘉兴":[120.76,30.77],"长春":[125.35,43.88],"胶州":[120.03336,36.264622],"银川":[106.27,38.47],"张家港":[120.555821,31.875428],"三门峡":[111.19,34.76],"锦州":[121.15,41.13],"南昌":[115.89,28.68],"柳州":[109.4,24.33],"三亚":[109.511909,18.252847],"自贡":[104.778442,29.33903],"吉林":[126.57,43.87],"阳江":[111.95,21.85],"泸州":[105.39,28.91],"西宁":[101.74,36.56],"宜宾":[104.56,29.77],"呼和浩特":[111.65,40.82],"成都":[104.06,30.67],"大同":[113.3,40.12],"镇江":[119.44,32.2],"桂林":[110.28,25.29],"张家界":[110.479191,29.117096],"宜兴":[119.82,31.36],"北海":[109.12,21.49],"西安":[108.95,34.27],"金坛":[119.56,31.74],"东营":[118.49,37.46],"牡丹江":[129.58,44.6],"遵义":[106.9,27.7],"绍兴":[120.58,30.01],"扬州":[119.42,32.39],"常州":[119.95,31.79],"潍坊":[119.1,36.62],"重庆":[106.54,29.59],"台州":[121.420757,28.656386],"南京":[118.78,32.04],"滨州":[118.03,37.36],"贵阳":[106.71,26.57],"无锡":[120.29,31.59],"本溪":[123.73,41.3],"克拉玛依":[84.77,45.59],"渭南":[109.5,34.52],"马鞍山":[118.48,31.56],"宝鸡":[107.15,34.38],"焦作":[113.21,35.24],"句容":[119.16,31.95],"北京":[116.46,39.92],"徐州":[117.2,34.26],"衡水":[115.72,37.72],"包头":[110,40.58],"绵阳":[104.73,31.48],"乌鲁木齐":[87.68,43.77],"枣庄":[117.57,34.86],"杭州":[120.19,30.26],"淄博":[118.05,36.78],"鞍山":[122.85,41.12],"溧阳":[119.48,31.43],"库尔勒":[86.06,41.68],"安阳":[114.35,36.1],"开封":[114.35,34.79],"济南":[117,36.65],"德阳":[104.37,31.13],"温州":[120.65,28.01],"九江":[115.97,29.71],"邯郸":[114.47,36.6],"临安":[119.72,30.23],"兰州":[103.73,36.03],"沧州":[116.83,38.33],"临沂":[118.35,35.05],"南充":[106.110698,30.837793],"天津":[117.2,39.13],"富阳":[119.95,30.07],"泰安":[117.13,36.18],"诸暨":[120.23,29.71],"郑州":[113.65,34.76],"哈尔滨":[126.63,45.75],"聊城":[115.97,36.45],"芜湖":[118.38,31.33],"唐山":[118.02,39.63],"平顶山":[113.29,33.75],"邢台":[114.48,37.05],"德州":[116.29,37.45],"济宁":[116.59,35.38],"荆州":[112.239741,30.335165],"宜昌":[111.3,30.7],"义乌":[120.06,29.32],"丽水":[119.92,28.45],"洛阳":[112.44,34.7],"秦皇岛":[119.57,39.95],"株洲":[113.16,27.83],"石家庄":[114.48,38.03],"莱芜":[117.67,36.19],"常德":[111.69,29.05],"保定":[115.48,38.85],"湘潭":[112.91,27.87],"金华":[119.64,29.12],"岳阳":[113.09,29.37],"长沙":[113,28.21],"衢州":[118.88,28.97],"廊坊":[116.7,39.53],"菏泽":[115.480656,35.23375],"合肥":[117.27,31.86],"武汉":[114.31,30.52],"大庆":[125.03,46.58]},l=a("b775"),s=a("f121");function c(){return Object(l["a"])({url:s["a"].API_MONIT+"/statistics",method:"get"})}var u={name:"Index",components:{echartsComp:i["a"]},data:function(){return{statisInfo:null,gpsArr:[{lang:114.066852,lat:22.549791},{lang:116.51,lat:39.8},{lang:121.32,lat:31.19},{lang:120.78,lat:31.59}],addressArr:[],map:null,option:{},data:[],geoCoordMap:o,faultOption:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["故障总数","已解决故障"],axisTick:{show:!1,alignWithLabel:!0},axisLine:{lineStyle:{color:"#c1c1c1"}},axisLabel:{textStyle:{show:!0,color:"#999999",fontSize:"14"}}}],yAxis:[{type:"value",splitLine:!1,splitArea:{show:!1},axisLine:{lineStyle:{color:"#c1c1c1"}},axisLabel:{textStyle:{color:"#999999"}}}],series:[{name:"",type:"bar",barWidth:"50%",data:[1280,666],itemStyle:{normal:{color:function(e){var t=["#fa6b33","#3370fa"];return t[e.dataIndex]},label:{show:!0,position:"top",textStyle:{color:"#999999",fontSize:14}}}}}]},todayFaultOption:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["今日故障总数","今日已解决故障"],axisTick:{show:!1,alignWithLabel:!0},axisLine:{lineStyle:{color:"#c1c1c1"}},axisLabel:{textStyle:{show:!0,color:"#999999",fontSize:"14"},formatter:function(e){var t="",a=e.length,r=2,n=2;if(a>r)for(var i=0;i<n;i++){var o="",l=i*r,s=l+r;o=i==n-1?e.substring(l,a):e.substring(l,s)+"\n",t+=o}else t=e;return t}}}],yAxis:[{type:"value",splitLine:!1,splitArea:{show:!1},axisLine:{lineStyle:{color:"#c1c1c1"}},axisLabel:{textStyle:{color:"#999999"}}}],series:[{name:"",type:"bar",barWidth:"50%",data:[222,110],itemStyle:{normal:{color:function(e){var t=["#fa6b33","#3370fa"];return t[e.dataIndex]},label:{show:!0,position:"top",textStyle:{color:"#999999",fontSize:14}}}}}]}}},created:function(){this.queryData(),this.showMap()},mounted:function(){var e=this,t=[];this.gpsArr.forEach((function(a){t.push(e.getCity(a.lang,a.lat))})),Promise.all(t).then((function(t){e.addressArr=t;var a={};e.addressArr.forEach((function(e){a[e.city]?a[e.city]+=1:a[e.city]=1})),e.data=[],Object.keys(a).forEach((function(t){e.data.push({name:t.replace(/市/,""),value:a[t]})})),e.$nextTick((function(){e.option.series[0].data=e.convertData(e.data)}))}))},methods:{queryData:function(){var e=this;c().then((function(t){t&&200===t.code&&(e.statisInfo=t.data,e.faultOption.series[0].data=[e.statisInfo.faultTotal,e.statisInfo.solveFaultNum],e.todayFaultOption.series[0].data=[e.statisInfo.faultTodayTotal,e.statisInfo.solveFaultTodayNum])}))},showMap:function(){this.option={tooltip:{trigger:"item"},bmap:{center:[123.331398,39.897445],zoom:5,roam:!0,mapOptions:{enableMapClick:!1}},series:[{name:"试验车",type:"effectScatter",coordinateSystem:"bmap",data:[],symbolSize:15,encode:{value:2},showEffectOn:"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!0,label:{formatter:"{b}",position:"right",show:!0},itemStyle:{color:"#3370fa",shadowBlur:10,shadowColor:"#fff"},zlevel:1}]}},convertData:function(e){for(var t=[],a=0;a<e.length;a++){var r=this.geoCoordMap[e[a].name];r&&t.push({name:e[a].name,value:r.concat(e[a].value)})}return t},getCity:function(e,t){var a=new BMap.Point(e,t),r=new BMap.Geocoder;return new Promise((function(e,t){r.getLocation(a,(function(t){var a=t.addressComponents;e(a)}))}))}}},d=u,m=(a("a73f"),a("2877")),p=Object(m["a"])(d,r,n,!1,null,"431b3f8e",null);t["default"]=p.exports},"1e8b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:16}},[a("el-row",{staticClass:"userInfo_wrap mt10 mb20",attrs:{type:"flex",justify:"center"}},[a("el-col",{staticClass:"userInfo_item flex-center",attrs:{span:6}},[a("userAvatar",{attrs:{user:e.user}})],1),e._v(" "),a("el-col",{staticClass:"userInfo_item",attrs:{span:9}},[a("el-row",{staticClass:"mt10"}),e._v(" "),a("el-row",{staticClass:"mt20 mb20",attrs:{gutter:0}},[a("el-col",{staticClass:"text-info",attrs:{span:5,offset:2}},[e._v("用户姓名：")]),e._v(" "),a("el-col",{staticClass:"text-muted",attrs:{span:10}},[e._v(e._s(e.user.userName))])],1),e._v(" "),a("el-row",{staticClass:"mb20",attrs:{gutter:0}},[a("el-col",{staticClass:"text-info",attrs:{span:5,offset:2}},[e._v("手机号码：")]),e._v(" "),a("el-col",{staticClass:"text-muted",attrs:{span:10}},[e._v(e._s(e.user.phone))])],1),e._v(" "),a("el-row",{staticClass:"mb20",attrs:{gutter:0}},[a("el-col",{staticClass:"text-info",attrs:{span:5,offset:2}},[e._v("归属机构：")]),e._v(" "),a("el-col",{staticClass:"text-muted",attrs:{span:10}},[e._v(e._s(e.user.orgName))])],1),e._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{staticClass:"text-info",attrs:{span:5,offset:2}},[e._v("角色名称：")]),e._v(" "),a("el-tooltip",{attrs:{disabled:e.hideTooltip,content:e.user.rolesNames,placement:"top"}},[a("el-col",{staticClass:"text-muted",attrs:{span:10}},[a("span",{ref:"rolesNames",staticClass:"rolesNames text-ellipsis"},[e._v(e._s(e.user.rolesNames))])])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"userInfo_item flex-center",attrs:{span:3}},[a("el-link",{attrs:{type:"danger"},on:{click:e.logout}},[e._v("退出登录")])],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"bottomLine"})],1),e._v(" "),a("el-row",{staticClass:"center_line",attrs:{gutter:10}},[a("el-col",{staticClass:"fuze",attrs:{span:12}},[a("p",{staticClass:"text-primary ml30"},[e._v("负责设备")]),e._v(" "),a("div",e._l(e.deviceList,(function(t,r){return a("el-col",{key:r,staticClass:"mb20",attrs:{offset:2}},[a("span",{staticClass:"text-info"},[e._v("设备号：")]),e._v(" "),a("span",{staticClass:"text-muted"},[e._v(e._s(t.deviceCode)+"【"+e._s(e._f("formatDeviceStatus")(t.status))+"】")])])})),1)]),e._v(" "),a("el-col",{staticClass:"fuze",attrs:{span:12}},[a("p",{staticClass:"text-primary ml30"},[e._v("负责项目")]),e._v(" "),a("div",e._l(e.projectList,(function(t,r){return a("el-col",{key:r,staticClass:"mb20",attrs:{offset:2}},[a("span",{staticClass:"text-info"},[e._v("项目号：")]),e._v(" "),a("span",{staticClass:"text-muted"},[e._v(e._s(t.projectCode)+"【"+e._s(e._f("formatProjectStatus")(t.status))+"】")])])})),1)])],1)],1)],1)},n=[],i=(a("96cf"),a("1da1")),o=a("c0c7"),l=a("9429"),s={components:{userAvatar:l["default"]},props:{user:{type:Object}},data:function(){return{deviceList:[],projectList:[],hideTooltip:!0,erd:null}},mounted:function(){var e=this,t=a("eec4");this.erd=t(),this.$refs.rolesNames&&this.erd.listenTo(this.$refs.rolesNames,(function(t){var a=t.offsetWidth;a>=260&&(e.hideTooltip=!1)}))},created:function(){this.getDeviceProject()},beforeDestroy:function(){this.erd.uninstall(this.$refs.rolesNames)},methods:{logout:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("确认退出登录？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$store.dispatch("LogOut").then((function(e){t.$router.push("/login")}))}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getDeviceProject:function(){var e=this;Object(o["e"])().then((function(t){t&&200===t.code&&(e.deviceList=t.data)})),Object(o["g"])().then((function(t){t&&200===t.code&&(e.projectList=t.data)}))}}},c=s,u=(a("e692"),a("2877")),d=Object(u["a"])(c,r,n,!1,null,"7d12f7dc",null);t["default"]=d.exports},"1f00":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"f",(function(){return c})),a.d(t,"b",(function(){return u}));var r=a("b775"),n=(a("24bf"),a("f121"));function i(e){return Object(r["a"])({url:n["a"].API_MONIT+"/place",method:"get",params:e})}function o(){return Object(r["a"])({url:n["a"].API_MONIT+"/area/all",method:"get"})}function l(e){return Object(r["a"])({url:n["a"].API_MONIT+"/place/info/".concat(e),method:"get"})}function s(e){return Object(r["a"])({url:n["a"].API_MONIT+"/place",method:"post",data:e})}function c(e){return Object(r["a"])({url:n["a"].API_MONIT+"/place/".concat(e.id),method:"put",data:e})}function u(e){return Object(r["a"])({url:n["a"].API_MONIT+"/place/".concat(e),method:"delete"})}},"1f34":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e._v(" "),a("el-col",{attrs:{span:24,xs:24}},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"用户名称",prop:"username"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入用户名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.username,callback:function(t){e.$set(e.queryParams,"username",t)},expression:"queryParams.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入手机号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.phone,callback:function(t){e.$set(e.queryParams,"phone",t)},expression:"queryParams.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户角色",prop:"roles"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择",clearable:"",size:"small"},model:{value:e.queryParams.roles,callback:function(t){e.$set(e.queryParams,"roles",t)},expression:"queryParams.roles"}},e._l(e.roleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.userList}},[a("el-table-column",{attrs:{label:"用户名称",align:"center",prop:"userName",width:"150","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"手机号码",align:"center",prop:"phone","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"负责设备",align:"center",prop:"id","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"负责项目",align:"center",prop:"id","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(1===t.row.status?"使用":"冻结")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"用户角色",align:"center",prop:"roles","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatRoles")(t.row.roles,e.roleOptions)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"250","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{class:"admin"===t.row.userName?"text-disabled":"",attrs:{size:"small",type:"text",disabled:"admin"===t.row.userName},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{class:"admin"===t.row.userName?"text-disabled":"",attrs:{size:"small",type:"text",disabled:"admin"===t.row.userName},on:{click:function(a){return e.setRoles(t.row)}}},[e._v("角色设置")]),e._v(" "),1===t.row.status?a("el-button",{class:"admin"===t.row.userName?"text-disabled":"text-danger",attrs:{size:"small",type:"text",disabled:"admin"===t.row.userName},on:{click:function(a){return e.handleStatusChange(t.row)}}},[e._v("冻结")]):e._e(),e._v(" "),0===t.row.status?a("el-button",{class:"admin"===t.row.userName?"text-disabled":"text-danger",attrs:{size:"small",type:"text",disabled:"admin"===t.row.userName},on:{click:function(a){return e.handleStatusChange(t.row)}}},[e._v("解冻")]):e._e(),e._v(" "),a("el-button",{class:"admin"===t.row.userName?"text-disabled":"text-danger",attrs:{size:"small",type:"text",disabled:"admin"===t.row.userName},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]),e._v(" "),"admin"===e.$store.getters.name?a("el-button",{class:"admin"!==e.$store.getters.name?"text-disabled":"text-danger",attrs:{size:"small",type:"text",disabled:"admin"!==e.$store.getters.name},on:{click:function(a){return e.handleResetPwd(t.row)}}},[e._v("重置")]):e._e()]}}])})],1),e._v(" "),e.total>0&&e.pageShow?a("pagination",{attrs:{total:e.total,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}):e._e()],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":"","before-close":e.cancel,"close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",[e.isRoles?e._e():a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{prop:"orgId",label:"归属部门"}},[a("el-select",{staticClass:"full-width",attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:e.form.orgId,callback:function(t){e.$set(e.form,"orgId",t)},expression:"form.orgId"}},e._l(e.deptOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.organizationName,value:e.id}})})),1)],1)],1),e._v(" "),e.isRoles?e._e():a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"用户名称",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入用户名称"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1)],1),e._v(" "),e.isRoles?e._e():a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"用户昵称",prop:"nickName"}},[a("el-input",{attrs:{placeholder:"请输入用户昵称"},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1)],1),e._v(" "),e.isRoles?e._e():a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入手机号码",maxlength:"11"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),e.isRoles?e._e():a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{prop:"roleIds",label:"用户角色"}},[a("el-select",{staticClass:"full-width",attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.roleIds,callback:function(t){e.$set(e.form,"roleIds",t)},expression:"form.roleIds"}},e._l(e.roleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),e.isRoles?a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{prop:"roleIds",label:"用户角色"}},[a("el-select",{staticClass:"full-width",attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.roleIds,callback:function(t){e.$set(e.form,"roleIds",t)},expression:"form.roleIds"}},e._l(e.roleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},n=[],i=(a("28a5"),a("ac6a"),a("456d"),a("c0c7")),o=a("7e6c"),l=a("3528"),s=a("ca17"),c=a.n(s),u=(a("542c"),{name:"User",components:{Treeselect:c.a},data:function(){var e=this;return{loading:!0,total:0,pageShow:!0,userList:null,title:"",isRoles:!1,singleRoles:[],deptOptions:void 0,open:!1,initPassword:void 0,dateRange:[],statusOptions:Object.keys(this.ENUMS.USER_STATUS).map((function(t){return{value:parseInt(t),label:e.ENUMS.USER_STATUS[t]}})),typeOptions:Object.keys(this.ENUMS.USER_TYPE).map((function(t){return{value:parseInt(t),label:e.ENUMS.USER_TYPE[t]}})),roleOptions:[],form:{},defaultProps:{children:"children",label:"label"},queryParams:{pageNo:1,pageSize:10,username:void 0,phone:void 0,roles:void 0,status:void 0},rules:{userName:[{required:!0,message:"用户名称不能为空",trigger:"blur"},{max:15,message:"用户名称长度最多15个字符",trigger:"blur"}],nickName:[{required:!0,message:"用户昵称不能为空",trigger:"blur"},{max:15,message:"用户名称长度最多15个字符",trigger:"blur"}],orgId:[{required:!0,message:"归属部门不能为空",trigger:"change"}],roleIds:[{required:!0,message:"用户角色不能为空",trigger:"change"}],email:[{required:!0,message:"邮箱地址不能为空",trigger:"blur"},{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],phone:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}}},watch:{},created:function(){this.getList(),this.getRoleList(),this.getOrgList(),console.log("statusOptions",this.statusOptions)},methods:{getList:function(){var e=this;this.loading=!0,Object(i["h"])(this.addDateRange(this.queryParams,this.dateRange)).then((function(t){var a=t.data.list;e.userList=a,e.total=t.data.total,e.loading=!1}))},getRoleList:function(){var e=this;Object(l["e"])({pageNo:1,pageSize:50}).then((function(t){console.log("res roles :>> ",t),e.roleOptions=t.data.list}))},getOrgList:function(){var e=this;Object(o["d"])().then((function(t){console.log("res",t),t.data.forEach((function(e){return e.id+=""})),e.deptOptions=t.data}))},handleStatusChange:function(e){var t=this,a=e.status?"冻结后用户将无法登录该平台，其他选择项也将不再出现该用户，历史数据不影响，是否继续？":"解冻后该用户权限将恢复，是否继续？";this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=e.status?0:1;Object(i["c"])(e.userId,a).then((function(e){e&&200===e.code&&(t.msgSuccess("操作成功"),t.getList())})).catch((function(e){t.msgError(e.data.messgae||"操作失败"),t.getList()}))})).catch((function(e){}))},cancel:function(){this.open=!1,this.isRoles=!1,this.reset()},reset:function(){this.form={id:void 0,userId:void 0,userName:void 0,nickName:void 0,phone:void 0,email:void 0,status:1,type:"1",remark:void 0,roles:"",orgId:"",roleIds:[]},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNo=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleAdd:function(){this.reset(),console.log("this.form.rolesIds",this.form),this.open=!0,this.title="添加用户"},handleUpdate:function(e){var t=this;this.reset();var a=e.id,r=this.userList.filter((function(e){return e.id==a}))[0];console.log("current_info.roleId",r,r.roles),r.roles?r.roleIds=r.roles.split(",").map((function(e){return parseInt(e)})):r.roleIds=[],Object.keys(this.form).forEach((function(e){t.form[e]=r[e]})),console.log("---",this.form),this.title="修改用户",this.open=!0},setRoles:function(e){var t=this;this.reset();var a=e.id,r=this.userList.filter((function(e){return e.id==a}))[0];console.log("current_info.roleId",r,r.roles),r.roles?r.roleIds=r.roles.split(",").map((function(e){return parseInt(e)})):r.roleIds=[],Object.keys(this.form).forEach((function(e){t.form[e]=r[e]})),this.title="角色设置",this.isRoles=!0,this.open=!0},handleResetPwd:function(e){var t=this;this.$prompt('请输入"'+e.userName+'"的新密码',"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(a){var r=a.value;Object(i["i"])(e.userId,r).then((function(a){t.msgSuccess("修改成功，"+e.userName+"新密码是："+r)}))})).catch((function(){}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.form.roles=e.form.roleIds.join(","),console.log(e.form.roles,"rrrrr...."),delete e.form.roleIds,console.log("---",e.form),void 0!=e.form.id?Object(i["j"])(e.form).then((function(t){t&&200===t.code&&(e.open=!1,e.getList())})).catch((function(t){e.msgError(t.data.message||"修改失败！")})):Object(i["a"])(e.form).then((function(t){t&&200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})).catch((function(t){e.msgError(t.data.message||"新增失败！")})))}))},handleDelete:function(e){var t=this,a=[e.userId],r=[];this.userList.forEach((function(e){a.forEach((function(t){t===e.userId&&r.push(e.userName)}))})),this.$confirm('是否确认删除用户名为"'+r+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["d"])(a).then((function(){t.msgSuccess("删除成功");var e=Math.ceil((t.total-1)/t.queryParams.pageSize),a=t.queryParams.pageNo>e?e:t.queryParams.pageNo;t.queryParams.pageNo=a<1?1:a,t.getList()})).catch((function(e){t.msgError(e.data.message||"删除失败！")}))})).catch((function(){}))}}}),d=u,m=(a("53d5"),a("2877")),p=Object(m["a"])(d,r,n,!1,null,"bc955e46",null);t["default"]=p.exports},2019:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{staticClass:"clearfix"},[a("el-button",{staticClass:"ml5",attrs:{type:"primary",size:"mini",icon:"el-icon-setting"},on:{click:e.handleSetting}},[e._v("报警设置")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("解绑")])],1)],1),e._v(" "),a("el-table",{attrs:{data:e.settingList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"报警规则",align:"center",prop:"alertRolesId","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.alertRolesId||"车辆时速>120km/h")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",align:"center",prop:"projectId","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"表达式",align:"center",prop:"rangeValue","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.rangeValue||"!!%#$&*")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"报警开始时间",align:"center",prop:"alertStartTime","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"报警结束时间",align:"center",prop:"alertEndTime","show-overflow-tooltip":""}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getSettingList}})],1),e._v(" "),e.settingOpen?a("ala-setting",{attrs:{visable:e.settingOpen},on:{cancel:e.cancel,refresh:e.getSettingList}}):e._e()],1)},n=[],i=(a("ac6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.visable,"close-on-click-modal":!1,"before-close":e.cancel,"append-to-body":"",width:"1150px"},on:{"update:visible":function(t){e.visable=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:11}},[a("el-col",[a("el-form-item",{attrs:{label:"报警规则",prop:"alertRolesId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:""},model:{value:e.form.alertRolesId,callback:function(t){e.$set(e.form,"alertRolesId",t)},expression:"form.alertRolesId"}},e._l(e.alarmRuleOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[a("el-input",{staticStyle:{width:"82%"},attrs:{size:"small",placeholder:"请选择项目名称",disabled:""},model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.openRight("project","项目选择",e.total)}}},[e._v("选择")])],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"项目号",prop:"projectCode"}},[a("el-input",{attrs:{size:"small",placeholder:"请选择项目号",disabled:""},model:{value:e.form.projectCode,callback:function(t){e.$set(e.form,"projectCode",t)},expression:"form.projectCode"}})],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"报警开始时间:",prop:"alertStartTime"}},[a("el-date-picker",{staticClass:"full-width",attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择日期",size:"small"},model:{value:e.form.alertStartTime,callback:function(t){e.$set(e.form,"alertStartTime",t)},expression:"form.alertStartTime"}})],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"报警结束时间:",prop:"alertEndTime"}},[a("el-date-picker",{staticClass:"full-width",attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择日期",size:"small"},model:{value:e.form.alertEndTime,callback:function(t){e.$set(e.form,"alertEndTime",t)},expression:"form.alertEndTime"}})],1)],1)],1),e._v(" "),e.rightFlag?a("el-col",{attrs:{span:13}},[a("p",{staticClass:"rightTitle"},[e._v(e._s(e.rightTitle))]),e._v(" "),"project"===e.rightFlag?a("el-form",{ref:"queryForm_project",attrs:{model:e.queryParams_project,inline:!0}},[a("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入项目名",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams_project.projectName,callback:function(t){e.$set(e.queryParams_project,"projectName",t)},expression:"queryParams_project.projectName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人",prop:"chargeNickName"}},[a("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",size:"small"},model:{value:e.queryParams_project.chargeUserId,callback:function(t){e.$set(e.queryParams_project,"chargeUserId",t)},expression:"queryParams_project.chargeUserId"}},e._l(e.userOptions,(function(e){return a("el-option",{key:e.userId,attrs:{label:e.nickName,value:e.userId}})})),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search",plain:""},on:{click:e.handleQuery}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmSelect}},[e._v("确定")])],1)],1):e._e(),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"project"===e.rightFlag,expression:"rightFlag === 'project'"}],attrs:{data:e.projectList,height:"264"}},[a("el-table-column",{attrs:{label:"选择",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},nativeOn:{change:function(a){return e.getCurrentRow(t.row)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(" ")])]}}],null,!1,2694489770)}),e._v(" "),a("el-table-column",{attrs:{label:"项目号",align:"center",prop:"projectCode","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",align:"center",prop:"projectName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"车辆VIN",align:"center",prop:"vin","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"设备号",align:"center",prop:"deviceCode","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"场地",align:"center",prop:"placeName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"负责人",align:"center",prop:"chargeNickName","show-overflow-tooltip":""}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.rightTotal>0,expression:"rightTotal > 0"}],attrs:{total:e.rightTotal,page:e.rightParams.pageNo,limit:e.rightParams.pageSize},on:{"update:page":function(t){return e.$set(e.rightParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.rightParams,"pageSize",t)},pagination:e.freshData}})],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)}),o=[],l=a("c0c7"),s=a("7ca7"),c=a("b808"),u={name:"CreateData",props:{visable:{default:!1,type:Boolean}},data:function(){return{title:"报警设置",projectList:null,projectTotal:0,radio:"",currentSelect:null,alarmRuleOption:null,userOptions:void 0,form:{},rules:{alertRolesId:[{required:!0,message:"报警规则不能为空",trigger:"change"}],projectName:[{required:!0,message:"项目名称不能为空",trigger:["blur","change"]},{min:2,max:20,message:"项目名称长度应为2~20个字符",trigger:"blur"}],projectCode:[{required:!0,message:"项目号不能为空",trigger:["blur","change"]}],alertStartTime:[{required:!0,message:"报警开始时间不能为空",trigger:"change"}],alertEndTime:[{required:!0,message:"报警结束时间不能为空",trigger:"change"}]},rightParams:null,queryParams_project:{pageNo:1,pageSize:10,projectName:"",chargeNickName:""},rightFlag:"",rightTitle:"",rightTotal:0}},created:function(){this.reset(),this.getRuleList(),this.getUserList(),this.getProjectList()},methods:{getRuleList:function(){var e=this;Object(c["e"])(this.queryParams).then((function(t){console.log("res :>> ",t),t&&200===t.code&&(e.alarmRuleOption=t.data.map((function(e){return{value:e.id,label:e.alertTitle}})))}))},getUserList:function(){var e=this;this.loading=!0,Object(l["b"])().then((function(t){t&&200===t.code&&(e.userOptions=t.data,e.loading=!1)}))},getProjectList:function(){var e=this;Object(s["e"])(this.queryParams_project).then((function(t){t&&200===t.code&&(e.projectList=t.data.list,e.total=t.data.total)}))},openRight:function(e,t,a){var r=e;switch(r!==this.rightFlag&&(this.radio=""),this.rightFlag=e,this.rightTitle=t,this.rightTotal=a,this.rightFlag){case"project":this.rightParams=this.queryParams_project;break}},freshData:function(){switch(this.rightFlag){case"project":this.getProjectList();break}},handleQuery:function(){this.rightParams.pageNo=1,this.freshData(),this.currentSelect=null,this.radio=""},getCurrentRow:function(e){console.log(e,"currentSelect"),this.currentSelect=e},confirmSelect:function(){if(null===this.currentSelect)return this.$message.warning("请选择"),!1;switch(this.rightFlag){case"project":this.form.projectName=this.currentSelect.projectName,this.form.projectCode=this.currentSelect.projectCode,this.form.projectId=this.currentSelect.projectId;break}this.currentSelect=null,this.radio="",this.rightFlag=""},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(console.log("---",e.form),Object(c["b"])(e.form).then((function(t){t&&200===t.code&&(e.msgSuccess("报警设置成功"),e.cancel(),e.$emit("refresh"))})).catch((function(t){e.msgError(t.data.message||"报警设置失败！")})))}))},reset:function(){this.form={id:void 0,projectName:void 0,projectCode:void 0,projectId:void 0,alertRolesId:void 0,alertStartTime:void 0,alertEndTime:void 0},this.resetForm("form")},cancel:function(){this.reset(),this.$emit("cancel")}}},d=u,m=(a("2714"),a("2877")),p=Object(m["a"])(d,i,o,!1,null,"68fc028a",null),f=p.exports,h=(a("f121"),{name:"AlarmSetting",components:{AlaSetting:f},data:function(){return{settingList:[],total:0,ids:[],multiple:!0,settingOpen:!1,queryParams:{pageNo:1,pageSize:10,orderBy:"createTime",order:"desc"}}},created:function(){this.getSettingList()},methods:{getSettingList:function(){var e=this;Object(c["g"])(this.queryParams).then((function(t){console.log("res :>> ",t),t&&200===t.code&&(e.settingList=t.data.list,e.total=t.data.total)}))},handleSetting:function(){this.settingOpen=!0},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.multiple=!e.length},handleDelete:function(e){var t=this,a=(e.id?[e.id]:"")||this.ids,r=[];this.settingList.forEach((function(e){a.forEach((function(t){t===e.id&&r.push(e.projectId)}))})),console.log("ids :>> ",a),this.$confirm('是否确认解绑项目名为"'+r+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["d"])(a).then((function(e){if(e&&200===e.code){t.msgSuccess("解绑成功");var a=Math.ceil((t.total-1)/t.queryParams.pageSize),r=t.queryParams.pageNo>a?a:t.queryParams.pageNo;t.queryParams.pageNo=r<1?1:r,t.getSettingList()}})).catch((function(e){t.msgError(e.data.message||"解绑失败！")}))})).catch((function(){}))},cancel:function(){this.settingOpen=!1}}}),g=h,v=Object(m["a"])(g,r,n,!1,null,null,null);t["default"]=v.exports},2255:function(e,t,a){},2447:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return c}));var r=a("b775"),n=(a("24bf"),a("f121"));function i(e){return Object(r["a"])({url:n["a"].API_MONIT+"/car",method:"get",params:e})}function o(e){return Object(r["a"])({url:n["a"].API_MONIT+"/car",method:"post",data:e})}function l(e){return Object(r["a"])({url:n["a"].API_MONIT+"/car/".concat(e.id),method:"put",data:e})}function s(e){return Object(r["a"])({url:n["a"].API_MONIT+"/car/".concat(e),method:"delete"})}function c(e){return Object(r["a"])({url:n["a"].API_FILE+"/file/upload/single",method:"post",data:e})}},"24b4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{staticClass:"clearfix"},[a("el-link",{staticClass:"pull-right mt10 mr20 go-back",attrs:{type:"primary"},on:{click:e.goBack}},[e._v(" 返回 - 远程控制")])],1)],1),e._v(" "),a("el-row",{staticClass:"refresh_content mt-10",attrs:{gutter:24}},[a("el-col",{staticClass:"left",attrs:{span:12}},[a("el-form",{ref:"form",staticClass:"mt20",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:22,offset:1}},[a("el-form-item",{attrs:{label:"版本号",prop:"version"}},[a("el-input",{staticStyle:{width:"66%"},attrs:{placeholder:"请输入版本号"},model:{value:e.form.version,callback:function(t){e.$set(e.form,"version",t)},expression:"form.version"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:22,offset:1}},[a("el-form-item",{attrs:{label:"制造商ID",prop:"manufacturerId"}},[a("el-input",{staticStyle:{width:"66%"},attrs:{placeholder:"请输入制造商ID"},model:{value:e.form.manufacturerId,callback:function(t){e.$set(e.form,"manufacturerId",t)},expression:"form.manufacturerId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:22,offset:1}},[a("el-form-item",{attrs:{label:"刷写类型",prop:"upgradeType"}},[a("el-select",{staticStyle:{width:"66%"},attrs:{clearable:""},model:{value:e.form.upgradeType,callback:function(t){e.$set(e.form,"upgradeType",t)},expression:"form.upgradeType"}},e._l(e.refreshOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:Number(e.value)}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:22,offset:1}},[a("el-form-item",{attrs:{label:"刷写文件",prop:"freshFile"}},[a("el-input",{staticStyle:{width:"66%"},attrs:{placeholder:"请选择刷写文件",disabled:""},model:{value:e.form.freshFile,callback:function(t){e.$set(e.form,"freshFile",t)},expression:"form.freshFile"}}),e._v(" "),a("upload",{attrs:{"file-type":"any","limit-size":500,"bt-plain":!0,"bt-size":"medium","ipt-label":"freshFile"},on:{getFile:e.getFile}})],1)],1)],1)],1)],1),e._v(" "),a("el-col",{staticClass:"right",attrs:{span:12}},[a("div",{staticClass:"history_wrap"},e._l(e.refreshHistory,(function(t,r){return a("div",{key:r},[t.length?a("p",{staticClass:"text-primary"},[e._v("\n                "+e._s(t[0].createTime)+"\n              ")]):e._e(),e._v(" "),e._l(t,(function(t,r){return a("div",{key:r,staticClass:"content_wrap"},[a("p",{staticClass:"text-muted"},[e._v(e._s(t.result))])])}))],2)})),0)]),e._v(" "),a("el-col",{staticClass:"bottomLine",attrs:{span:24}})],1)],1),e._v(" "),a("div",{staticClass:"text-center mt20"},[a("el-button",{attrs:{type:"primary",loading:e.refreshLoading},on:{click:e.submitForm}},[e._v(e._s(e.refreshLoading?e.loadingTitle:"确 定")+"\n      ")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("重 置")])],1)],1)},n=[],i=(a("7f7f"),a("ac6a"),a("456d"),a("7d4e")),o=a("8889"),l=a("b74d"),s={name:"RemoteRefresh",components:{Upload:i["a"]},props:{},data:function(){var e=this;return{projectCode:void 0,deviceCode:void 0,file:null,formData:new FormData,refreshOptions:Object.keys(this.ENUMS.REFRESH_TYPE).map((function(t){return{value:t,label:e.ENUMS.REFRESH_TYPE[t]}})),refreshHistory:[{date:"2021-10-12 15:13",content:[{items:"配置下发完成..."},{items:"刷写中..."},{items:"xxxx..."},{items:"刷写完成"}]},{date:"2021-10-12 15:20",content:[{items:"配置下发完成..."},{items:"刷写中..."},{items:"xxxx..."},{items:"刷写完成"}]}],refreshTimer:null,refreshTimerout:null,refreshLoading:!1,loadingTitle:"",form:{deviceCode:"",projectCode:"",version:"",manufacturerId:"",freshFile:"",fileName:"",filePath:"",fileType:""},rules:{version:[{required:!0,message:"版本号不能为空",trigger:"blur"}],manufacturerId:[{required:!0,message:"制造商ID不能为空",trigger:"blur"},{pattern:/^[0-9a-zA-Z]{5}$/,message:"请输入5位数字或字母",trigger:"blur"}],upgradeType:[{required:!0,message:"请选择刷写类型",trigger:"change"}],freshFile:[{required:!0,message:"刷写文件不能为空",trigger:["blur","change"]}]}}},created:function(){this.reset(),this.projectCode=this.$route.params.projectCode,this.deviceCode=this.$route.params.deviceCode,this.queryRefreshLog()},methods:{queryRefreshLog:function(){var e=this,t={projectCode:this.projectCode,deviceCode:this.deviceCode};Object(l["e"])(t).then((function(t){console.log("res :>> refreshHistory",t),t&&200===t.code&&(e.refreshHistory=t.data)}))},goBack:function(){this.$router.go(-1)},getFile:function(e,t){e?(t&&(this.form[t]=e.name),this.formData.set("file",e),this.formData.set("remark","file"),this.formData.set("path","config"),this.form.freshFile=e.name):(this.formData.set("file",null),this.form.freshFile="")},checkRefreshStatus:function(){var e=this,t={deviceCode:this.deviceCode,projectCode:this.projectCode};Object(l["b"])(t).then((function(t){t&&200===t.code&&!0===t.data&&(e.$message.success("刷写完成"),clearInterval(e.refreshTimer),clearTimeout(e.refreshTimerout),e.refreshLoading=!1,e.loadingTitle="",e.queryRefreshLog())}))},submitForm:function(){var e=this;console.log("deviceCode is ",this.deviceCode),this.formData.set("path","config/"+this.deviceCode),this.$refs["form"].validate((function(t){if(t){var a={deviceCode:e.deviceCode,projectCode:e.projectCode};Object(l["b"])(a).then((function(t){t&&200===t.code&&(!1===t.data?e.$message.error("此设备正在刷写中，请稍后重试！"):(e.refreshLoading=!0,e.loadingTitle="文件上传中...",Object(o["g"])(e.formData).then((function(t){t&&200===t.code&&(e.form.fileName=t.data.fileName,e.form.filePath=t.data.filePath,e.form.fileType=t.data.fileType,e.form.deviceCode=e.deviceCode,e.form.projectCode=e.projectCode,Object(l["h"])(e.form).then((function(t){t&&200===t.code&&(e.loadingTitle="刷写中...",e.$message.success("终端正在刷写中..."),e.refreshTimer=setInterval((function(){console.log("刷写中 :>> "),e.checkRefreshStatus()}),5e3),e.refreshTimerout=setTimeout((function(){clearInterval(e.refreshTimer),clearTimeout(e.refreshTimerout),e.refreshLoading=!1,e.queryRefreshLog()}),18e4))})).catch((function(t){e.$message.error(t.data.message||"操作失败"),e.refreshLoading=!1,e.loadingTitle=""})))})).catch((function(t){e.$message.error("文件上传失败"),e.refreshLoading=!1,e.loadingTitle=""}))))}))}}))},reset:function(){this.resetForm("form")},cancel:function(){this.reset()}}},c=s,u=(a("ed77"),a("2877")),d=Object(u["a"])(c,r,n,!1,null,"788263b8",null);t["default"]=d.exports},"26fc":function(e,t,a){e.exports=a.p+"static/img/404_cloud.0f4bc32b.png"},2714:function(e,t,a){"use strict";a("96ed")},2754:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wscn-http404-container"},[a("div",{staticClass:"wscn-http404"},[e._m(0),e._v(" "),a("div",{staticClass:"bullshit"},[a("div",{staticClass:"bullshit__oops"},[e._v("\n        404错误!\n      ")]),e._v(" "),a("div",{staticClass:"bullshit__headline"},[e._v("\n        "+e._s(e.message)+"\n      ")]),e._v(" "),a("div",{staticClass:"bullshit__info"},[e._v("\n        对不起，您正在寻找的页面不存在。尝试检查URL的错误，然后按浏览器上的刷新按钮或尝试在我们的应用程序中找到其他内容。\n      ")]),e._v(" "),a("router-link",{staticClass:"bullshit__return-home",attrs:{to:"/"}},[e._v("\n        返回首页\n      ")])],1)])])},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pic-404"},[r("img",{staticClass:"pic-404__parent",attrs:{src:a("a36b"),alt:"404"}}),e._v(" "),r("img",{staticClass:"pic-404__child left",attrs:{src:a("26fc"),alt:"404"}}),e._v(" "),r("img",{staticClass:"pic-404__child mid",attrs:{src:a("26fc"),alt:"404"}}),e._v(" "),r("img",{staticClass:"pic-404__child right",attrs:{src:a("26fc"),alt:"404"}})])}],i={name:"Page404",computed:{message:function(){return"找不到网页！"}}},o=i,l=(a("61b6"),a("2877")),s=Object(l["a"])(o,r,n,!1,null,"279ea4b2",null);t["default"]=s.exports},"280a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"event_wrap mt10"},[a("el-row",{staticClass:"header"},[a("el-col",{staticClass:"text-monitor title_item",attrs:{span:24,align:"center"}},[e._v("事件列表")])],1),e._v(" "),a("el-row",{staticClass:"content_wrap"},[e.tableShow?a("el-table",{attrs:{height:"388",data:e.eventData,"show-header":!!e.eventData.length,"cell-style":e.cellStyle}},[a("el-table-column",{attrs:{prop:"eventName",label:"名称",align:"center","class-name":"left_cell","label-class-name":"left_title","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"triggerTime",label:"时间",align:"center","class-name":"center_cell","label-class-name":"center_title","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"right_cell","label-class-name":"right_title"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"text-monitor",attrs:{size:"small",type:"text"},on:{click:function(a){return e.videoReplay(t.row)}}},[e._v("回放")]),e._v(" "),a("el-button",{staticClass:"text-monitor",attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleDownload(t.row)}}},[e._v("下载数据")])]}}],null,!1,60227236)})],1):e._e()],1)],1)},n=[],i=a("6272"),o={name:"EventList",components:{},props:{eventData:{type:Array,default:function(){return[]}}},data:function(){return{tableShow:!0}},watch:{eventData:{handler:function(e,t){var a=this;this.tableShow=!1,this.$nextTick((function(){a.tableShow=!0}))}}},methods:{cellStyle:function(e){e.row;var t=e.column,a=e.rowIndex;e.columnIndex;return"名称"===t.label&&a===this.eventData.length-1?"border-bottom:1px solid #ff7272 !important":"时间"===t.label&&a===this.eventData.length-1?"border-bottom:1px solid #ffd672 !important":"操作"===t.label&&a===this.eventData.length-1?"border-bottom:1px solid #72AAFF !important":void 0},videoReplay:function(e){this.videoUrl=a("8a9f")("./"+e.videoUrl),this.$emit("replay",e.videoUrl)},handleDownload:function(e){var t=this,a={id:e.id};Object(i["a"])(a).then((function(a){if(200===a.status){var r=new Blob([a.data],{type:a.headers["content-type"]}),n=URL.createObjectURL(r),i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("download","".concat(e.eventName,".zip")),document.body.appendChild(i),i.click(),t.$message.success("文件下载成功 !")}else t.$message.error("文件下载失败 !")})).catch((function(e){console.log("err>>>>>>>>",e),t.msgError(e.message||"下载失败！")}))}}},l=o,s=(a("7fe2"),a("2877")),c=Object(s["a"])(l,r,n,!1,null,"1165565c",null);t["default"]=c.exports},"28f1":function(e,t,a){},"2bb7":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{staticClass:"clearfix"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("添加规则")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1)],1),e._v(" "),a("el-table",{attrs:{data:e.ruleList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"规则名称",align:"center",prop:"alertTitle","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.alertTitle||"车辆时速>120km/h")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"原始表达式",align:"center",prop:"alertRenge","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.alertRenge||"&^%#@*")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"表达式",align:"center",prop:"rangeValue","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.rangeValue||"!!%#$&*")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.remark||"暂无")+"\n        ")]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getRuleList}})],1),e._v(" "),e.ruleOpen?a("create-rule",{attrs:{visable:e.ruleOpen},on:{cancel:e.cancel,refresh:e.getRuleList}}):e._e()],1)},n=[],i=(a("ac6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.visable,"close-on-click-modal":!1,"before-close":e.cancel,"append-to-body":"",width:"1200px"},on:{"update:visible":function(t){e.visable=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:11}},[a("el-col",[a("el-form-item",{attrs:{label:"规则名称",prop:"alertTitle"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入规则名称"},model:{value:e.form.alertTitle,callback:function(t){e.$set(e.form,"alertTitle",t)},expression:"form.alertTitle"}})],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"表达式",prop:"alertRenge"}},[a("el-input",{staticStyle:{width:"84%"},attrs:{size:"small",placeholder:"以“参数1”开头，示例：参数1=1 and 参数2=2"},model:{value:e.form.alertRenge,callback:function(t){e.$set(e.form,"alertRenge",t)},expression:"form.alertRenge"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",plain:""}},[e._v("完成")])],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"表达式变量",prop:"rangeValue"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:""},model:{value:e.form.rangeValue,callback:function(t){e.$set(e.form,"rangeValue",t)},expression:"form.rangeValue"}},e._l(e.alarmFileType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"通道参数",prop:"rangeParams"}},[a("el-input",{staticStyle:{width:"84%"},attrs:{size:"small",placeholder:"请选择",disabled:""},model:{value:e.form.rangeParams,callback:function(t){e.$set(e.form,"rangeParams",t)},expression:"form.rangeParams"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.openRight("channel","通道参数")}}},[e._v("选择")])],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"表达式展示",prop:"expression_show"}},[a("el-input",{attrs:{size:"small",placeholder:"",disabled:""},model:{value:e.form.alertRenge,callback:function(t){e.$set(e.form,"alertRenge",t)},expression:"form.alertRenge"}})],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:3,maxlength:"30","show-word-limit":"",placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),e._v(" "),e.rightFlag?a("el-col",{attrs:{span:13}},[a("div",{staticClass:"clearfix"},[a("p",{staticClass:"rightTitle pull-left"},[e._v(e._s(e.rightTitle))]),e._v(" "),a("el-button",{staticClass:"pull-right mt-15",attrs:{size:"small",type:"primary"},on:{click:e.confirmSelect}},[e._v("确定")])],1),e._v(" "),a("div",{staticClass:"right_wrap"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},["channel"===e.rightFlag?a("el-form",{ref:"queryForm_channel",attrs:{model:e.queryParams_channel,inline:!0}},[a("el-form-item",{attrs:{label:"",prop:"projectName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入DBC文件名",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams_channel.projectName,callback:function(t){e.$set(e.queryParams_channel,"projectName",t)},expression:"queryParams_channel.projectName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search",plain:""},on:{click:e.handleQuery}},[e._v("查询")])],1)],1):e._e(),e._v(" "),a("el-radio-group",{staticClass:"radio_wrap",on:{change:e.radioChange},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},e._l(e.singleList,(function(e,t){return a("el-radio",{key:t,staticClass:"radio_item mb20 ml20",attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-col",{attrs:{span:12}},["channel"===e.rightFlag?a("el-form",{ref:"queryForm_channel",attrs:{model:e.queryParams_channel,inline:!0}},[a("el-form-item",{attrs:{label:"",prop:"projectName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入参数名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams_channel.projectName,callback:function(t){e.$set(e.queryParams_channel,"projectName",t)},expression:"queryParams_channel.projectName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search",plain:""},on:{click:e.handleQuery}},[e._v("查询")])],1)],1):e._e(),e._v(" "),a("el-checkbox-group",{staticClass:"radio_wrap",model:{value:e.currentSelect,callback:function(t){e.currentSelect=t},expression:"currentSelect"}},e._l(e.multipleList,(function(e,t){return a("el-checkbox",{key:t,staticClass:"radio_item mb20 ml20",attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)]):e._e()],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)}),o=[],l=(a("456d"),a("b808")),s={name:"CreateRule",props:{visable:{default:!1,type:Boolean}},data:function(){var e=this;return{title:"添加规则",radio:"标准化参数",singleList:[{label:"标准化参数",value:"标准化参数"},{label:"111.dbc",value:"111.dbc"},{label:"222.dbc",value:"xxxx.dbc"},{label:"333.dbc",value:"xxxx.dbc"},{label:"444.dbc",value:"xxxx.dbc"}],multipleList:[{label:"GPS车速",value:"GPS车速"},{label:"GPS海拔",value:"GPS海拔"},{label:"GPS方向",value:"GPS方向"},{label:"经度",value:"经度"},{label:"纬度",value:"纬度"},{label:"xxxx",value:"xxxx"}],currentSelect:[],alarmFileType:Object.keys(this.ENUMS.ALARM_FILE_TYPE).map((function(t){return{value:t,label:e.ENUMS.ALARM_FILE_TYPE[t]}})),form:{},rules:{alertTitle:[{required:!0,message:"规则名称不能为空",trigger:["blur","change"]},{min:2,max:15,message:"规则名称长度应为2~15个字符",trigger:"blur"}],alertRenge:[{required:!0,message:"表达式不能为空",trigger:["blur","change"]}],rangeValue:[{required:!0,message:"表达式变量不能为空",trigger:"change"}],rangeParams:[{required:!0,message:"通道参数不能为空",trigger:"change"}]},rightParams:null,queryParams_channel:{pageNo:1,pageSize:10,projectName:"",chargeNickName:""},rightFlag:"",rightTitle:""}},created:function(){this.reset()},methods:{openRight:function(e,t){switch(this.radio="标准化参数",this.currentSelect=[],this.rightFlag=e,this.rightTitle=t,this.rightFlag){case"channel":this.rightParams=this.queryParams_channel;break}},freshData:function(){},handleQuery:function(){this.rightParams.pageNo=1,this.freshData(),this.currentSelect=[],this.radio=""},radioChange:function(e){"标准化参数"!==e&&(this.multipleList=this.multipleList.filter((function(e){return"GPS车速"!==e.label&&"GPS方向"!==e.label})))},confirmSelect:function(){if(!this.currentSelect.length)return this.$message.warning("请选择"),!1;this.form.rangeParams=this.currentSelect.map((function(e){return e})).join(","),this.currentSelect=[],this.radio="",this.rightFlag=""},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(console.log("---",e.form),Object(l["a"])(e.form).then((function(t){t&&200===t.code&&(e.msgSuccess("添加规则成功"),e.cancel(),e.$emit("refresh"))})).catch((function(t){e.msgError(t.data.message||"添加规则失败！")})))}))},reset:function(){this.form={id:void 0,alertTitle:"",alertRenge:"",rangeValue:"",rangeParams:"",remark:""},this.resetForm("form")},cancel:function(){this.reset(),this.$emit("cancel")}}},c=s,u=(a("5284"),a("2877")),d=Object(u["a"])(c,i,o,!1,null,"7ee9e5a7",null),m=d.exports,p=(a("f121"),{name:"AddRules",components:{CreateRule:m},data:function(){return{ruleList:[],total:0,ids:[],multiple:!0,ruleOpen:!1,queryParams:{pageNo:1,pageSize:10,orderBy:"createTime",order:"desc"}}},created:function(){this.getRuleList()},methods:{getRuleList:function(){var e=this;Object(l["f"])(this.queryParams).then((function(t){console.log("res :>> ",t),t&&200===t.code&&(e.ruleList=t.data.list,e.total=t.data.total)}))},handleAdd:function(){this.ruleOpen=!0},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.multiple=!e.length},handleDelete:function(e){var t=this,a=(e.id?[e.id]:"")||this.ids,r=[];this.ruleList.forEach((function(e){a.forEach((function(t){t===e.id&&r.push(e.alertTitle)}))})),console.log("ids :>> ",a),this.$confirm('是否确认删除规则名为"'+r+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["c"])(a).then((function(e){if(e&&200===e.code){t.msgSuccess("删除成功");var a=Math.ceil((t.total-1)/t.queryParams.pageSize),r=t.queryParams.pageNo>a?a:t.queryParams.pageNo;t.queryParams.pageNo=r<1?1:r,t.getRuleList()}})).catch((function(e){t.msgError(e.data.message||"删除失败！")}))})).catch((function(){}))},cancel:function(){this.ruleOpen=!1}}}),f=p,h=Object(u["a"])(f,r,n,!1,null,null,null);t["default"]=h.exports},"2cfe":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.placeList}},[a("el-table-column",{attrs:{label:"序号",align:"center",prop:"id",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"场地名称",align:"center",prop:"placeName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"所在区域",align:"center",prop:"areaMerge","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"添加人",align:"center",prop:"user",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createUserName||"暂无"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"添加时间",align:"center",prop:"createTime","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"text-danger",attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getPlaceList}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"场地名称",prop:"placeName"}},[a("el-input",{attrs:{placeholder:"请输入场地名称"},model:{value:e.form.placeName,callback:function(t){e.$set(e.form,"placeName",t)},expression:"form.placeName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"场地位置",prop:"areaMerge"}},[e.showca?a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.areaOptions,clearable:"",placeholder:"请选择场地位置"},on:{change:e.handleChange},model:{value:e.form.areaMerge,callback:function(t){e.$set(e.form,"areaMerge",t)},expression:"form.areaMerge"}}):e._e()],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"经度范围",prop:"lng"}},[a("el-input",{staticStyle:{width:"78%"},attrs:{placeholder:"请选择经度范围",disabled:""},model:{value:e.form.lng,callback:function(t){e.$set(e.form,"lng",t)},expression:"form.lng"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.showMap}},[e._v("地图")])],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"纬度范围",prop:"lat"}},[a("el-input",{attrs:{placeholder:"请选择纬度范围",disabled:""},model:{value:e.form.lat,callback:function(t){e.$set(e.form,"lat",t)},expression:"form.lat"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入备注",maxlength:"30"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e._v(" "),a("el-drawer",{attrs:{title:e.drawerTitle,visible:e.drawer,"before-close":e.cancelLngLat,size:"80%"},on:{"update:visible":function(t){e.drawer=t}}},[e.drawer?a("div",{attrs:{id:"mymap"}}):e._e(),e._v(" "),a("div",{staticClass:"drawer-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.getLngLat}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.cancelLngLat}},[e._v("取消")])],1)])],1)},n=[],i=(a("456d"),a("2909")),o=(a("c5f6"),a("ac6a"),a("28a5"),a("1f00")),l={name:"Place",components:{},data:function(){var e=this,t=function(t,a,r){e.form.areaMerge&&e.form.areaMerge.length||r(new Error("请选择场地位置")),r()};return{map:null,overlays:[],drawingManager:null,cur_circle:null,cur_polygon:null,snapSelect:{lng:"",lat:"",centerLng:0,centerLat:0,areaType:0,areaRadius:0,polygon_arr:[]},hasHandle:!1,loading:!1,drawer:!1,drawerTitle:"地图",total:0,placeList:null,allArea:null,title:"",open:!1,form:{placeName:"",areaMerge:[],areaType:0,remark:"",provinceCode:"",regionCode:"",cityCode:"",lng:"",lat:"",centerLng:0,centerLat:0,areaRadius:0,polygon_arr:[],locationList:[],status:0},current_info:null,areaOptions:[],showca:!0,queryParams:{pageNo:1,pageSize:10,orderBy:"createTime",order:"desc"},rules:{placeName:[{required:!0,message:"场地名称不能为空",trigger:"blur"},{max:15,message:"场地名称长度最多15个字符",trigger:"blur"}],areaMerge:[{validator:t,required:!0,trigger:"blur"}],lng:[{required:!0,message:"经度范围不能为空",trigger:"change"}],lat:[{required:!0,message:"纬度范围不能为空",trigger:"change"}]}}},watch:{},created:function(){this.getPlaceList(),this.getAreaList()},methods:{getPlaceList:function(){var e=this;this.loading=!0,Object(o["d"])(this.queryParams).then((function(t){if(t&&200===t.code){console.log("res.data.list::::>>>>",t.data.list);var a=t.data.list;e.placeList=a,e.total=t.data.total,e.loading=!1}}))},getAreaList:function(){var e=this;this.loading=!0,this.storage.getItem("allArea")&&this.storage.getItem("areaOption")?(this.allArea=this.storage.getItem("allArea"),this.areaOptions=this.storage.getItem("areaOption")):Object(o["c"])().then((function(t){if(t&&200===t.code){var a=t.data;e.allArea=a,e.storage.setItem("allArea",e.allArea);var r=e.handleTree(a,"areaId","pid","children",-1);e.areaOptions=[],e.areaOptions=e.getTree(r),e.storage.setItem("areaOption",e.areaOptions),e.loading=!1}}))},getTree:function(e){var t=this;return e.map((function(e){e.children&&e.children.length?t.getTree(e.children):e.children=null,e.label=e.areaName,e.value=e.areaCode})),e},handleAdd:function(){this.reset(),this.title="添加场地",this.open=!0},handleUpdate:function(e){var t=this;this.reset();var a=e.id;Object(o["e"])(a).then((function(e){console.log("get location res::::>>>>>>",e.data),t.current_info=JSON.parse(JSON.stringify(t.placeList.filter((function(e){return e.id==a}))[0])),console.log("this.current_info:::>>>>",t.current_info);var r=t.current_info.areaMerge.split("/").length;switch(r){case 1:t.current_info.areaMerge=[t.current_info.provinceCode];break;case 2:t.current_info.areaMerge=[t.current_info.provinceCode,t.current_info.cityCode];break;case 3:t.current_info.areaMerge=[t.current_info.provinceCode,t.current_info.cityCode,t.current_info.regionCode];break}if(e.data&&e.data.placeLocationList.length){switch(t.current_info.areaType){case 0:t.current_info.centerLng=e.data.placeLocationList[0].lng,t.current_info.centerLat=e.data.placeLocationList[0].lat;break;case 1:t.current_info.polygon_arr=[],e.data.placeLocationList.forEach((function(e){var a={lng:Number(e.lng),lat:Number(e.lat)};t.current_info.polygon_arr.push(a)}));break;default:break}var n=e.data.placeLocationList.map((function(e){return e.lng})),o=Math.max.apply(Math,Object(i["a"])(n)),l=Math.min.apply(Math,Object(i["a"])(n)),s=e.data.placeLocationList.map((function(e){return e.lat})),c=Math.max.apply(Math,Object(i["a"])(s)),u=Math.min.apply(Math,Object(i["a"])(s));t.current_info.lng=l+"~"+o,t.current_info.lat=u+"~"+c,t.current_info.locationList=e.data.placeLocationList}Object.keys(t.form).forEach((function(e){t.form[e]=t.current_info[e]})),console.log("---",t.form)})),this.title="修改场地",this.open=!0},handleDelete:function(e){var t=this;if(1===e.status)return this.$message.warning("此场地有进行中的项目，暂不可删除！"),!1;var a=e.id;this.$confirm('是否确认删除"'+e.placeName+'"场地?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["b"])(a).then((function(e){if(e&&200===e.code){t.msgSuccess("删除成功");var a=Math.ceil((t.total-1)/t.queryParams.pageSize),r=t.queryParams.pageNo>a?a:t.queryParams.pageNo;t.queryParams.pageNo=r<1?1:r,t.getPlaceList()}}))})).catch((function(){}))},reset:function(){var e=this;this.form={id:void 0,placeName:"",areaMerge:[],areaType:0,remark:"",provinceCode:"",regionCode:"",cityCode:"",lng:"",lat:"",centerLng:0,centerLat:0,areaRadius:0,polygon_arr:[],locationList:[],status:0},this.resetForm("form"),this.showca=!1,this.$nextTick((function(){e.showca=!0}))},cancel:function(){this.reset(),this.open=!1,this.hasHandle=!1},calculateCenter:function(e){var t=e.length,a=0,r=0,n=0;e.forEach((function(e){var t,i,o,l=e.lng*Math.PI/180,s=e.lat*Math.PI/180;t=Math.cos(s)*Math.cos(l),i=Math.cos(s)*Math.sin(l),o=Math.sin(s),a+=t,r+=i,n+=o})),a/=t,r/=t,n/=t;var i=Math.atan2(r,a),o=Math.sqrt(a*a+r*r),l=Math.atan2(n,o);return{lng:180*i/Math.PI,lat:180*l/Math.PI}},showMap:function(){var e=this;if(!this.form.areaMerge.length)return this.$message.warning("请先选择场地位置！"),!1;console.log("this.form.areaMerge :>> ",this.form.areaMerge),this.drawer=!0,this.$nextTick((function(){e.map=new BMap.Map("mymap",{enableMapClick:!1}),e.map.enableScrollWheelZoom();var t={strokeColor:"red",fillColor:"white",strokeWeight:1,strokeOpacity:.8,fillOpacity:.6,strokeStyle:"solid"};e.form.areaRadius?(e.cur_circle=new BMap.Circle({lng:e.form.centerLng,lat:e.form.centerLat},e.form.areaRadius,t),e.map.addOverlay(e.cur_circle),e.map.centerAndZoom(new BMap.Point(e.form.centerLng,e.form.centerLat),15)):e.form.polygon_arr&&e.form.polygon_arr.length?(e.form.polygon_arr.forEach((function(e){e.lng=Number(e.lng),e.lat=Number(e.lat)})),e.cur_polygon=new BMap.Polygon(e.form.polygon_arr,t),e.map.addOverlay(e.cur_polygon),e.map.centerAndZoom(new BMap.Point(e.calculateCenter(e.form.polygon_arr).lng,e.calculateCenter(e.form.polygon_arr).lat),15)):e.map.centerAndZoom(e.getAreaName(e.form.areaMerge),15),e.drawingManager=new BMapLib.DrawingManager(e.map,{isOpen:!1,enableDrawingTool:!0,drawingToolOptions:{anchor:BMAP_ANCHOR_TOP_RIGHT,offset:new BMap.Size(5,5),drawingModes:[BMAP_DRAWING_CIRCLE,BMAP_DRAWING_RECTANGLE]},circleOptions:t,polygonOptions:t,rectangleOptions:t}),e.drawingManager.addEventListener("overlaycomplete",e.overlaycomplete)}))},overlaycomplete:function(e){this.cur_circle&&this.map.removeOverlay(this.cur_circle),this.cur_polygon&&this.map.removeOverlay(this.cur_polygon),this.clearOverlay(),this.overlays.push(e.overlay);var t=e.overlay.getPath();console.log("path......",t),t.forEach((function(e){e.lng=Number(e.lng).toFixed(6),e.lat=Number(e.lat).toFixed(6)})),e.drawingMode===BMAP_DRAWING_CIRCLE?(this.hasHandle=!0,console.log(" 半径："+e.overlay.getRadius()),console.log(" 中心点："+e.overlay.getCenter().lng+e.overlay.getCenter().lat),this.snapSelect.areaType=0,this.snapSelect.centerLng=e.overlay.getCenter().lng.toFixed(6),this.snapSelect.centerLat=e.overlay.getCenter().lat.toFixed(6),this.snapSelect.areaRadius=e.overlay.getRadius()):e.drawingMode===BMAP_DRAWING_RECTANGLE||e.drawingMode===BMAP_DRAWING_POLYGON?(this.hasHandle=!0,this.snapSelect.areaType=1):this.hasHandle=!1,this.snapSelect.polygon_arr=t;var a=this.snapSelect.polygon_arr.map((function(e){return e.lng})),r=Math.max.apply(Math,Object(i["a"])(a)),n=Math.min.apply(Math,Object(i["a"])(a)),o=this.snapSelect.polygon_arr.map((function(e){return e.lat})),l=Math.max.apply(Math,Object(i["a"])(o)),s=Math.min.apply(Math,Object(i["a"])(o));this.snapSelect.lng=n+"~"+r,this.snapSelect.lat=s+"~"+l,this.drawingManager.close()},clearOverlay:function(){for(var e=0;e<this.overlays.length;e++)this.map.removeOverlay(this.overlays[e]);this.overlays.length=0,this.overlays=[],this.snapSelect.areaType=0,this.snapSelect.lng="",this.snapSelect.lat="",this.snapSelect.centerLng=0,this.snapSelect.centerLat=0,this.snapSelect.areaRadius=0,this.snapSelect.polygon_arr=[]},getLngLat:function(){this.hasHandle&&(this.form.areaType=this.snapSelect.areaType,this.form.lng=this.snapSelect.lng,this.form.lat=this.snapSelect.lat,this.form.centerLng=this.snapSelect.centerLng,this.form.centerLat=this.snapSelect.centerLat,this.form.areaRadius=this.snapSelect.areaRadius,this.form.polygon_arr=this.snapSelect.polygon_arr),this.drawer=!1},cancelLngLat:function(){this.clearOverlay(),this.drawer=!1},handleChange:function(e){var t=this;e.length||(this.showca=!1,this.$nextTick((function(){t.showca=!0})))},getAreaName:function(e){var t=this.allArea.filter((function(t){return t.areaCode===e[0]}))[0].areaName,a=this.allArea.filter((function(t){return t.areaCode===e[1]}))[0].areaName;if(e[2]){var r=this.allArea.filter((function(t){return t.areaCode===e[2]}))[0].areaName;return t+"/"+a+"/"+r}return t+"/"+a},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.form.provinceCode=e.form.areaMerge[0],e.form.cityCode=e.form.areaMerge[1],e.form.regionCode=e.form.areaMerge[2],e.form.areaMerge=e.getAreaName(e.form.areaMerge),0===e.form.areaType?e.form.locationList=[{areaId:666,lng:Number(e.form.centerLng),lat:Number(e.form.centerLat),pointNo:1}]:1===e.form.areaType&&(e.form.locationList=[],e.form.polygon_arr.forEach((function(t,a){var r={areaId:666,lng:Number(t.lng),lat:Number(t.lat),pointNo:a+1};e.form.locationList.push(r)}))),e.form.id?Object(o["f"])(e.form).then((function(t){t&&200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getPlaceList())})).catch((function(t){e.msgError(t.data.message)})):Object(o["a"])(e.form).then((function(t){t&&200===t.code&&(e.msgSuccess("添加成功"),e.open=!1,e.getPlaceList())})).catch((function(t){e.msgError(t.data.message)})))}))}}},s=l,c=(a("3b46"),a("2877")),u=Object(c["a"])(s,r,n,!1,null,"196a55c7",null);t["default"]=u.exports},"2d21":function(e,t,a){},"30a9":function(e,t,a){"use strict";a("c1c3")},3135:function(e,t,a){"use strict";a("5bd2")},3528:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"f",(function(){return s})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return u}));var r=a("b775"),n=a("f121");function i(e){return Object(r["a"])({url:n["a"].API+"/role/list",method:"get",params:e})}function o(e){return Object(r["a"])({url:n["a"].API+"/role/"+e,method:"get"})}function l(e){return Object(r["a"])({url:n["a"].API+"/role/create",method:"post",data:e})}function s(e){return Object(r["a"])({url:n["a"].API+"/role/"+e.id,method:"put",data:e})}function c(e,t){return Object(r["a"])({url:n["a"].API+"/role/"+e+"/"+t,method:"put"})}function u(e){return Object(r["a"])({url:n["a"].API+"/role/"+e,method:"delete"})}},"3a7e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icons-container"},[e._m(0),e._v(" "),a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"Icons"}},e._l(e.svgIcons,(function(t){return a("div",{key:t},[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n            "+e._s(e.generateIconCode(t))+"\n          ")]),e._v(" "),a("div",{staticClass:"icon-item"},[a("svg-icon",{attrs:{"icon-class":t,"class-name":"disabled"}}),e._v(" "),a("span",[e._v(e._s(t))])],1)])],1)})),0),e._v(" "),a("el-tab-pane",{attrs:{label:"Element-UI Icons"}},e._l(e.elementIcons,(function(t){return a("div",{key:t},[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n            "+e._s(e.generateElementIconCode(t))+"\n          ")]),e._v(" "),a("div",{staticClass:"icon-item"},[a("i",{class:"el-icon-"+t}),e._v(" "),a("span",[e._v(e._s(t))])])])],1)})),0)],1)],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("aside",[a("a",{attrs:{href:"#",target:"_blank"}},[e._v("Add and use\n    ")])])}],i=a("c7e9"),o=a("bb49"),l={name:"Icons",data:function(){return{svgIcons:i["default"],elementIcons:o["default"]}},methods:{generateIconCode:function(e){return'<svg-icon icon-class="'.concat(e,'" />')},generateElementIconCode:function(e){return'<i class="el-icon-'.concat(e,'" />')}}},s=l,c=(a("4099"),a("2877")),u=Object(c["a"])(s,r,n,!1,null,"101db740",null);t["default"]=u.exports},"3b46":function(e,t,a){"use strict";a("0a1c")},"3bea":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",staticStyle:{"margin-left":"10px","margin-top":"20px"},attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("创建")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e._v(" "),a("el-form",{ref:"queryForm",staticClass:"ml10",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"项目号",prop:"projectCode"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入项目号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.projectCode,callback:function(t){e.$set(e.queryParams,"projectCode",t)},expression:"queryParams.projectCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目名",prop:"projectName"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入项目名",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.projectName,callback:function(t){e.$set(e.queryParams,"projectName",t)},expression:"queryParams.projectName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备号",prop:"deviceCode"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入设备号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.deviceCode,callback:function(t){e.$set(e.queryParams,"deviceCode",t)},expression:"queryParams.deviceCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目状态",prop:"status"}},[a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"请选择",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.projectStatus,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人",prop:"chargeUserId"}},[a("auto-complete",{ref:"autoInput",attrs:{width:"130px"},on:{autoValue:e.autoValue},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}}})],1)],1),e._v(" "),a("div",{staticStyle:{"margin-left":"12px",background:"#dfe6ec",padding:"5px 18px 0 0"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"show-header":!1,data:e.projectList,border:"","cell-class-name":"cell_class"}},[a("el-table-column",{attrs:{label:"项目号","class-name":"row_bg","show-overflow-tooltip":"",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text-right special_td"},[e._v("项目:")]),e._v(" "),a("span",[e._v(e._s(t.row.projectName||"暂无"))]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"text-right special_td"},[e._v("项目号:")]),e._v(" "),a("span",[e._v(e._s(t.row.projectCode||"暂无"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备号","class-name":"borderR_none","show-overflow-tooltip":"",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text-right special_td"},[e._v("VIN:")]),e._v(" "),a("span",[e._v(e._s(t.row.vin||"暂无"))]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"text-right special_td"},[e._v("设备号:")]),e._v(" "),a("span",[e._v(e._s(t.row.deviceCode||"暂无"))]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"text-right special_td"},[e._v("车型:")]),e._v(" "),a("span",[e._v(e._s(t.row.carType||"暂无"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":"",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text-right special_td"},[e._v("场地:")]),e._v(" "),a("span",[e._v(e._s(t.row.placeName||"暂无"))]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"text-right special_td"},[e._v("负责人:")]),e._v(" "),a("span",[e._v(e._s(t.row.chargeUserName||"暂无"))]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"text-right special_td"},[e._v("项目状态:")]),e._v(" "),a("span",{class:{"text-primary":1===t.row.status,"text-warning":2===t.row.status,"text-info":3===t.row.status}},[e._v(e._s(e._f("formatProjectStatus")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"远程",align:"center",prop:"remote",width:"160px","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:3===t.row.status||2===t.row.status?"info":"primary",size:"mini",disabled:3===t.row.status||2===t.row.status},on:{click:function(a){return e.handleRemote(t.row)}}},[a("svg-icon",{attrs:{"class-name":"remote-icon mr5","icon-class":"remote"}}),e._v("设备远程")],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"borderR_none"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:2===t.row.status||3===t.row.status,size:"small",type:"text"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("编辑")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"borderR_none"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?a("el-button",{attrs:{disabled:3===t.row.status,size:"small",type:"text"},on:{click:function(a){return e.handlePause(t.row)}}},[e._v("暂停")]):e._e(),e._v(" "),0===t.row.status||2===t.row.status||3===t.row.status?a("el-button",{attrs:{disabled:3===t.row.status,size:"small",type:"text"},on:{click:function(a){return e.handleBegin(t.row)}}},[e._v("启动")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"borderR_none"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:2===t.row.status||3===t.row.status,size:"small",type:"text"},on:{click:function(a){return e.handleOver(t.row)}}},[e._v("结束")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"borderR_none"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{class:3===t.row.status||2===t.row.status?"":"text-danger",attrs:{disabled:3===t.row.status||2===t.row.status,size:"small",type:"text"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"borderR_none"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.$router.push("/project/list/log/"+t.row.projectId)}}},[e._v("日志")])]}}])})],1)],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],staticClass:"mr20",attrs:{total:e.total,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getProjectList}})],1),e._v(" "),e.createOpen?a("create-dialog",{attrs:{visable:e.createOpen,title:e.title,"current-info":e.current_info},on:{cancel:e.cancel,refresh:e.getProjectList}}):e._e(),e._v(" "),e.pauseOpen?a("pause-dialog",{attrs:{visable:e.pauseOpen,"current-info":e.current_info},on:{cancel:e.cancel,refresh:e.getProjectList}}):e._e(),e._v(" "),e.beginOpen?a("begin-dialog",{attrs:{visable:e.beginOpen,"current-info":e.current_info},on:{cancel:e.cancel,refresh:e.getProjectList}}):e._e()],1)},n=[],i=(a("ac6a"),a("456d"),a("7ca7")),o=a("c0c7"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.visable,"close-on-click-modal":!1,"before-close":e.cancel,"append-to-body":"",width:"1150px"},on:{"update:visible":function(t){e.visable=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:11}},[a("el-col",[a("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入项目名称"},model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}})],1)],1),e._v(" "),e.form.id?a("el-col",[a("el-form-item",{attrs:{label:"项目号",prop:"projectCode"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入项目号",disabled:""},model:{value:e.form.projectCode,callback:function(t){e.$set(e.form,"projectCode",t)},expression:"form.projectCode"}})],1)],1):e._e(),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"车辆VIN",prop:"vin"}},[a("el-input",{staticStyle:{width:"82%"},attrs:{size:"small",placeholder:"请选择车辆VIN",disabled:""},model:{value:e.form.vin,callback:function(t){e.$set(e.form,"vin",t)},expression:"form.vin"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.openRight("car","车辆选择",e.carTotal)}}},[e._v("选择")])],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"设备号",prop:"deviceCode"}},[a("el-input",{staticStyle:{width:"82%"},attrs:{size:"small",placeholder:"请选择设备号",maxlength:"50",disabled:""},model:{value:e.form.deviceCode,callback:function(t){e.$set(e.form,"deviceCode",t)},expression:"form.deviceCode"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.openRight("device","设备选择",e.deviceTotal)}}},[e._v("选择")])],1)],1),e._v(" "),e.form.id?a("el-col",[a("el-form-item",{attrs:{label:"项目状态",prop:"status"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入项目状态",disabled:""},model:{value:e.projectStatus,callback:function(t){e.projectStatus=t},expression:"projectStatus"}})],1)],1):e._e(),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"场地",prop:"placeName"}},[a("el-input",{staticStyle:{width:"82%"},attrs:{size:"small",placeholder:"请选择场地",maxlength:"50",disabled:""},model:{value:e.form.placeName,callback:function(t){e.$set(e.form,"placeName",t)},expression:"form.placeName"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.openRight("place","场地选择",e.placeTotal)}}},[e._v("选择")])],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"负责人",prop:"chargeUserName"}},[a("el-input",{staticStyle:{width:"82%"},attrs:{size:"small",placeholder:"请选择负责人",maxlength:"50",disabled:""},model:{value:e.form.chargeUserName,callback:function(t){e.$set(e.form,"chargeUserName",t)},expression:"form.chargeUserName"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.openRight("user","用户选择",e.userTotal)}}},[e._v("选择")])],1)],1)],1),e._v(" "),e.rightFlag?a("el-col",{attrs:{span:13}},[a("p",{staticClass:"rightTitle"},[e._v(e._s(e.rightTitle))]),e._v(" "),"car"===e.rightFlag&&"device"!==e.rightFlag&&"place"!==e.rightFlag&&"user"!==e.rightFlag?a("el-form",{ref:"queryForm_car",attrs:{model:e.queryParams_car,inline:!0}},[a("el-form-item",{attrs:{label:"车辆VIN",prop:"vin"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入VIN",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams_car.vin,callback:function(t){e.$set(e.queryParams_car,"vin",t)},expression:"queryParams_car.vin"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search",plain:""},on:{click:e.handleQuery}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmSelect}},[e._v("确定")])],1)],1):e._e(),e._v(" "),"device"===e.rightFlag&&"car"!==e.rightFlag&&"place"!==e.rightFlag&&"user"!==e.rightFlag?a("el-form",{ref:"queryParams_device",attrs:{model:e.queryParams_device,inline:!0}},[a("el-form-item",{attrs:{label:"设备号",prop:"deviceCode"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入设备号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams_device.deviceCode,callback:function(t){e.$set(e.queryParams_device,"deviceCode",t)},expression:"queryParams_device.deviceCode"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search",plain:""},on:{click:e.handleQuery}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmSelect}},[e._v("确定")])],1)],1):e._e(),e._v(" "),"place"===e.rightFlag&&"car"!==e.rightFlag&&"device"!==e.rightFlag&&"user"!==e.rightFlag?a("el-form",{ref:"queryParams_place",attrs:{model:e.queryParams_place,inline:!0}},[a("el-form-item",{attrs:{label:"场地名称",prop:"placeName"}},[a("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"请输入场地名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams_place.placeName,callback:function(t){e.$set(e.queryParams_place,"placeName",t)},expression:"queryParams_place.placeName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search",plain:""},on:{click:e.handleQuery}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmSelect}},[e._v("确定")])],1)],1):e._e(),e._v(" "),"user"===e.rightFlag&&"car"!==e.rightFlag&&"device"!==e.rightFlag&&"place"!==e.rightFlag?a("el-form",{ref:"queryParams_user",attrs:{model:e.queryParams_user,inline:!0}},[a("el-form-item",{attrs:{label:"姓名",prop:"userName"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择",filterable:"",clearable:"",size:"small"},model:{value:e.queryParams_user.username,callback:function(t){e.$set(e.queryParams_user,"username",t)},expression:"queryParams_user.username"}},e._l(e.userOptions,(function(e){return a("el-option",{key:e.userName,attrs:{label:e.userName,value:e.userName}})})),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search",plain:""},on:{click:e.handleQuery}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmSelect}},[e._v("确定")])],1)],1):e._e(),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"car"===e.rightFlag&&"device"!==e.rightFlag&&"place"!==e.rightFlag&&"user"!==e.rightFlag,expression:"\n            rightFlag === 'car' &&\n              rightFlag !== 'device' &&\n              rightFlag !== 'place' &&\n              rightFlag !== 'user'\n          "}],attrs:{data:e.carList,height:"264"}},[a("el-table-column",{attrs:{label:"选择",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},nativeOn:{change:function(a){return e.getCurrentRow(t.row)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(" ")])]}}],null,!1,2694489770)}),e._v(" "),a("el-table-column",{attrs:{label:"车辆VIN",align:"center",prop:"vin","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"车辆名称",align:"center",prop:"carName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"车牌号",align:"center",prop:"carNumber","show-overflow-tooltip":""}})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"device"===e.rightFlag&&"car"!==e.rightFlag&&"place"!==e.rightFlag&&"user"!==e.rightFlag,expression:"\n            rightFlag === 'device' &&\n              rightFlag !== 'car' &&\n              rightFlag !== 'place' &&\n              rightFlag !== 'user'\n          "}],attrs:{data:e.deviceList,height:"264"}},[a("el-table-column",{attrs:{label:"选择",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},nativeOn:{change:function(a){return e.getCurrentRow(t.row)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(" ")])]}}],null,!1,2694489770)}),e._v(" "),a("el-table-column",{attrs:{label:"设备号",align:"center",prop:"deviceCode","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.borrowUserId?"(优先)"+t.row.deviceCode:t.row.deviceCode)+"\n            ")]}}],null,!1,3368460267)}),e._v(" "),a("el-table-column",{attrs:{label:"设备状态",align:"center",prop:"status",width:"80","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?a("span",[e._v("空闲")]):1===t.row.status?a("span",[e._v("使用")]):2===t.row.status?a("span",[e._v("待回收")]):e._e()]}}],null,!1,5260028)}),e._v(" "),a("el-table-column",{attrs:{label:"所在部门",align:"center",prop:"organizeName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"负责人",align:"center",prop:"chargeUserName","show-overflow-tooltip":""}})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"place"===e.rightFlag&&"car"!==e.rightFlag&&"device"!==e.rightFlag&&"user"!==e.rightFlag,expression:"\n            rightFlag === 'place' &&\n              rightFlag !== 'car' &&\n              rightFlag !== 'device' &&\n              rightFlag !== 'user'\n          "}],attrs:{data:e.placeList,height:"264"}},[a("el-table-column",{attrs:{label:"选择",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},nativeOn:{change:function(a){return e.getCurrentRow(t.row)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(" ")])]}}],null,!1,2694489770)}),e._v(" "),a("el-table-column",{attrs:{label:"场地名称",align:"center",prop:"placeName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"所在区域",align:"center",prop:"areaMerge","show-overflow-tooltip":""}})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"user"===e.rightFlag&&"car"!==e.rightFlag&&"device"!==e.rightFlag&&"place"!==e.rightFlag,expression:"\n            rightFlag === 'user' &&\n              rightFlag !== 'car' &&\n              rightFlag !== 'device' &&\n              rightFlag !== 'place'\n          "}],attrs:{data:e.userList,height:"264"}},[a("el-table-column",{attrs:{label:"选择",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},nativeOn:{change:function(a){return e.getCurrentRow(t.row)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(" ")])]}}],null,!1,2694489770)}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",align:"center",prop:"userName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"部门",align:"center",prop:"orgName","show-overflow-tooltip":""}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.rightTotal>0,expression:"rightTotal > 0"}],attrs:{total:e.rightTotal,page:e.rightParams.pageNo,limit:e.rightParams.pageSize},on:{"update:page":function(t){return e.$set(e.rightParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.rightParams,"pageSize",t)},pagination:e.freshData}})],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)},s=[],c=a("2447"),u=a("435f"),d=a("1f00"),m={name:"CreateDialog",props:{visable:{default:!1,type:Boolean},title:{default:"",type:String},currentInfo:{default:function(){return{}},type:Object}},data:function(){var e=this;return{carList:null,carTotal:0,deviceList:null,deviceTotal:0,placeList:null,placeTotal:0,userList:null,userTotal:0,userOptions:void 0,radio:"",currentSelect:null,projectStatus:0,statusOptions:Object.keys(this.ENUMS.DEVICE_STATUS).map((function(t){return{value:t,label:e.ENUMS.DEVICE_STATUS[t]}})),form:{projectName:void 0,projectCode:"666",vin:void 0,deviceCode:void 0,status:1,placeName:void 0,chargeUserId:void 0,chargeUserName:void 0,carId:0,deviceId:0,placeId:0},rules:{projectName:[{required:!0,message:"项目名称不能为空",trigger:"blur"},{min:2,max:20,message:"项目名称长度应为2~20个字符",trigger:"blur"}],projectCode:[{required:!0,message:"项目号不能为空",trigger:"blur"}],vin:[{required:!0,message:"车辆VIN不能为空",trigger:"change"}],deviceCode:[{required:!0,message:"设备编码不能为空",trigger:"change"}],placeName:[{required:!0,message:"场地不能为空",trigger:"change"}],chargeUserName:[{required:!0,message:"负责人不能为空",trigger:"change"}]},rightParams:null,queryParams_car:{pageNo:1,pageSize:10,vin:"",status:0},queryParams_device:{pageNo:1,pageSize:10,deviceCode:"",status:0,orderBy:"borrowUserId",order:"desc"},queryParams_place:{pageNo:1,pageSize:10,placeName:"",areaMerge:""},queryParams_user:{pageNo:1,pageSize:10,username:"",orgName:""},rightFlag:"",rightTitle:"",rightTotal:0}},created:function(){var e=this;if(this.reset(),this.getCarList(),this.getDeviceList(),this.getPlaceList(),this.getUserList(),this.getAllUser(),this.currentInfo&&this.currentInfo.id){var t=JSON.parse(JSON.stringify(this.currentInfo));switch(Object.keys(this.form).forEach((function(a){e.form[a]=t[a]})),this.form.status){case 1:this.projectStatus="进行中";break;case 2:this.projectStatus="暂停";break;case 3:this.projectStatus="已结束";break}console.log("this.form :>> ",this.form)}},methods:{getCarList:function(e){var t=this;Object(c["c"])(this.queryParams_car).then((function(a){a&&200===a.code&&(t.carList=a.data.list,t.carTotal=a.data.total,"query"===e&&(t.rightTotal=t.carTotal))}))},getDeviceList:function(e){var t=this;Object(u["c"])(this.queryParams_device).then((function(a){a&&200===a.code&&(t.deviceList=a.data.list,t.deviceTotal=a.data.total,"query"===e&&(t.rightTotal=t.deviceTotal))}))},getPlaceList:function(e){var t=this;Object(d["d"])(this.queryParams_place).then((function(a){a&&200===a.code&&(t.placeList=a.data.list,t.placeTotal=a.data.total,"query"===e&&(t.rightTotal=t.placeTotal))}))},getUserList:function(e){var t=this;Object(o["h"])(this.queryParams_user).then((function(a){a&&200===a.code&&(t.userList=a.data.list,t.userTotal=a.data.total,"query"===e&&(t.rightTotal=t.userTotal))}))},getAllUser:function(){var e=this;Object(o["b"])().then((function(t){t&&200===t.code&&(e.userOptions=t.data)}))},openRight:function(e,t,a){var r=e;switch(r!==this.rightFlag&&(this.radio=""),this.rightFlag=e,this.rightTitle=t,this.rightTotal=a,this.rightFlag){case"car":this.rightParams=this.queryParams_car;break;case"device":this.rightParams=this.queryParams_device;break;case"place":this.rightParams=this.queryParams_place;break;case"user":this.rightParams=this.queryParams_user;break}},freshData:function(e){switch(this.rightFlag){case"car":this.getCarList(e);break;case"device":this.getDeviceList(e);break;case"place":this.getPlaceList(e);break;case"user":this.getUserList(e);break}},handleQuery:function(){this.rightParams.pageNo=1,this.freshData("query"),this.currentSelect=null,this.radio=""},getCurrentRow:function(e){console.log(e,"currentSelect"),this.currentSelect=e},confirmSelect:function(){if(null===this.currentSelect)return this.$message.warning("请选择"),!1;switch(this.rightFlag){case"car":this.form.vin=this.currentSelect.vin,this.form.carId=this.currentSelect.id;break;case"device":if(0!==this.currentSelect.status)return this.$message.warning("请选择空闲状态的设备！"),!1;this.form.deviceCode=this.currentSelect.deviceCode,this.form.deviceId=this.currentSelect.id;break;case"place":this.form.placeName=this.currentSelect.placeName,this.form.placeId=this.currentSelect.id;break;case"user":this.form.chargeUserName=this.currentSelect.userName,this.form.chargeUserId=this.currentSelect.userId;break}this.currentSelect=null,this.radio="",this.rightFlag=""},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(console.log("---",e.form),e.form.id?Object(i["h"])(e.form).then((function(t){t&&200===t.code&&(e.msgSuccess("修改成功"),e.cancel(),e.$emit("refresh"))})).catch((function(t){e.msgError(t.data.message||"修改失败！")})):Object(i["a"])(e.form).then((function(t){t&&200===t.code&&(e.msgSuccess("添加成功"),e.cancel(),e.$emit("refresh"))})).catch((function(t){e.msgError(t.data.message||"添加失败！")})))}))},reset:function(){this.form={id:void 0,projectName:void 0,projectCode:"666",vin:void 0,deviceCode:void 0,status:1,placeName:void 0,chargeUserId:void 0,chargeUserName:void 0,carId:0,deviceId:0,placeId:0},this.resetForm("form")},cancel:function(){this.reset(),this.$emit("cancel")}}},p=m,f=(a("66d1"),a("2877")),h=Object(f["a"])(p,l,s,!1,null,"689b44b6",null),g=h.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.visable,"close-on-click-modal":!1,"before-close":e.cancel,"append-to-body":"",width:"1150px"},on:{"update:visible":function(t){e.visable=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:11}},[a("el-col",[a("el-form-item",{staticClass:"form-btLine",attrs:{label:"暂停原因"}},[a("el-radio-group",{on:{change:e.reasonChange},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-radio",{attrs:{label:1}},[e._v("借出")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("释放设备，延迟进行")])],1)],1)],1),e._v(" "),1===e.form.type?a("el-col",[a("el-form-item",{staticClass:"mt20",attrs:{label:"出借人"}},[a("el-input",{attrs:{size:"small",disabled:""},model:{value:e.form.chargeUserName,callback:function(t){e.$set(e.form,"chargeUserName",t)},expression:"form.chargeUserName"}})],1)],1):e._e(),e._v(" "),1===e.form.type?a("el-col",[a("el-form-item",{staticClass:"form-btLine",attrs:{label:"借用人",prop:"borrowUserName"}},[a("el-input",{staticStyle:{width:"82%"},attrs:{size:"small",placeholder:"请选择借用人",disabled:""},model:{value:e.form.borrowUserName,callback:function(t){e.$set(e.form,"borrowUserName",t)},expression:"form.borrowUserName"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.openRight("user","用户选择",e.userTotal)}}},[e._v("选择")])],1)],1):e._e(),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:1===e.form.type,expression:"form.type === 1"}],staticClass:"mt20"},[a("p",[e._v("注意：操作暂停项目！")]),e._v(" "),a("p",[e._v("\n            -暂停项目后，该项目设置的自定义报警将失效，再次重启需要重新下发配置文件\n          ")]),e._v(" "),a("p",[e._v("\n            -需要给设备标记借出人和借用人，保证设备借出后可以被准确选中和收回，而不被其他人选择使用\n          ")]),e._v(" "),a("p",[e._v("-借用人项目创建时将会优先选择到该设备")]),e._v(" "),a("p",[e._v("-借出人重启项目时可以优先选择该设备")]),e._v(" "),a("p",[e._v("-标记设备没有被选择，将失去优先选择权，被释放给公共选择")])]),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:2===e.form.type,expression:"form.type === 2"}],staticClass:"mt20",staticStyle:{height:"334px"}},[a("p",[e._v("注意：操作暂停项目！")]),e._v(" "),a("p",[e._v("-释放设备后，再次启动项目需要重新选择设备")]),e._v(" "),a("p",[e._v("\n            -暂停项目后，该项目设置的自定义报警将失效，再次重启需要重新下发配置文件\n          ")])])],1),e._v(" "),e.rightFlag&&1===e.form.type?a("el-col",{staticClass:"right-wrap",attrs:{span:13}},[a("p",{staticClass:"rightTitle"},[e._v(e._s(e.rightTitle))]),e._v(" "),"user"===e.rightFlag?a("el-form",{ref:"queryParams_user",attrs:{model:e.queryParams_user,inline:!0}},[a("el-form-item",{attrs:{label:"姓名",prop:"userName"}},[a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"请选择",clearable:"",size:"small"},model:{value:e.queryParams_user.username,callback:function(t){e.$set(e.queryParams_user,"username",t)},expression:"queryParams_user.username"}},e._l(e.userOptions,(function(e){return a("el-option",{key:e.userName,attrs:{label:e.userName,value:e.userName}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"部门",prop:"organizationName"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入部门",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams_user.organizationName,callback:function(t){e.$set(e.queryParams_user,"organizationName",t)},expression:"queryParams_user.organizationName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search",plain:""},on:{click:e.handleQuery}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmSelect}},[e._v("确定")])],1)],1):e._e(),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"user"===e.rightFlag,expression:"rightFlag === 'user'"}],attrs:{data:e.userList,height:"264"}},[a("el-table-column",{attrs:{label:"选择",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},nativeOn:{change:function(a){return e.getCurrentRow(t.row)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(" ")])]}}],null,!1,2694489770)}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",align:"center",prop:"userName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"部门",align:"center",prop:"organizationName","show-overflow-tooltip":""}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.rightTotal>0,expression:"rightTotal > 0"}],attrs:{total:e.rightTotal,page:e.rightParams.pageNo,limit:e.rightParams.pageSize},on:{"update:page":function(t){return e.$set(e.rightParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.rightParams,"pageSize",t)},pagination:e.freshData}})],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)},b=[],y=(a("7f7f"),{name:"PauseDialog",props:{visable:{default:!1,type:Boolean},currentInfo:{default:function(){return{}},type:Object}},data:function(){return{title:"暂停项目",userName:this.$store.getters.name,userList:null,userTotal:0,radio:"",currentSelect:null,userOptions:void 0,form:{id:0,type:1,chargeUserId:0,chargeUserName:"",borrowUserId:0,borrowUserName:""},rules:{borrowUserName:[{required:!0,message:"借用人不能为空",trigger:"change"}]},rightParams:null,queryParams_user:{pageNo:1,pageSize:10,username:"",organizeName:""},rightFlag:"",rightTitle:"",rightTotal:0}},watch:{},created:function(){if(this.reset(),this.getUserList(),this.currentInfo&&this.currentInfo.id){var e=JSON.parse(JSON.stringify(this.currentInfo));this.form.id=e.id,this.form.chargeUserId=e.chargeUserId,this.form.chargeUserName=e.chargeUserName}},methods:{reasonChange:function(e){1===e&&(this.rightFlag="")},getUserList:function(){var e=this;Object(o["h"])(this.queryParams_user).then((function(t){t&&200===t.code&&(e.userList=t.data.list,e.userTotal=t.data.total)})),Object(o["b"])().then((function(t){t&&200===t.code&&(e.userOptions=t.data)}))},openRight:function(e,t,a){switch(this.rightFlag=e,this.rightTitle=t,this.rightTotal=a,this.rightFlag){case"user":this.rightParams=this.queryParams_user;break}},freshData:function(){switch(this.rightFlag){case"user":this.getUserList();break}},handleQuery:function(){this.rightParams.pageNo=1,this.freshData(),this.currentSelect=null,this.radio=""},getCurrentRow:function(e){console.log(e,"this.currentSelect.."),this.currentSelect=e},confirmSelect:function(){var e=this;if(null===this.currentSelect)return this.$message.warning("请选择"),!1;if(this.currentSelect.userId===this.form.chargeUserId)return this.$message.warning("借用人和出借人不能重复！"),this.$nextTick((function(){e.$refs["form"].clearValidate(["borrowUserName"])})),!1;switch(this.rightFlag){case"user":this.form.borrowUserName=this.currentSelect.userName,this.form.borrowUserId=this.currentSelect.userId;break}this.currentSelect=null,this.radio="",this.rightFlag=""},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(1===e.form.type&&!t)return!1;2===e.form.type&&(delete e.form.chargeUserId,delete e.form.chargeUserName,delete e.form.borrowUserId,delete e.form.borrowUserName),Object(i["g"])(e.form).then((function(t){t&&200===t.code&&(e.msgSuccess("暂停成功"),e.cancel(),e.$emit("refresh"))}))}))},reset:function(){this.form={id:0,type:1,chargeUserId:0,chargeUserName:"",borrowUserId:0,borrowUserName:""},this.resetForm("form")},cancel:function(){this.reset(),this.$emit("cancel")}}}),_=y,w=(a("9bd3"),Object(f["a"])(_,v,b,!1,null,"34260098",null)),k=w.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.visable,"close-on-click-modal":!1,"before-close":e.cancel,"append-to-body":"",width:"750px"},on:{"update:visible":function(t){e.visable=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:20,offset:2}},[a("p",[e._v("\n          注意：暂停状态项目设备为空，重启需要重新绑定设备，优先状态为借出或者借入的设备\n        ")]),e._v(" "),a("el-form",{ref:"queryParams",staticClass:"mt20",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"设备号",prop:"deviceCode"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入设备号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.deviceCode,callback:function(t){e.$set(e.queryParams,"deviceCode",t)},expression:"queryParams.deviceCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门",prop:"organizeName"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入部门",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.organizeName,callback:function(t){e.$set(e.queryParams,"organizeName",t)},expression:"queryParams.organizeName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search",plain:""},on:{click:e.handleQuery}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{attrs:{data:e.deviceList,height:"264"}},[a("el-table-column",{attrs:{label:"选择",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},nativeOn:{change:function(a){return e.getCurrentRow(t.row)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(" ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备编码",align:"center",prop:"deviceCode","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.borrowUserId?"(优先)"+t.row.deviceCode:t.row.deviceCode)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备状态",align:"center",prop:"status","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?a("span",[e._v("空闲")]):1===t.row.status?a("span",[e._v("使用")]):2===t.row.status?a("span",[e._v("待回收")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"所在部门",align:"center",prop:"organizeName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"负责人",align:"center",prop:"chargeUserId","show-overflow-tooltip":""}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.deviceTotal>0,expression:"deviceTotal > 0"}],attrs:{total:e.deviceTotal,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getDeviceList}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)},x=[],N={name:"BeginDialog",props:{visable:{default:!1,type:Boolean},currentInfo:{default:function(){return{}},type:Object}},data:function(){return{title:"重启项目",deviceList:null,deviceTotal:0,radio:"",currentSelect:null,form:{deviceCode:""},queryParams:{pageNo:1,pageSize:10,deviceCode:"",organizeName:"",orderBy:"borrowUserId",order:"desc"}}},created:function(){if(this.reset(),this.getDeviceList(),this.currentInfo&&this.currentInfo.id){var e=JSON.parse(JSON.stringify(this.currentInfo));this.form.id=e.id}},methods:{getDeviceList:function(){var e=this;Object(u["c"])(this.queryParams).then((function(t){t&&200===t.code&&(e.deviceList=t.data.list.filter((function(e){return 0===e.status})),e.deviceTotal=t.data.total)}))},handleQuery:function(){this.queryParams.pageNo=1,this.getDeviceList(),this.currentSelect=null,this.radio=""},getCurrentRow:function(e){this.currentSelect=e},submitForm:function(){var e=this;if(null===this.currentSelect)return this.$message.warning("请选择要绑定的设备"),!1;this.form.deviceCode=this.currentSelect.deviceCode,Object(i["b"])(this.form).then((function(t){t&&200===t.code&&(e.msgSuccess("启动成功"),e.currentSelect=null,e.radio="",e.cancel(),e.$emit("refresh"))})).catch((function(t){e.msgError(t.data.message||"启动失败！")}))},reset:function(){this.form={id:void 0,deviceCode:""},this.resetForm("form")},cancel:function(){this.reset(),this.$emit("cancel")}}},O=N,P=(a("f153"),Object(f["a"])(O,C,x,!1,null,"0d640b60",null)),j=P.exports,S=a("5b24"),L={name:"ProjectList",components:{CreateDialog:g,PauseDialog:k,BeginDialog:j,autoComplete:S["a"]},data:function(){var e=this;return{loading:!0,total:0,projectList:null,title:"",createOpen:!1,pauseOpen:!1,beginOpen:!1,current_info:null,userOptions:void 0,projectStatus:Object.keys(this.ENUMS.PROJECT_STATUS).map((function(t){return{value:t,label:e.ENUMS.PROJECT_STATUS[t]}})),queryParams:{pageNo:1,pageSize:10,projectCode:"",projectName:"",deviceCode:"",chargeUserId:"",status:void 0,orderBy:"createTime",order:"desc"}}},watch:{},created:function(){this.getProjectList(),this.getUserList()},methods:{getProjectList:function(){var e=this;this.loading=!0,Object(i["e"])(this.queryParams).then((function(t){if(t&&200===t.code){var a=t.data.list;e.projectList=a,e.total=t.data.total,e.loading=!1}}))},getUserList:function(){var e=this;this.loading=!0,Object(o["b"])().then((function(t){t&&200===t.code&&(e.userOptions=t.data,e.loading=!1)}))},handleQuery:function(){this.queryParams.pageNo=1,this.getProjectList()},autoValue:function(e){this.queryParams.chargeUserId=e.userId},resetQuery:function(){this.$refs.autoInput.handleClear(),this.resetForm("queryForm"),this.handleQuery()},handleAdd:function(){this.title="创建项目",this.createOpen=!0},handleUpdate:function(e){this.current_info=JSON.parse(JSON.stringify(this.projectList.filter((function(t){return t.id==e.id}))[0])),this.title="修改项目",this.createOpen=!0},handlePause:function(e){this.pauseOpen=!0,this.current_info=JSON.parse(JSON.stringify(this.projectList.filter((function(t){return t.id==e.id}))[0]))},handleBegin:function(e){this.beginOpen=!0,this.current_info=JSON.parse(JSON.stringify(this.projectList.filter((function(t){return t.id==e.id}))[0]))},handleOver:function(e){var t=this,a="\n      <p>-项目结束：代表此项目发起的数据收集状态结束，不再更新数据</p>\n      <p>-需要保证设备上传数据有归属项目的才支持下载查询</p>\n      ";this.$confirm(a,"注意：操作结束项目！",{confirmButtonText:"继续",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then((function(){t.$confirm('设备处于在线状态，请确认试验是否完成并离线设备！是否确认结束项目"'+e.projectName+'"?',"警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["f"])(e.id).then((function(e){e&&200===e.code&&(t.msgSuccess("结束成功"),t.getProjectList())}))})).catch((function(){}))})).catch((function(){}))},handleDelete:function(e){var t=this;this.$confirm('是否确认删除项目名为"'+e.projectName+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["c"])(e.id).then((function(e){if(e&&200===e.code){t.msgSuccess("删除成功");var a=Math.ceil((t.total-1)/t.queryParams.pageSize),r=t.queryParams.pageNo>a?a:t.queryParams.pageNo;t.queryParams.pageNo=r<1?1:r,t.getProjectList()}}))})).catch((function(){}))},cancel:function(){this.current_info=null,this.createOpen=!1,this.pauseOpen=!1,this.beginOpen=!1},handleRemote:function(e){this.$router.push({path:"list/remote/".concat(e.projectId)})}}},A=L,I=(a("cadf3"),Object(f["a"])(A,r,n,!1,null,"f0f22600",null));t["default"]=I.exports},"3c33":function(e,t,a){},"3cec":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAcCAYAAAAAwr0iAAADWklEQVRIS8WWT2hcVRTGv+/OvJlJ1RgUJiXaNEJRV2LmWbCiRXBXXAkFcaVoFhLMm6nSgGLS2p02nTftQhxFCirFpRtdCIrooiozA0HoJq021UVCRKw6zbw3cz+Zf6FJp2bipJO7vH/O+Z3vnnvuoesFF0Tchx0YFH5mKh1UCFQAzEOI9IWDqAF4SEC8DrBK4IeCHzvYF+ctJ246+FrAgSaAUCrkYgf+E+CwIu5I8EzoxD6fP8l/eoV108F3Ah7pGmA8HR4x0JxAv+g7mb4CjD2vxF1D4WUCSQirFThjP+W41AvElhRYi148T+pRAX7Rj/WkQtcA92auDCTtcD36+JJZ2p1U8gLF4dBx9s6f5HInFVJeMAHy2WVGn/41y2ud9nQNkPKCDIlTFjxR8p2ZunES+ZvlwgNHdcdtQXWR0BDI1wpZZ+5/AzTvvnqZ0ADKzp5Cnn/isCKpe4KLAHdXo87oRhVS6XCW0LG6UwEry3RGO6nQWYFjSuz/PThUNSBNxEJ4irCTlnyrlHVm25G46eAlAO9LzBZzzpH2/L5XNDgYCRcB/S3wUwPU194VzZeyNRO10I/R2BfI8lpHADcTeBD89ZLx6h/l6OilevTt0awJlwAmr38R415lxpDHBU6z/Nd72HX7LwCG1tuzrxb8xKmOAA9OXr17IJJ4zpjWEcKoWv2+eGbX+Y33OO4FLxrig3Yu1KO/M1JdBBAuMdqQPTUVuDB4gmiUXlgLmNXVc4X84ErXSXjTt/6koqmHwwUKw3UVYgxeJjgr2aPFXOKdzWpE7wAAUl51grR5AWcBHCJo2tH3BaD1IhYIjjWy3mq6eDr+9mbO6+vbokDLUONFAFhBeWVvIT9S7itAQ4WR8BNRn5X8+LlunN+gAIBi0Y891u3h7djnesG3Iva3GhL9BnFOBLfD+GY2KAhERsCedkcU3+zQrVgXUGkAQLgoaMYg0i5Bt8Lfmk0LWEN7XMC+JsBO5ECnlsydCh+X0YeUot1KIJKUPi7k4m+ufVZeMCUiQ0kb7Eg0E0Xf+apjHRj3woMGOgtuoT2XjBU+Kp2Ov952lkoHkwSmmz/ydUOoWcsXSmecb9YB7PwVAAukeaP+WXUrfS/7DGpW4gkB99NNB1VgC5L34vnGs7V/AZZ3FVCsYQkYAAAAAElFTkSuQmCC"},"3d8b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.menuList,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"organizationName",label:"部门名称",align:"center",width:"150","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"部门设备数",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"部门用户数",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"描述",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleAdd(t.row)}}},[e._v("新增")]),e._v(" "),a("el-button",{class:e._f("buttonFilter")(t.row.children),attrs:{size:"mini",type:"text",disabled:!(Array.isArray(t.row.children)&&t.row.children.length>0)},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"90px"}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"上级部门"}},[a("treeselect",{attrs:{options:e.menuOptions,normalizer:e.normalizer,"show-count":!0,placeholder:"选择上级部门"},model:{value:e.form.pid,callback:function(t){e.$set(e.form,"pid",t)},expression:"form.pid"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"部门名称",prop:"organizationName"}},[a("el-input",{attrs:{placeholder:"请输入部门名称"},model:{value:e.form.organizationName,callback:function(t){e.$set(e.form,"organizationName",t)},expression:"form.organizationName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"30","show-word-limit":"",placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},n=[],i=(a("ac6a"),a("456d"),a("7e6c")),o=a("ca17"),l=a.n(o),s=(a("542c"),a("5aee")),c={name:"Org",components:{Treeselect:l.a,IconSelect:s["a"]},data:function(){var e=this;return{loading:!0,menuList:[],menuOptions:[],title:"",open:!1,statusOptions:Object.keys(this.ENUMS.STATUS).map((function(t){return{value:parseInt(t),label:e.ENUMS.STATUS[t]}})),queryParams:{title:void 0,visible:void 0},form:{},rules:{organizationName:[{required:!0,message:"部门名称不能为空",trigger:"blur"},{min:2,max:15,message:"部门长度应为2~15个字符",trigger:"blur"}],sort:[{required:!0,message:"组织顺序不能为空",trigger:"blur"}],url:[{required:!0,message:"路由地址不能为空",trigger:"blur"}]}}},created:function(){this.getTreeselect()},filters:{buttonFilter:function(e){return Array.isArray(e)&&e.length>0?"text-disabled":"text-danger"}},methods:{selected:function(e){this.form.icon=e},normalizer:function(e){return e.children&&!e.children.length&&delete e.children,{id:e.id,label:e.organizationName,children:e.children}},getTreeselect:function(){var e=this;this.loading=!0,Object(i["c"])().then((function(t){e.menuOptions=[];var a={id:0,organizationName:"主类目",children:[]};a.children=t.data,e.menuList=t.data,e.menuOptions.push(a),e.loading=!1}))},statusFormat:function(e,t){return this.ENUMS.STATUS[e.status]},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:void 0,pid:0,organizationName:void 0,contactName:void 0,contactTel:void 0,remark:"",status:0,type:0},this.resetForm("form")},handleQuery:function(){this.getTreeselect()},handleAdd:function(e){this.reset(),null!=e&&e.id?this.form.pid=e.id:this.form.pid=0,this.open=!0,this.title="添加部门"},handleUpdate:function(e){this.reset(),this.form=JSON.parse(JSON.stringify(this.findTreeById(this.menuList,e.id))),this.open=!0,this.title="修改部门"},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!=e.form.id?Object(i["e"])(e.form).then((function(t){e.msgSuccess("修改成功"),e.open=!1,e.getTreeselect()})):Object(i["a"])(e.form).then((function(t){e.msgSuccess("新增成功"),e.open=!1,e.getTreeselect()})))}))},handleDelete:function(e){var t=this;this.$confirm('是否确认删除部门名称为"'+e.organizationName+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(i["b"])(e.id)})).then((function(){t.msgSuccess("删除成功"),t.getTreeselect()})).catch((function(){}))}}},u=c,d=a("2877"),m=Object(d["a"])(u,r,n,!1,null,null,null);t["default"]=m.exports},4099:function(e,t,a){"use strict";a("a8a2")},"41b27":function(e,t,a){"use strict";a("9c89")},"42e8":function(e,t,a){},"435f":function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"h",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"g",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return m}));var r=a("b775"),n=(a("24bf"),a("f121"));function i(e){return Object(r["a"])({url:n["a"].API_MONIT+"/device",method:"get",params:e})}function o(e){return Object(r["a"])({url:n["a"].API_MONIT+"/device",method:"post",data:e})}function l(e){return Object(r["a"])({url:n["a"].API_MONIT+"/device/".concat(e.id),method:"put",data:e})}function s(e){return Object(r["a"])({url:n["a"].API_MONIT+"/device/".concat(e),method:"delete"})}function c(){return Object(r["a"])({url:n["a"].API_MONIT+"/device/recover-num",method:"get"})}function u(e){return Object(r["a"])({url:n["a"].API_MONIT+"/device/decide-recover/".concat(e),method:"get"})}function d(e){return Object(r["a"])({url:n["a"].API_MONIT+"/logs",method:"get",params:e})}function m(e){return Object(r["a"])({url:n["a"].API_MONIT+"/device/status/"+e,method:"get"})}},4571:function(e,t){e.exports="data:image/png;base64,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"},4779:function(e,t,a){},"4b3b":function(e,t,a){var r={"./":"1e4b","./base/car":"92c5","./base/car/":"92c5","./base/car/index":"92c5","./base/car/index.vue":"92c5","./base/device":"5b12","./base/device/":"5b12","./base/device/index":"5b12","./base/device/index.vue":"5b12","./base/device/log":"93c8","./base/device/log.vue":"93c8","./base/place":"2cfe","./base/place/":"2cfe","./base/place/index":"2cfe","./base/place/index.vue":"2cfe","./cockpit":"1aae","./cockpit/":"1aae","./cockpit/behavior":"9fe5","./cockpit/behavior.vue":"9fe5","./cockpit/can":"4f0f","./cockpit/can.vue":"4f0f","./cockpit/event":"280a","./cockpit/event.vue":"280a","./cockpit/index":"1aae","./cockpit/index.vue":"1aae","./cockpit/monitor":"4c32","./cockpit/monitor.vue":"4c32","./cockpit/video":"855a","./cockpit/video.vue":"855a","./components/icons":"3a7e","./components/icons/":"3a7e","./components/icons/element-icons":"bb49","./components/icons/element-icons.js":"bb49","./components/icons/index":"3a7e","./components/icons/index.vue":"3a7e","./components/icons/svg-icons":"c7e9","./components/icons/svg-icons.js":"c7e9","./data/data_download":"88a0","./data/data_download/":"88a0","./data/data_download/index":"88a0","./data/data_download/index.vue":"88a0","./data/up_overview":"0743","./data/up_overview/":"0743","./data/up_overview/index":"0743","./data/up_overview/index.vue":"0743","./error/401":"ec55","./error/401.vue":"ec55","./error/404":"2754","./error/404.vue":"2754","./file/dbc":"9668","./file/dbc/":"9668","./file/dbc/index":"9668","./file/dbc/index.vue":"9668","./index":"1e4b","./index.vue":"1e4b","./login":"dd7b","./login.vue":"dd7b","./project/alaRecord":"8a40","./project/alaRecord/":"8a40","./project/alaRecord/index":"8a40","./project/alaRecord/index.vue":"8a40","./project/alaSetting":"141a","./project/alaSetting/":"141a","./project/alaSetting/index":"141a","./project/alaSetting/index.vue":"141a","./project/alaSetting/rules":"2bb7","./project/alaSetting/rules.vue":"2bb7","./project/alaSetting/setting":"2019","./project/alaSetting/setting.vue":"2019","./project/list":"3bea","./project/list/":"3bea","./project/list/index":"3bea","./project/list/index.vue":"3bea","./project/list/log":"e5f7","./project/list/log.vue":"e5f7","./project/list/remote":"9fde","./project/list/remote.vue":"9fde","./redirect":"9b8f","./redirect.vue":"9b8f","./remote/diagnose":"0786","./remote/diagnose.vue":"0786","./remote/lists":"72fb","./remote/lists/":"72fb","./remote/lists/index":"72fb","./remote/lists/index.vue":"72fb","./remote/refresh":"24b4","./remote/refresh.vue":"24b4","./system/archive":"9e04","./system/archive/":"9e04","./system/archive/index":"9e04","./system/archive/index.vue":"9e04","./system/menu":"f794","./system/menu/":"f794","./system/menu/index":"f794","./system/menu/index.vue":"f794","./system/org":"3d8b","./system/org/":"3d8b","./system/org/index":"3d8b","./system/org/index.vue":"3d8b","./system/role":"70eb","./system/role/":"70eb","./system/role/index":"70eb","./system/role/index.vue":"70eb","./system/user":"1f34","./system/user/":"1f34","./system/user/index":"1f34","./system/user/index.vue":"1f34","./system/user/profile":"4c1b","./system/user/profile/":"4c1b","./system/user/profile/index":"4c1b","./system/user/profile/index.vue":"4c1b","./system/user/profile/resetPwd":"ee46","./system/user/profile/resetPwd.vue":"ee46","./system/user/profile/userAvatar":"9429","./system/user/profile/userAvatar.vue":"9429","./system/user/profile/userInfo":"1e8b","./system/user/profile/userInfo.vue":"1e8b"};function n(e){var t=i(e);return a(t)}function i(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}n.keys=function(){return Object.keys(r)},n.resolve=i,e.exports=n,n.id="4b3b"},"4c1b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{staticClass:"clearfix"},[a("el-button",{attrs:{type:"primary",size:"mini",plain:"personInfo"!==e.activeTab},on:{click:function(t){return e.handleChange("personInfo")}}},[e._v("个人资料")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:"resetPass"!==e.activeTab},on:{click:function(t){return e.handleChange("resetPass")}}},[e._v("重置密码")]),e._v(" "),a("router-link",{staticClass:"pull-right mt10 mr20 go-back",attrs:{to:"/home"}},[a("el-link",{attrs:{type:"primary"}},[e._v("返回")])],1)],1)],1),e._v(" "),"personInfo"===e.activeTab?a("div",[a("userInfo",{attrs:{user:e.user}})],1):e._e(),e._v(" "),"resetPass"===e.activeTab?a("div",[a("resetPwd",{attrs:{user:e.user}})],1):e._e()],1)],1)},n=[],i=a("1e8b"),o=a("ee46"),l=a("c0c7"),s={name:"Profile",components:{userInfo:i["default"],resetPwd:o["default"]},data:function(){return{user:{},roleGroup:{},postGroup:{},activeTab:"personInfo"}},created:function(){this.getUser()},methods:{getUser:function(){var e=this;Object(l["f"])().then((function(t){e.user=t.data}))},handleChange:function(e){this.activeTab=e}}},c=s,u=a("2877"),d=Object(u["a"])(c,r,n,!1,null,null,null);t["default"]=d.exports},"4c32":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"monitorData_wrap"},[a("el-row",{staticClass:"header"},[a("el-col",{staticClass:"text-monitor title_item",attrs:{span:8,offset:8,align:"center"}},[e._v("监测数据")]),e._v(" "),a("el-col",{attrs:{span:8,align:"center"}},[a("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:e.openChannel}},[e._v("选择CAN信号信道")])],1)],1),e._v(" "),a("el-row",{staticClass:"content_wrap"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.channelVisable,expression:"channelVisable"}],staticClass:"channel_dialog"},[a("div",{staticClass:"text-monitor clearfix mb15"},[a("span",{staticClass:"pull-left"},[e._v("选择CAN通道")]),e._v(" "),a("a",{staticClass:"el-icon-close pull-right",on:{click:e.cancel}})]),e._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{staticClass:"left_border",attrs:{span:7}},[a("el-row",{staticClass:"titles",attrs:{gutter:0,type:"flex",justify:"center",align:"middle"}},[a("el-col",{staticStyle:{color:"#3cdb2c"},attrs:{span:20}},[e._v("CAN通道")])],1),e._v(" "),e.channelCanList&&e.channelCanList.length?a("el-checkbox-group",{staticClass:"radio_wrap mt15",on:{change:e.handleCanNoChange},model:{value:e.currentCanList,callback:function(t){e.currentCanList=t},expression:"currentCanList"}},e._l(e.channelCanList,(function(e,t){return a("el-checkbox",{key:t,staticClass:"radio_item mb20 ml20",attrs:{label:e.label,value:e.id}})})),1):e._e(),e._v(" "),e.channelCanList&&e.channelCanList.length?e._e():a("div",{staticClass:"flex-center",staticStyle:{height:"28vh"}},[e._v("\n            暂无数据\n          ")])],1),e._v(" "),a("el-col",{staticClass:"right_border",attrs:{span:17}},[a("el-row",{staticClass:"titles",attrs:{gutter:0,type:"flex",justify:"center",align:"middle"}},[a("el-col",{staticStyle:{color:"#ffd672"},attrs:{span:6}},[e._v("参数")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-input",{staticStyle:{width:"110%"},attrs:{size:"mini",clearable:""},on:{clear:e.handleClear},model:{value:e.searchQuotas,callback:function(t){e.searchQuotas=t},expression:"searchQuotas"}},[a("el-button",{staticStyle:{padding:"10px"},attrs:{slot:"append",type:"primary",size:"mini"},on:{click:e.handleSearchQuotas},slot:"append"},[e._v("搜索")])],1)],1)],1),e._v(" "),e.quotasList&&e.quotasList.length?a("el-checkbox-group",{staticClass:"radio_wrap mt15",on:{change:e.handleQuotasChange},model:{value:e.currentQuotasList,callback:function(t){e.currentQuotasList=t},expression:"currentQuotasList"}},e._l(e.quotasList,(function(t,r){return a("el-checkbox",{key:r,staticClass:"radio_item mb20 ml20",attrs:{label:t,value:t.signalName,checked:t.checked}},[e._v("\n              "+e._s(t.signalName)+"\n            ")])})),1):e._e(),e._v(" "),e.quotasList&&e.quotasList.length?e._e():a("div",{staticClass:"flex-center",staticStyle:{height:"28vh"}},[e._v("\n            暂无数据\n          ")])],1)],1),e._v(" "),a("div",{staticClass:"footer mt15"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitQuotas}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("取消")])],1)],1),e._v(" "),e.chartVisable?a("div",{staticClass:"enlarge_wrap",on:{click:e.openAllCanCharts}},[a("svg-icon",{attrs:{"class-name":"text-monitor","icon-class":"enlarge"}})],1):e._e(),e._v(" "),e.chartVisable?a("echarts-comp",{attrs:{width:"105%",height:e.height,"chart-data":e.option}}):e._e()],1),e._v(" "),e.allcanOpen?a("allcan-charts",{attrs:{visable:e.allcanOpen,"quotasd-data":e.canList},on:{cancel:e.closeAllcan}}):e._e()],1)},n=[],i=(a("8e6e"),a("456d"),a("ade3")),o=(a("6762"),a("2fdb"),a("20d6"),a("55dd"),a("ac6a"),a("0fa7")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.visable,"close-on-click-modal":!1,"before-close":e.cancel,"append-to-body":"",width:"99%"},on:{"update:visible":function(t){e.visable=t}}},[a("div",{staticClass:"clearfix",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"dialog-title"},[e._v("监测数据")]),e._v(" "),a("span",{staticClass:"pull-right"},[a("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:e.cancel}},[e._v("选择CAN信号信道")])],1)]),e._v(" "),a("div",{staticClass:"content_wrap"},[a("div",{staticClass:"mb20"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleCheckAllChange(!0)}}},[e._v("全选")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleCheckAllChange(!1)}}},[e._v("取消全选")])],1),e._v(" "),a("div",{staticClass:"checkbox_wrap"},[a("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.checkedCan,callback:function(t){e.checkedCan=t},expression:"checkedCan"}},e._l(e.canDatas,(function(t,r){return a("el-checkbox",{key:r,attrs:{label:t.signalName,checked:!0}},[a("span",{staticClass:"typeColor"},[e._v(e._s(t.signalName.split("-")[0]+"-"))]),e._v(e._s(t.signalName.split("-")[1])+"\n        ")])})),1)],1),e._v(" "),a("div",{staticClass:"bottomLine mt20"}),e._v(" "),a("div",{staticClass:"charts_wrap"},[a("el-row",e._l(e.canDatas,(function(t,r){return a("el-col",{directives:[{name:"show",rawName:"v-show",value:t.checked,expression:"item.checked"}],key:r,staticStyle:{"margin-bottom":"-10px"},attrs:{span:8}},[t.checked?a("echarts-comp",{attrs:{height:"34vh","chart-data":t}}):e._e()],1)})),1)],1)])])},s=[],c=(a("7f7f"),a("313e")),u=a.n(c),d=a("8975"),m={name:"AllcanCharts",components:{echartsComp:o["a"]},props:{visable:{default:!1,type:Boolean},quotasdData:{type:Array,default:function(){return[]}}},data:function(){return{title:"监测数据",channelData:[],checkedCan:[],canDatas:[],timer:null,channelOption:{legend:{x:"10%",y:"5%",data:void 0,textStyle:{color:"#51eafc",fontSize:"14"}},tooltip:{trigger:"axis",axisPointer:{type:"none"},formatter:function(e){}},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",splitLine:!1,splitArea:{show:!1}},series:[{name:void 0,data:[],type:"line",itemStyle:{color:"rgba(77,186,205,1)"},areaStyle:{color:new u.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(77,186,205,.4)"},{offset:1,color:"rgb(255, 255, 255,.05)"}])}}]}}},computed:{allChartPages:function(){var e=[];return this.canDatas.forEach((function(t,a){var r=Math.floor(a/6);e[r]||(e[r]=[]),e[r].push(t)})),e}},watch:{quotasdData:{handler:function(e,t){this.canDatas.forEach((function(t){e.forEach((function(e){e.signalName===t.signalName&&(t.series[0].data.length>=10&&(t.series[0].data.shift(),t.xAxis.data.shift()),t.series[0].data.push(e.value),t.xAxis.data.push(Object(d["formatDate"])(new Date(e.collectTime),"hh:mm:ss")))}))}))}}},created:function(){if(this.reset(),this.currentInfo&&this.currentInfo.id){var e=JSON.parse(JSON.stringify(this.currentInfo));this.form.id=e.id}},mounted:function(){var e=this;this.channelData=JSON.parse(JSON.stringify(this.quotasdData)),this.channelData.forEach((function(t){t.checked=!0,Object.assign(t,e.channelOption)})),this.canDatas=JSON.parse(JSON.stringify(this.channelData)),this.canDatas.forEach((function(e){e.legend.data=[e.signalName],e.series[0].name=e.signalName})),this.canDatas.sort((function(e,t){return e["signalName"]>t["signalName"]?1:-1})),console.log("canDatas....",this.canDatas),this.canDatas.forEach((function(e){e.series[0].data.length>=10&&(e.series[0].data.shift(),e.xAxis.data.shift()),e.series[0].data.push(e.value),e.xAxis.data.push(Object(d["formatDate"])(new Date(e.collectTime),"hh:mm:ss"))}))},beforeDestroy:function(){this.timer&&clearInterval(this.timer)},methods:{handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},handleCheckAllChange:function(e){var t=this;this.checkedCan=e?this.canDatas.map((function(e){return e.signalName})):[],this.canDatas.forEach((function(e){t.checkedCan.includes(e.series[0].name)?e.checked=!0:e.checked=!1}))},handleCheckedChange:function(e){var t=this;this.checkedCan=e,this.canDatas.forEach((function(e){t.checkedCan.includes(e.series[0].name)?e.checked=!0:e.checked=!1}))},submitForm:function(){this.$refs["form"].validate((function(e){}))},reset:function(){},cancel:function(){this.reset(),this.$emit("cancel")},random:function(e,t){return Math.floor(Math.random()*(t-e))+e}}},p=m,f=(a("a39f"),a("2877")),h=Object(f["a"])(p,l,s,!1,null,"75ba8d4f",null),g=h.exports,v=a("f76f");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _={name:"MonitorData",components:{echartsComp:o["a"],allcanCharts:g},props:{channelCanList:{type:Array,default:function(){return[]}},canList:{type:Array,default:function(){return[]}},option:{type:Object,default:function(){}},projectInfo:{type:Object,default:function(){}}},data:function(){return{height:"390px",channelVisable:!0,chartVisable:!1,currentCanList:[],currentQuotasList:[],currentQuotasListCopy:[],saveQuotasList:[],searchQuotas:"",quotasList:[],quotasListCopy:[],queryParams_channel:{fileName:""},allcanOpen:!1}},watch:{channelCanList:{handler:function(e,t){e!==t&&(this.quotasList=[],this.currentCanList=[],this.currentQuotasList=[],this.currentQuotasListCopy=[],this.saveQuotasList=[])}}},methods:{openChannel:function(){this.channelVisable=!0,this.chartVisable=!1},queryCanQuotas:function(e){var t=this,a={dbcFileId:e.id};Object(v["c"])(a).then((function(a){a&&200===a.code&&(a.data.forEach((function(t){t.signalResps.forEach((function(a){a.msgId=t.id,a.msgCanId=t.msgCanId,a.signalName=e.label+"-"+a.signalName,a.channelNo=e.channelNo,a.channelId=e.id}))})),a.data.map((function(e){t.quotasList=t.quotasList.concat(e.signalResps)})),t.quotasList=t.quotasList.sort((function(e,t){return e["signalName"]>t["signalName"]?1:-1})),t.quotasList=t.quotasList.filter((function(e,a){return t.quotasList.findIndex((function(t){return t.signalName==e.signalName}))==a})),t.quotasListCopy=JSON.parse(JSON.stringify(t.quotasList)),t.quotasList.forEach((function(e){t.currentQuotasListCopy.forEach((function(t){e.signalName===t.signalName&&(e.checked=!0)}))})))}))},handleCanNoChange:function(e){var t=this;console.log("val :>> ",e),this.quotasList=[];var a=[];this.channelCanList.forEach((function(t){e.includes(t.label)&&a.push(t)})),a.length||(this.quotasList=[],this.currentQuotasList=[]),this.currentQuotasListCopy=JSON.parse(JSON.stringify(this.currentQuotasList)),this.currentQuotasList=[],this.quotasList.filter((function(e){return a.map((function(t){return e.signalName.includes(t.label)}))})),a.map((function(e){t.queryCanQuotas(e)}))},handleQuotasChange:function(e){},handleSearchQuotas:function(){var e=this;this.quotasList=this.quotasListCopy.filter((function(t){return t.signalName.includes(e.searchQuotas)}))},handleClear:function(){this.quotasList=this.quotasListCopy},submitQuotas:function(){var e=this;if(!this.currentQuotasList.length)return this.$message.warning("请至少选择一种参数 !"),!1;var t=this.currentQuotasList.filter((function(e){return 0===e.channelNo})),a=this.currentQuotasList.filter((function(e){return 1===e.channelNo})),r=this.currentQuotasList.filter((function(e){return 2===e.channelNo})),n=this.currentQuotasList.filter((function(e){return 3===e.channelNo})),i=this.currentQuotasList.filter((function(e){return 4===e.channelNo})),o=this.currentQuotasList.filter((function(e){return 5===e.channelNo})),l=this.currentQuotasList.filter((function(e){return 6===e.channelNo})),s=this.currentQuotasList.filter((function(e){return 7===e.channelNo})),c=y(y({},this.projectInfo),{},{dbcFiles:[]});if(t.length){var u={channelNo:t[0].channelNo,id:t[0].channelId,dbcMsgParams:this.getDbcMsgParams(t)};c.dbcFiles.push(u)}if(a.length){var d={channelNo:a[0].channelNo,id:a[0].channelId,dbcMsgParams:this.getDbcMsgParams(a)};c.dbcFiles.push(d)}if(r.length){var m={channelNo:r[0].channelNo,id:r[0].channelId,dbcMsgParams:this.getDbcMsgParams(r)};c.dbcFiles.push(m)}if(n.length){var p={channelNo:n[0].channelNo,id:n[0].channelId,dbcMsgParams:this.getDbcMsgParams(n)};c.dbcFiles.push(p)}if(i.length){var f={channelNo:i[0].channelNo,id:i[0].channelId,dbcMsgParams:this.getDbcMsgParams(i)};c.dbcFiles.push(f)}if(o.length){var h={channelNo:o[0].channelNo,id:o[0].channelId,dbcMsgParams:this.getDbcMsgParams(o)};c.dbcFiles.push(h)}if(l.length){var g={channelNo:l[0].channelNo,id:l[0].channelId,dbcMsgParams:this.getDbcMsgParams(l)};c.dbcFiles.push(g)}if(s.length){var b={channelNo:s[0].channelNo,id:s[0].channelId,dbcMsgParams:this.getDbcMsgParams(s)};c.dbcFiles.push(b)}Object(v["d"])(c).then((function(t){console.log("sendFileCanQuotas res",t),t&&200===t.code&&(e.saveQuotasList=e.currentQuotasList,e.channelVisable=!1,e.chartVisable=!0,e.$emit("setOptions",e.saveQuotasList),e.$emit("triggerLoading",!0))})).catch((function(t){e.$message.error(t.data.message)}))},getDbcMsgParams:function(e){for(var t={},a=[],r=0;r<e.length;r++){var n=e[r];if(t[n.msgId])for(var i=0;i<a.length;i++){var o=a[i];if(o.id==n.msgId){o.signalIds.push(n),o.signalIds=o.signalIds.map((function(e){return e.id?e.id:e}));break}}else a.push({id:n.msgId,msgCanId:n.msgCanId,signalIds:[n].map((function(e){return e.id}))}),t[n.msgId]=n}return a},cancel:function(){this.channelVisable=!1,this.chartVisable=!0},openAllCanCharts:function(){this.allcanOpen=!0},closeAllcan:function(){this.allcanOpen=!1,this.chartVisable=!1,this.channelVisable=!0}}},w=_,k=(a("fecb"),Object(f["a"])(w,r,n,!1,null,"42cbc780",null));t["default"]=k.exports},"4d9e":function(e,t,a){},"4f0f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"can_wrap"},[a("el-row",{staticClass:"header"},[a("el-col",{staticClass:"text-monitor title_item",attrs:{span:24,align:"center"}},[e._v("CAN数据")])],1),e._v(" "),a("el-row",{staticClass:"content_wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.canData,"show-header":!1,"element-loading-text":"参数已下发，等待终端响应中......",height:"388"}},[a("el-table-column",{attrs:{prop:"signalName",label:"类型",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"value",label:"数据",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.explain?t.row.explain:t.row.value)+"\n        ")]}}])})],1)],1)],1)},n=[],i={name:"CanData",components:{},props:{canData:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,timer:null}},methods:{showLoading:function(){var e=this;this.loading=!0,this.timer=setTimeout((function(){e.loading=!1}),5e3)}}},o=i,l=(a("6a3f"),a("2877")),s=Object(l["a"])(o,r,n,!1,null,"b7403776",null);t["default"]=s.exports},"4f75":function(e,t,a){},"514f":function(e,t,a){},5284:function(e,t,a){"use strict";a("4f75")},5321:function(e,t,a){},"53d5":function(e,t,a){"use strict";a("28f1")},"5a0c":function(e,t,a){},"5aee":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icon-body"},[a("el-input",{staticStyle:{position:"relative"},attrs:{clearable:"",placeholder:"请输入图标名称"},on:{clear:e.filterIcons},nativeOn:{input:function(t){return e.filterIcons(t)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),e._v(" "),a("div",{staticClass:"icon-list"},e._l(e.iconList,(function(t,r){return a("div",{key:r,on:{click:function(a){return e.selectedIcon(t)}}},[a("svg-icon",{staticStyle:{height:"30px",width:"16px"},attrs:{"icon-class":t}}),e._v(" "),a("span",[e._v(e._s(t))])],1)})),0)],1)},n=[],i=(a("6762"),a("2fdb"),a("7f7f"),a("4917"),a("ac6a"),a("23f1")),o=function(e){return e.keys()},l=/\.\/(.*)\.svg/,s=o(i).map((function(e){return e.match(l)[1]})),c=s,u={name:"IconSelect",data:function(){return{name:"",iconList:c}},methods:{filterIcons:function(){var e=this;this.iconList=c,this.name&&(this.iconList=this.iconList.filter((function(t){return t.includes(e.name)})))},selectedIcon:function(e){this.$emit("selected",e),document.body.click()},reset:function(){this.name="",this.iconList=c}}},d=u,m=(a("bce5"),a("2877")),p=Object(m["a"])(d,r,n,!1,null,"0273f142",null);t["a"]=p.exports},"5b12":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:!e.recyleNum},on:{click:function(t){return e.getDeviceList("recyle")}}},[e._v("待我回收("+e._s(e.recyleNum)+")")])],1)],1),e._v(" "),a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"设备编码",prop:"deviceCode"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入设备编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.deviceCode,callback:function(t){e.$set(e.queryParams,"deviceCode",t)},expression:"queryParams.deviceCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人",prop:"chargeUserId"}},[a("auto-complete",{ref:"autoInput",attrs:{width:"200px"},on:{autoValue:e.autoValue},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择设备状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.deviceList}},[a("el-table-column",{attrs:{label:"序号",align:"center",prop:"id",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"设备编码",align:"center",prop:"deviceCode","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"设备状态",align:"center",prop:"status","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?a("span",[e._v("空闲")]):1===t.row.status?a("span",[e._v("使用")]):2===t.row.status?a("span",[e._v("待回收")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"OnlineStatus",align:"center",prop:"status","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.onlineStatus?"在线":"离线")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"所在部门",align:"center",prop:"organizeName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"负责人",align:"center",prop:"chargeUserName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"添加人",align:"center",prop:"createUserName",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"添加时间",align:"center",prop:"createTime","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"ml5",attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{class:0===t.row.status?"text-danger":"text-disabled",attrs:{size:"small",type:"text",disabled:0!==t.row.status},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{class:2===t.row.status&&t.row.borrowUserId===e.userId?"text-warning":"text-disabled",attrs:{size:"small",type:"text",disabled:2!==t.row.status||2===t.row.status&&t.row.borrowUserId!==e.userId},on:{click:function(a){return e.handleRecycle(t.row)}}},[e._v("确认回收")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.$router.push("/base/device/log/"+t.row.id)}}},[e._v("日志")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getDeviceList}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"设备编码",prop:"deviceCode"}},[a("el-input",{attrs:{placeholder:"请输入设备编码",disabled:!!e.form.id},model:{value:e.form.deviceCode,callback:function(t){e.$set(e.form,"deviceCode",t)},expression:"form.deviceCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"设备名称",prop:"deviceName"}},[a("el-input",{attrs:{placeholder:"请输入设备名称"},model:{value:e.form.deviceName,callback:function(t){e.$set(e.form,"deviceName",t)},expression:"form.deviceName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"所在部门",prop:"organizeId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.form.organizeId,callback:function(t){e.$set(e.form,"organizeId",t)},expression:"form.organizeId"}},e._l(e.deptOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.organizationName,value:e.id}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"负责人",prop:"chargeUserId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:""},model:{value:e.form.chargeUserId,callback:function(t){e.$set(e.form,"chargeUserId",t)},expression:"form.chargeUserId"}},e._l(e.userOptions,(function(e){return a("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userId}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入备注",maxlength:"30"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},n=[],i=(a("ac6a"),a("456d"),a("435f")),o=a("7e6c"),l=a("c0c7"),s=a("5b24"),c={name:"Device",components:{autoComplete:s["a"]},data:function(){var e=this;return{userId:0,loading:!0,total:0,deviceList:null,allArea:null,title:"",open:!1,recyleNum:0,form:{deviceCode:void 0,organizeId:void 0,chargeUserId:void 0,deviceName:void 0,organizeName:void 0,status:0,remark:""},deptOptions:void 0,userOptions:void 0,statusOptions:Object.keys(this.ENUMS.DEVICE_STATUS).map((function(t){return{value:t,label:e.ENUMS.DEVICE_STATUS[t]}})),queryParams:{pageNo:1,pageSize:10,deviceCode:"",chargeUserId:"",status:void 0,orderBy:"createTime",order:"desc"},rules:{deviceCode:[{required:!0,message:"设备编码不能为空",trigger:"blur"},{min:8,max:50,message:"设备编码长度应为8~50个字符",trigger:"blur"}],deviceName:[{required:!0,message:"设备名称不能为空",trigger:"blur"},{max:15,message:"设备名称长度最多15个字符",trigger:"blur"}],organizeId:[{required:!0,message:"请选择所在部门",trigger:"blur"}],chargeUserId:[{required:!0,message:"请选择负责人",trigger:"blur"}]}}},watch:{},created:function(){this.getDeviceList(),this.getOrgList(),this.getUserList(),this.userId=this.$store.getters.userId},methods:{getDeviceList:function(e){var t=this;this.loading=!0;var a=this.queryParams;e&&"recyle"===e&&(a={pageNo:1,pageSize:10,status:2,orderBy:"updateTime",order:"desc"}),Object(i["c"])(a).then((function(a){a&&200===a.code&&(t.deviceList=a.data.list,e&&"recyle"===e&&(t.deviceList=a.data.list.filter((function(e){return e.borrowUserId===t.userId}))),t.total=a.data.total,t.loading=!1)})),Object(i["g"])().then((function(e){e&&200===e.code&&(t.recyleNum=e.data)}))},getOrgList:function(){var e=this;Object(o["d"])().then((function(t){t&&200===t.code&&(e.deptOptions=t.data)}))},getUserList:function(){var e=this;this.loading=!0,Object(l["b"])().then((function(t){t&&200===t.code&&(e.userOptions=t.data,e.loading=!1)}))},handleQuery:function(){this.queryParams.pageNo=1,this.getDeviceList()},autoValue:function(e){this.queryParams.chargeUserId=e.userId},resetQuery:function(){this.$refs.autoInput.handleClear(),this.resetForm("queryForm"),this.handleQuery()},handleAdd:function(){this.reset(),this.title="添加设备",this.open=!0},handleUpdate:function(e){var t=this;this.reset();var a=e.id,r=JSON.parse(JSON.stringify(this.deviceList.filter((function(e){return e.id==a}))[0]));Object.keys(this.form).forEach((function(e){t.form[e]=r[e]})),this.title="修改设备",this.open=!0},reset:function(){this.form={id:void 0,deviceCode:void 0,organizeId:void 0,chargeUserId:void 0,deviceName:void 0,organizeName:void 0,status:0,remark:""},this.resetForm("form")},cancel:function(){this.reset(),this.open=!1},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.form.organizeName=e.deptOptions.filter((function(t){return t.id===e.form.organizeId}))[0].organizationName,console.log("---",e.form),e.form.id?Object(i["h"])(e.form).then((function(t){t&&200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getDeviceList())})).catch((function(t){e.msgError(t.data.message)})):Object(i["a"])(e.form).then((function(t){t&&200===t.code&&(e.msgSuccess("添加成功"),e.open=!1,e.getDeviceList())})).catch((function(t){e.msgError(t.data.message)})))}))},handleDelete:function(e){var t=this;if(0!==e.status)return this.$message.warning("非空闲状态的设备不可删除！"),!1;this.$confirm('是否确认删除设备编码为"'+e.deviceCode+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["b"])(e.id).then((function(e){if(e&&200===e.code){t.msgSuccess("删除成功");var a=Math.ceil((t.total-1)/t.queryParams.pageSize),r=t.queryParams.pageNo>a?a:t.queryParams.pageNo;t.queryParams.pageNo=r<1?1:r,t.getDeviceList()}})).catch((function(e){t.msgError(e.data.message||"删除失败！")}))})).catch((function(){}))},handleRecycle:function(e){var t=this;if(2!==e.status)return this.$message.warning("非待回收状态的设备不可回收！"),!1;this.$confirm('是否确认回收设备编码为"'+e.deviceCode+'"的设备?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["f"])(e.deviceCode).then((function(e){e&&200===e.code&&(t.msgSuccess("回收成功"),t.getDeviceList())})).catch((function(e){t.msgError(e.data.message||"回收失败！")}))})).catch((function(){}))}}},u=c,d=a("2877"),m=Object(d["a"])(u,r,n,!1,null,null,null);t["default"]=m.exports},"5b24":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-autocomplete",{style:{width:e.width},attrs:{"value-key":"userName","popper-append-to-body":!1,"fetch-suggestions":e.querySearchAsync,"popper-class":e.state&&e.restaurants.length?"inputOption":"",size:e.size,debounce:0,clearable:"",placeholder:"请输入内容"},on:{blur:e.handleBlur,select:e.handleSelect,clear:e.handleClear},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})},n=[],i=a("c0c7"),o={name:"AutoComplete",props:{size:{default:"small",type:String},width:{default:"100%",type:String}},data:function(){return{restaurants:[],state:"",timeout:null}},methods:{querySearchAsync:function(e,t){var a=this;if(e){var r={keyword:e,active:!0};Object(i["m"])(r).then((function(r){if(r&&r.data&&200===r.code){a.restaurants=r.data;var n=a.restaurants,i=e?n.filter(a.createStateFilter(e)):n;clearTimeout(a.timeout),a.timeout=setTimeout((function(){t(i)}),0)}}))}else this.handleClear()},createStateFilter:function(e){return function(t){return 0===t.userName.toLowerCase().indexOf(e.toLowerCase())}},handleBlur:function(){var e=this;setTimeout((function(){if(e.state){var t=e.restaurants.filter((function(t){return t.userName===e.state}));t.length||(e.$message.warning("服务器中无此用户"),e.handleClear())}}),500)},handleSelect:function(e){this.$emit("autoValue",e)},handleClear:function(){this.state="",this.$emit("autoValue",this.state)}}},l=o,s=(a("3135"),a("2877")),c=Object(s["a"])(l,r,n,!1,null,"359a943f",null);t["a"]=c.exports},"5b60":function(e,t,a){},"5bb1":function(e,t){e.exports="data:image/png;base64,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"},"5bd2":function(e,t,a){},"5fff":function(e,t,a){"use strict";a("5b60")},"61b6":function(e,t,a){"use strict";a("bf69")},6272:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o}));var r=a("b775"),n=a("f121");function i(e){return Object(r["a"])({url:n["a"].API_FILE+"/alarmRecord/recordList",method:"post",data:e})}function o(e){return Object(r["a"])({url:n["a"].API_FILE+"/alarmRecord/alarmFileDownload",method:"get",params:e,responseType:"blob"})}},"66d1":function(e,t,a){"use strict";a("c728")},"6a3f":function(e,t,a){"use strict";a("fba3")},"70eb":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.roleList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"序号",prop:"id",width:"80",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"角色名称",prop:"name",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"授权人数",prop:"id",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"remark",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"text-danger",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"800px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"使用状态",prop:"status"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:6,maxlength:"30","show-word-limit":"",placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{"max-height":"300px","overflow-y":"auto"},attrs:{span:12}},[a("el-form-item",{attrs:{label:"菜单权限"}},[e.showTree?a("el-tree",{ref:"menu",attrs:{data:e.menuOptions,"default-expand-all":"","show-checkbox":"","node-key":"id","empty-text":"加载中，请稍后",props:e.defaultProps}}):e._e()],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},n=[],i=(a("7f7f"),a("ac6a"),a("456d"),a("3528")),o=a("a6dc"),l={name:"Role",data:function(){var e=this;return{loading:!0,ids:[],single:!0,multiple:!0,total:0,roleList:[],title:"",open:!1,showTree:!0,dateRange:[],statusOptions:Object.keys(this.ENUMS.STATUS).map((function(t){return{dictValue:parseInt(t),dictLabel:e.ENUMS.STATUS[t]}})),menuOptions:[],deptOptions:[],queryParams:{pageNo:1,pageSize:10,name:void 0,value:void 0,status:void 0},form:{},defaultProps:{children:"children",label:"name"},rules:{name:[{required:!0,message:"角色名称不能为空",trigger:"blur"},{min:2,max:15,message:"角色名称应为2~15个字符",trigger:"blur"}],status:[{required:!0,message:"使用状态不能为空",trigger:"blur"}],value:[{required:!0,message:"权限字符不能为空",trigger:"blur"}],sort:[{required:!0,message:"角色顺序不能为空",trigger:"blur"}]}}},created:function(){this.getList(),this.getMenuTreeselect(),console.log("statusOptions",this.statusOptions)},methods:{getList:function(){var e=this;this.loading=!0,Object(i["e"])(this.addDateRange(this.queryParams,this.dateRange)).then((function(t){var a=t.data.list;e.roleList=a,e.total=t.data.total,e.loading=!1}))},getMenuTreeselect:function(){var e=this;Object(o["d"])().then((function(t){e.menuOptions=e.handleTreeReplaceKey(t.data),console.log("this.menuOptions",e.menuOptions)}))},getMenuAllCheckedKeys:function(){var e=this.$refs.menu.getHalfCheckedKeys(),t=this.$refs.menu.getCheckedKeys();return e.unshift.apply(e,t),e},getRoleMenuTreeselect:function(e){return Object(o["c"])(e).then((function(e){return e}))},handleStatusChange:function(e){var t=this,a=e.status?"启用":"停用";this.$confirm('确认要"'+a+'""'+e.name+'"角色吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(i["b"])(e.id,e.status)})).then((function(){t.msgSuccess(a+"成功")})).catch((function(){e.status=e.status?0:1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){var e=this;void 0!=this.$refs.menu&&this.$refs.menu.setCheckedKeys([]),this.form={id:void 0,name:void 0,value:void 0,sort:0,status:1,menuIds:[],deptIds:[],remark:void 0},this.showTree=!1,this.$nextTick((function(){e.showTree=!0})),this.resetForm("form")},handleQuery:function(){this.queryParams.pageNo=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!=e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加角色"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids,r=this.getRoleMenuTreeselect(a);Object(i["d"])(a).then((function(e){t.form=e.data,t.open=!0,t.$nextTick((function(){r.then((function(e){var a=e.data.map((function(e){return e.id}));a.forEach((function(e,a){var r=t.$refs.menu.getNode(e);r.isLeaf&&t.$refs.menu.setChecked(r,!0)}))}))})),t.title="修改角色"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){if(0==e.getMenuAllCheckedKeys().length)return e.msgError("请选择菜单");e.form.permissionIds=e.getMenuAllCheckedKeys().join(","),void 0!=e.form.id?Object(i["f"])(e.form).then((function(t){e.msgSuccess("修改成功"),e.open=!1,e.getList()})):Object(i["a"])(e.form).then((function(t){e.msgSuccess("新增成功"),e.open=!1,e.getList()}))}}))},handleDelete:function(e){var t=this,a=(e.id?[e.id]:"")||this.ids;this.$confirm('是否确认删除角色编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["c"])(a).then((function(e){if(e&&200===e.code){t.msgSuccess("删除成功");var a=Math.ceil((t.total-1)/t.queryParams.pageSize),r=t.queryParams.pageNo>a?a:t.queryParams.pageNo;t.queryParams.pageNo=r<1?1:r,t.getList()}})).catch((function(e){t.msgError(e.data.message||"删除失败！")}))})).catch((function(){}))}}},s=l,c=(a("b698"),a("2877")),u=Object(c["a"])(s,r,n,!1,null,"a85711b8",null);t["default"]=u.exports},"72fb":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("el-row",{attrs:{gutter:24}},[r("el-row",{staticClass:"headerBtnLine",staticStyle:{"margin-left":"10px","margin-top":"20px"},attrs:{gutter:24}},[r("el-col",{attrs:{span:12}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e._v(" "),r("el-form",{ref:"queryForm",staticClass:"ml10",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"设备号",prop:"deviceCode"}},[r("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入设备号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.deviceCode,callback:function(t){e.$set(e.queryParams,"deviceCode",t)},expression:"queryParams.deviceCode"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[r("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入项目名",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.projectName,callback:function(t){e.$set(e.queryParams,"projectName",t)},expression:"queryParams.projectName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"项目号",prop:"projectCode"}},[r("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入项目号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.projectCode,callback:function(t){e.$set(e.queryParams,"projectCode",t)},expression:"queryParams.projectCode"}})],1)],1),e._v(" "),r("div",{staticStyle:{"margin-left":"12px",background:"#dfe6ec",padding:"5px 18px 0 0"}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"","show-header":!1,data:e.projectList,"cell-class-name":"cell_class"}},[r("el-table-column",{attrs:{label:"rowLog",align:"center","class-name":"row_bg borderR_none",width:"32"}}),e._v(" "),r("el-table-column",{attrs:{label:"设备图片",align:"center","class-name":"borderR_none",width:"60"}},[[r("img",{attrs:{src:a("5bb1"),width:"50",height:"45",alt:"设备图片"}})]],2),e._v(" "),r("el-table-column",{attrs:{label:"设备号","show-overflow-tooltip":"","class-name":"",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticClass:"text-right special_td"},[e._v("设备号:")]),e._v(" "),r("span",[e._v(e._s(t.row.deviceCode||"暂无"))]),e._v(" "),r("br"),e._v(" "),r("span",{staticClass:"text-right special_td"},[e._v("状态:")]),e._v(" "),r("span",{class:{"text-primary":1===t.row.status,"text-warning":2===t.row.status,"text-info":3===t.row.status}},[e._v(e._s(e._f("formatProjectStatus")(t.row.status)))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"项目名称","show-overflow-tooltip":"","class-name":"borderR_none",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticClass:"text-right special_td"},[e._v("项目名称:")]),e._v(" "),r("span",[e._v(e._s(t.row.projectName||"暂无"))]),e._v(" "),r("br"),e._v(" "),r("span",{staticClass:"text-right special_td"},[e._v("项目号:")]),e._v(" "),r("span",[e._v(e._s(t.row.projectCode||"暂无"))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"负责人","show-overflow-tooltip":"",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticClass:"text-right special_td"},[e._v("负责人:")]),e._v(" "),r("span",[e._v(e._s(t.row.createNickName||"暂无"))]),e._v(" "),r("br"),e._v(" "),r("span",{staticClass:"text-right special_td"},[e._v("场地:")]),e._v(" "),r("span",[e._v(e._s(t.row.placeName||"暂无"))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleDelivery(t.row)}}},[e._v("下发配置文件")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.$router.push("/remote/refresh/"+t.row.projectCode+"/"+t.row.deviceCode)}}},[e._v("远程刷写")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.$router.push("/remote/diagnose/"+t.row.projectCode+"/"+t.row.deviceCode)}}},[e._v("远程诊断")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleRestart(t.row)}}},[e._v("远程重启")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleRemoteMonitor(t.row)}}},[e._v("远程监控")])]}}])})],1)],1),e._v(" "),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],staticClass:"mr20",attrs:{total:e.total,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getProjectList}})],1),e._v(" "),e.deliveryOpen?r("delivery-config",{attrs:{visable:e.deliveryOpen,currentInfo:e.current_info},on:{cancel:e.cancel,refresh:e.getProjectList}}):e._e()],1)},n=[],i=(a("ac6a"),a("456d"),a("7ca7")),o=a("8889"),l=a("c0c7"),s=a("dfcf"),c=a("03ea"),u=a("befe"),d={name:"RemoteList",components:{DeliveryConfig:s["a"],RemoteRefresh:c["a"],RemoteDiagnose:u["a"]},data:function(){var e=this;return{loading:!0,total:0,projectList:null,title:"",deliveryOpen:!1,refreshOpen:!1,diagnoseOpen:!1,current_info:null,userOptions:void 0,projectStatus:Object.keys(this.ENUMS.PROJECT_STATUS).map((function(t){return{value:t,label:e.ENUMS.PROJECT_STATUS[t]}})),queryParams:{pageNo:1,pageSize:10,projectCode:"",projectName:"",deviceCode:"",chargeUserId:"",status:void 0}}},watch:{},created:function(){this.getProjectList(),this.getUserList()},methods:{getProjectList:function(){var e=this;this.loading=!0,Object(i["e"])(this.queryParams).then((function(t){if(t&&200===t.code){var a=t.data.list;e.projectList=a,e.total=t.data.total,e.loading=!1}}))},getUserList:function(){var e=this;this.loading=!0,Object(l["b"])().then((function(t){t&&200===t.code&&(e.userOptions=t.data,e.loading=!1)}))},handleQuery:function(){this.queryParams.pageNo=1,this.getProjectList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleAdd:function(){this.title="创建项目",this.createOpen=!0},handleUpdate:function(e){this.current_info=JSON.parse(JSON.stringify(this.projectList.filter((function(t){return t.id==e.id}))[0])),this.title="修改项目",this.createOpen=!0},handleRemoteMonitor:function(e){this.$router.push({path:"/cockpit",name:"cockpit",query:{projectId:e.projectId}})},handleRemoteRefresh:function(e){this.refreshOpen=!0,this.current_info=JSON.parse(JSON.stringify(this.projectList.filter((function(t){return t.id==e.id}))[0]))},handleRemoteDiagnose:function(){this.diagnoseOpen=!0},handleRestart:function(e){var t=this;this.$confirm("是否确认远程重启?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={projectCode:e.projectList,deviceCode:e.deviceCode};Object(o["d"])(a).then((function(e){console.log("res",e),e&&200===e.code?t.$message.success(e.data):t.$message.error("操作失败！")}))})).catch((function(){}))},handleFormat:function(){this.$confirm("格式化后设备本地存储数据将被清除，请慎重操作！","注意：确认格式化SD卡？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).catch((function(){}))},handleDelivery:function(e){this.deliveryOpen=!0,this.current_info=JSON.parse(JSON.stringify(this.projectList.filter((function(t){return t.id==e.id}))[0]))},cancel:function(){this.current_info=null,this.refreshOpen=!1,this.diagnoseOpen=!1,this.deliveryOpen=!1,this.getProjectList()}}},m=d,p=(a("f59c"),a("2877")),f=Object(p["a"])(m,r,n,!1,null,"5e251882",null);t["default"]=f.exports},"788e":function(e,t,a){},"7c87":function(e,t,a){},"7ca7":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"h",(function(){return s})),a.d(t,"g",(function(){return c})),a.d(t,"b",(function(){return u})),a.d(t,"f",(function(){return d})),a.d(t,"c",(function(){return m}));var r=a("b775"),n=(a("24bf"),a("f121"));function i(){return Object(r["a"])({url:n["a"].API_MONIT+"/project/all",method:"get"})}function o(e){return Object(r["a"])({url:n["a"].API_MONIT+"/project",method:"get",params:e})}function l(e){return Object(r["a"])({url:n["a"].API_MONIT+"/project",method:"post",data:e})}function s(e){return Object(r["a"])({url:n["a"].API_MONIT+"/project/".concat(e.id),method:"put",data:e})}function c(e){return Object(r["a"])({url:n["a"].API_MONIT+"/project/stop/".concat(e.id),method:"put",data:e})}function u(e){return Object(r["a"])({url:n["a"].API_MONIT+"/project/begin/".concat(e.id),method:"put",data:e})}function d(e){return Object(r["a"])({url:n["a"].API_MONIT+"/project/over/".concat(e),method:"put"})}function m(e){return Object(r["a"])({url:n["a"].API_MONIT+"/project/".concat(e),method:"delete"})}},"7d4e":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{ref:"upload",staticStyle:{display:"inline"},attrs:{action:"1","file-list":e.fileList,"show-file-list":e.showFileList,"on-change":e.handleChange,"before-upload":e.beforeUpload,"http-request":e.handleUpload,"on-remove":e.handleRemove}},[a("el-button",{attrs:{slot:"trigger",type:"primary",size:e.btSize,plain:e.btPlain},slot:"trigger"},[e._v(e._s(e.btContent))])],1)},n=[],i=(a("28a5"),a("7f7f"),a("c5f6"),{name:"Upload",props:{fileType:{default:"",type:String},limitSize:{default:0,type:Number},showFileList:{default:!1,type:Boolean},btPlain:{default:!1,type:Boolean},btSize:{default:"small",type:String},btContent:{default:"选择文件",type:String},iptLabel:{default:"",type:String}},data:function(){return{file:null,fileList:[]}},created:function(){},methods:{handleChange:function(e,t){t.length>1&&(this.fileList=[t[t.length-1]])},beforeUpload:function(e){console.log("beforeUpload :>> ",e);var t=/[`()|（）]/;if(t.test(e.name))return this.$message.error("文件名中不能有括号，请修改后重新上传！"),!1;var a=e.name.split(".").splice(-1)[0].toUpperCase()===this.fileType.toUpperCase(),r=e.size/1024/1024<this.limitSize;return"any"===this.fileType&&(a=!0),a||this.$message.error("上传文件必须是".concat(this.fileType.toUpperCase(),"格式 !")),r||this.$message.error("上传文件大小不能超过".concat(this.limitSize,"MB !")),a&&r},handleUpload:function(e){this.file=e.file,this.$emit("getFile",this.file,this.iptLabel)},handleRemove:function(e,t){this.file=null,this.$emit("getFile",this.file,"")}}}),o=i,l=(a("1d70"),a("2877")),s=Object(l["a"])(o,r,n,!1,null,"c49edf50",null);t["a"]=s.exports},"7e6c":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"b",(function(){return c}));var r=a("b775"),n=a("f121");function i(){return Object(r["a"])({url:n["a"].API+"/organization/all",method:"get"})}function o(){return Object(r["a"])({url:n["a"].API+"/organization/tree-list",method:"get"})}function l(e){return Object(r["a"])({url:n["a"].API+"/organization",method:"post",data:e})}function s(e){return Object(r["a"])({url:n["a"].API+"/organization/"+e.id,method:"put",data:e})}function c(e){return Object(r["a"])({url:n["a"].API+"/organization/"+e,method:"delete"})}},"7fe2":function(e,t,a){"use strict";a("b637")},"84ed":function(e,t,a){},"851b":function(e,t,a){},"855a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"video_wrap mt20"},[e._m(0),e._v(" "),a("div",{staticClass:"video_content"},[a("video",{attrs:{id:"video",src:e.videoUrl,controls:"controls",autoplay:"",height:"100%",width:"100%"}})])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-monitor text-center mb15"},[a("span",[e._v("报警视频")])])}],i={name:"AlarmVideo",components:{},props:{videoUrl:{type:String,default:""}},data:function(){return{}},methods:{}},o=i,l=(a("30a9"),a("2877")),s=Object(l["a"])(o,r,n,!1,null,"37a2a9f6",null);t["default"]=s.exports},8889:function(e,t,a){"use strict";a.d(t,"g",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"f",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"d",(function(){return d}));var r=a("b775"),n=(a("24bf"),a("f121"));function i(e){return Object(r["a"])({url:n["a"].API_FILE+"/file/upload/single",method:"post",data:e})}function o(e){return Object(r["a"])({url:n["a"].API_FILE+"/file-manage",method:"get",params:e})}function l(e){return Object(r["a"])({url:n["a"].API_FILE+"/device-config",method:"get",params:e})}function s(e){return Object(r["a"])({url:n["a"].API_MONIT+"/send-device",method:"post",data:e})}function c(e){return Object(r["a"])({url:n["a"].API_MONIT+"/send-device/again",method:"post",data:e})}function u(e){return Object(r["a"])({url:n["a"].API_FILE+"/device-file-upload/lastSendConfig",method:"get",params:e})}function d(e){return Object(r["a"])({url:n["a"].API_FILE+"/device-control/restart",method:"post",data:e})}},"88a0":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("生成新数据\n        ")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索\n        ")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置\n        ")])],1)],1),e._v(" "),a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"项目号",prop:"projectCode"}},[a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入项目号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.projectCode,callback:function(t){e.$set(e.queryParams,"projectCode",t)},expression:"queryParams.projectCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备编码",prop:"deviceCode"}},[a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入设备编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.deviceCode,callback:function(t){e.$set(e.queryParams,"deviceCode",t)},expression:"queryParams.deviceCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"下载进度",prop:"status"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.downloadStatus,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"生成时间",prop:"createTime"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss",size:"small"},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.fileList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"项目号",align:"center",prop:"projectCode","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"设备编号",align:"center",prop:"deviceCode","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"文件名称",align:"center",prop:"ftpFileName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"文件大小",align:"center",prop:"ftpFileSize","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.ftpFileSize?t.row.ftpFileSize+"kb":"未知")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"文件类型",align:"center",prop:"resourceType",formatter:e.formatterType,"show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"下载进度",align:"center",prop:"status","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?[e._v("下发失败\n            ")]:1===t.row.status?[e._v("已记录\n          ")]:2===t.row.status?[e._v("上传中\n          ")]:3===t.row.status?[e._v("下发成功\n          ")]:4===t.row.status?[e._v("上传完成\n          ")]:5===t.row.status?[e._v("上传失败\n          ")]:e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"生成时间",align:"center",prop:"createTime","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"100","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleDownload(t.row)}}},[e._v("下载\n          ")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getFileList}})],1),e._v(" "),e.createOpen?a("create-data",{attrs:{visable:e.createOpen},on:{cancel:e.cancel,refresh:e.getFileList}}):e._e()],1)},n=[],i=(a("ac6a"),a("456d"),a("c0c7")),o=a("b117"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.visable,"close-on-click-modal":!1,"before-close":e.cancel,"append-to-body":"",width:"1150px"},on:{"update:visible":function(t){e.visable=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:11}},[a("el-col",[a("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[a("el-input",{staticStyle:{width:"82%"},attrs:{size:"small",placeholder:"请选择项目名称",disabled:""},model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.openRight("project","项目选择",e.total)}}},[e._v("选择")])],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"项目号",prop:"projectCode"}},[a("el-input",{attrs:{size:"small",placeholder:"请选择项目号",disabled:""},model:{value:e.form.projectCode,callback:function(t){e.$set(e.form,"projectCode",t)},expression:"form.projectCode"}})],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"生成文件类型",prop:"resourceType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:""},model:{value:e.form.resourceType,callback:function(t){e.$set(e.form,"resourceType",t)},expression:"form.resourceType"}},e._l(e.resourceTypeOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),"240"!==e.form.resourceType?a("el-col",[a("el-form-item",{attrs:{label:"数据产生时间:",prop:"createTime"}},[a("el-date-picker",{staticClass:"full-width",attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss",size:"small","picker-options":e.pickerOptions},model:{value:e.form.createTime,callback:function(t){e.$set(e.form,"createTime",t)},expression:"form.createTime"}})],1)],1):e._e()],1),e._v(" "),e.rightFlag?a("el-col",{attrs:{span:13}},[a("p",{staticClass:"rightTitle"},[e._v(e._s(e.rightTitle))]),e._v(" "),"project"===e.rightFlag?a("el-form",{ref:"queryForm_project",attrs:{model:e.queryParams_project,inline:!0}},[a("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入项目名",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams_project.projectName,callback:function(t){e.$set(e.queryParams_project,"projectName",t)},expression:"queryParams_project.projectName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人",prop:"chargeUserId"}},[a("auto-complete",{ref:"autoInput",attrs:{width:"130px"},on:{autoValue:e.autoValue},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search",plain:""},on:{click:e.handleQuery}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmSelect}},[e._v("确定")])],1)],1):e._e(),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"project"===e.rightFlag,expression:"rightFlag === 'project'"}],attrs:{data:e.projectList,height:"264"}},[a("el-table-column",{attrs:{label:"选择",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},nativeOn:{change:function(a){return e.getCurrentRow(t.row)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(" ")])]}}],null,!1,2694489770)}),e._v(" "),a("el-table-column",{attrs:{label:"项目号",align:"center",prop:"projectCode","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",align:"center",prop:"projectName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"车辆VIN",align:"center",prop:"vin","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"设备号",align:"center",prop:"deviceCode","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"场地",align:"center",prop:"placeName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"负责人",align:"center",prop:"chargeUserName","show-overflow-tooltip":""}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.rightTotal>0,expression:"rightTotal > 0"}],attrs:{total:e.rightTotal,page:e.rightParams.pageNo,limit:e.rightParams.pageSize},on:{"update:page":function(t){return e.$set(e.rightParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.rightParams,"pageSize",t)},pagination:e.freshData}})],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)},s=[],c=a("ade3"),u=(a("c5f6"),a("7ca7")),d=a("5b24"),m={name:"CreateData",components:{autoComplete:d["a"]},props:{visable:{default:!1,type:Boolean}},data:function(){var e=this;return{title:"生成新数据",projectList:null,projectTotal:0,radio:"",currentSelect:null,resourceTypeOption:Object.keys(this.ENUMS.RESOURCE_FILE_TYPE).map((function(t){return{value:t,label:e.ENUMS.RESOURCE_FILE_TYPE[t]}})),pickerOptions:{selectableRange:function(){var e=new Date,t=e.getHours(),a=e.getMinutes(),r=e.getSeconds();return["".concat(t,":").concat(a,":").concat(r," - 23:59:59")]}(),disabledDate:function(e){var t=new Date;return e.getTime()>t.getTime()}},form:{projectName:void 0,projectCode:void 0,deviceCode:void 0,beginDate:void 0,endDate:void 0,resourceType:void 0,alertType:void 0,createTime:void 0},rules:{projectName:[{required:!0,message:"项目名称不能为空",trigger:["blur","change"]}],projectCode:[{required:!0,message:"项目号不能为空",trigger:["blur","change"]}],resourceType:[{required:!0,message:"生成文件类型不能为空",trigger:"change"}],createTime:[{required:!0,message:"数据产生时间不能为空",trigger:"change"}]},rightParams:null,queryParams_project:{pageNo:1,pageSize:10,projectName:"",chargeUserId:""},rightFlag:"",rightTitle:"",rightTotal:0}},created:function(){this.reset(),this.getProjectList()},methods:{getProjectList:function(e){var t=this;Object(u["e"])(this.queryParams_project).then((function(a){a&&200===a.code&&(t.projectList=a.data.list,t.total=a.data.total,"query"===e&&(t.rightTotal=t.total))}))},openRight:function(e,t,a){var r=e;switch(r!==this.rightFlag&&(this.radio=""),this.rightFlag=e,this.rightTitle=t,this.rightTotal=a,this.rightFlag){case"project":this.rightParams=this.queryParams_project;break}},freshData:function(e){switch(this.rightFlag){case"project":this.getProjectList(e);break}},handleQuery:function(){this.rightParams.pageNo=1,this.freshData("query"),this.currentSelect=null,this.radio=""},autoValue:function(e){this.queryParams_project.chargeUserId=e.userId},getCurrentRow:function(e){console.log(e,"currentSelect"),this.currentSelect=e},confirmSelect:function(){if(null===this.currentSelect)return this.$message.warning("请选择"),!1;switch(this.rightFlag){case"project":this.form.projectName=this.currentSelect.projectName,this.form.projectCode=this.currentSelect.projectCode,this.form.deviceCode=this.currentSelect.deviceCode;break}this.currentSelect=null,this.radio="",this.rightFlag=""},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a=JSON.parse(JSON.stringify(e.form));a.createTime&&(a.beginDate=a.createTime[0],a.endDate=a.createTime[1]),a.resourceType=Number(a.resourceType),console.log("subForm---",a),Object(o["a"])(a).then((function(t){t&&200===t.code&&(e.msgSuccess("生成数据成功"),e.cancel(),e.$emit("refresh"))})).catch((function(t){e.msgError(t.data.message||"生成数据失败！")}))}}))},reset:function(){var e;this.form=(e={projectName:void 0,projectCode:void 0,deviceCode:void 0,beginDate:void 0,endDate:void 0},Object(c["a"])(e,"endDate",void 0),Object(c["a"])(e,"resourceType",void 0),Object(c["a"])(e,"alertType",void 0),Object(c["a"])(e,"createTime",void 0),e),this.resetForm("form")},cancel:function(){this.reset(),this.$emit("cancel")}}},p=m,f=(a("41b27"),a("2877")),h=Object(f["a"])(p,l,s,!1,null,"f1e27718",null),g=h.exports,v=a("f121"),b={name:"DataDownload",components:{CreateData:g,autoComplete:d["a"]},data:function(){var e=this;return{loading:!1,total:0,fileList:null,createOpen:!1,ids:[],multiple:!0,userOptions:void 0,downloadStatus:Object.keys(this.ENUMS.DOWNLOAD_STATUS).map((function(t){return{value:t,label:e.ENUMS.DOWNLOAD_STATUS[t]}})),createTime:void 0,queryParams:{pageNo:1,pageSize:10,projectCode:"",deviceCode:"",status:void 0,beginTime:"",endTime:""}}},watch:{},created:function(){this.getFileList(),this.getUserList()},methods:{getFileList:function(){var e=this;this.loading=!0,Object(o["b"])(this.queryParams).then((function(t){console.log("res :>> ",t),t&&200===t.code&&(e.fileList=t.data.list,e.total=t.data.total,e.loading=!1)}))},getUserList:function(){var e=this;this.loading=!0,Object(i["b"])().then((function(t){t&&200===t.code&&(e.userOptions=t.data,e.loading=!1)}))},handleAdd:function(){this.createOpen=!0},handleQuery:function(){this.queryParams.pageNo=1,this.createTime?(this.queryParams.beginTime=this.createTime[0],this.queryParams.endTime=this.createTime[1]):(this.queryParams.beginTime="",this.queryParams.endTime=""),this.getFileList()},autoValue:function(e){this.queryParams.createUserId=e.userId},formatterType:function(e,t){return this.ENUMS.RESOURCE_FILE_TYPE[e.resourceType]},resetQuery:function(){this.createTime=[],this.resetForm("queryForm"),this.handleQuery()},handleDownload:function(e){if(console.log("row :>> ",e),4!==e.status)return this.$message.warning("请在进度完成后再进行下载操作！"),!1;var t=document.createElement("a");t.href=v["a"].API_FILE+"/file/download?filePath="+e.ftpFilePath+"&fileName="+e.ftpFileName,t.download=e.ftpFileName,t.click(),t.remove()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.multiple=!e.length},reset:function(){this.resetForm("form")},cancel:function(){this.reset(),this.createOpen=!1}}},y=b,_=Object(f["a"])(y,r,n,!1,null,null,null);t["default"]=_.exports},"8a40":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e._v(" "),a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"事件触发类型","label-width":"96px",prop:"type"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{clearable:"",size:"small"},model:{value:e.queryParams.eventType,callback:function(t){e.$set(e.queryParams,"eventType",t)},expression:"queryParams.eventType"}},e._l(e.alarmType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人",prop:"projectManager"}},[a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入项目号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.projectManager,callback:function(t){e.$set(e.queryParams,"projectManager",t)},expression:"queryParams.projectManager"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目号",prop:"projectCode"}},[a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入项目号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.projectCode,callback:function(t){e.$set(e.queryParams,"projectCode",t)},expression:"queryParams.projectCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入项目名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.projectName,callback:function(t){e.$set(e.queryParams,"projectName",t)},expression:"queryParams.projectName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"报警时间",prop:"alarmTime"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss",size:"small"},model:{value:e.alarmTime,callback:function(t){e.alarmTime=t},expression:"alarmTime"}})],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.recordList}},[a("el-table-column",{attrs:{label:"序号",align:"center",prop:"id",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"项目号",align:"center",prop:"projectCode","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",align:"center",prop:"projectName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"项目负责人",align:"center",prop:"projectManager","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"事件触发类型",align:"center",prop:"eventType","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.ENUMS.EVENT_TYPE[t.row.eventType])+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"总线通道",align:"center",prop:"busChannelNo","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.ENUMS.CONTROLLER_TYPE[t.row.busChannelNo])+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"报警时间",align:"center",prop:"triggerTime","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"文件状态",align:"center",prop:"fileFinished","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(null!==t.row.fileFinished?e.ENUMS.ALARM_FILE_FINISHED[t.row.fileFinished]:"暂无")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"文件类型",align:"center",prop:"fileExist","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.ENUMS.RECORD_FILE_TYPE[t.row.fileExist])+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"事件名称",align:"center",prop:"eventName","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"bottom-end",width:"280",trigger:"click"}},[a("div",[a("span",{staticClass:"inlineBlock fontBold mb5"},[e._v("事件描述")]),a("br"),e._v(" "),a("span",[e._v(e._s(t.row.alarmDesc||"暂无"))])]),e._v(" "),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("span",{staticClass:"pointer text-primary"},[e._v(e._s(t.row.eventName))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleDownload(t.row)}}},[e._v("数据下载")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getAlaRecordList}})],1)],1)},n=[],i=(a("ac6a"),a("456d"),a("6272")),o={name:"AlarmRecord",components:{},data:function(){var e=this;return{loading:!1,total:0,recordList:null,alarmType:Object.keys(this.ENUMS.EVENT_TYPE).map((function(t){return{value:t,label:e.ENUMS.EVENT_TYPE[t]}})),alarmTime:void 0,queryParams:{pageNo:1,pageSize:10,eventType:void 0,projectManager:"",projectCode:"",projectName:"",startTime:"",endTime:""}}},watch:{},created:function(){this.getAlaRecordList()},methods:{getAlaRecordList:function(){var e=this;this.loading=!0,Object(i["b"])(this.queryParams).then((function(t){t&&200===t.code&&(e.recordList=t.data.list,e.total=t.data.total,e.loading=!1)}))},handleQuery:function(){this.queryParams.pageNo=1,this.alarmTime?(this.queryParams.startTime=this.alarmTime[0],this.queryParams.endTime=this.alarmTime[1]):(this.queryParams.startTime="",this.queryParams.endTime=""),this.getAlaRecordList()},resetQuery:function(){this.resetForm("queryForm"),this.alarmTime=[],this.handleQuery()},handleDownload:function(e){var t=this,a={id:e.id};0===e.fileFinished?this.$confirm("该报警数据未完全上传，数据可能会缺失，是否确定下载?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["a"])(a).then((function(a){if(console.log(a,"download res...."),200===a.status){var r=new Blob([a.data],{type:a.headers["content-type"]}),n=URL.createObjectURL(r),i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("download","".concat(e.eventName,".zip")),document.body.appendChild(i),i.click(),t.$message.success("文件下载成功 !")}else t.$message.error("文件下载失败 !")})).catch((function(e){console.log("err>>>>>>>>",e),t.msgError(e.message||"下载失败！")}))})):Object(i["a"])(a).then((function(a){if(console.log(a,"download res...."),200===a.status){var r=new Blob([a.data],{type:a.headers["content-type"]}),n=URL.createObjectURL(r),i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("download","".concat(e.eventName,".zip")),document.body.appendChild(i),i.click(),t.$message.success("文件下载成功 !")}else t.$message.error("文件下载失败 !")})).catch((function(e){console.log("err>>>>>>>>",e),t.msgError(e.message||"下载失败！")}))}}},l=o,s=a("2877"),c=Object(s["a"])(l,r,n,!1,null,null,null);t["default"]=c.exports},"8a5b":function(e,t,a){},"8a9f":function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id="8a9f"},"8af2":function(e,t,a){"use strict";a("5321")},"8dd8":function(e,t,a){},"92c5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e._v(" "),a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"车辆名称",prop:"carName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入车辆编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.carName,callback:function(t){e.$set(e.queryParams,"carName",t)},expression:"queryParams.carName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"车牌号",prop:"carNumber"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入车牌号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.carNumber,callback:function(t){e.$set(e.queryParams,"carNumber",t)},expression:"queryParams.carNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"VIN",prop:"vin"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入VIN",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.vin,callback:function(t){e.$set(e.queryParams,"vin",t)},expression:"queryParams.vin"}})],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.carList}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"80",prop:"id"}}),e._v(" "),a("el-table-column",{attrs:{label:"车辆名称",align:"center",prop:"carName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"车牌号",align:"center",prop:"carNumber","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"VIN",align:"center",prop:"vin","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"添加人",align:"center",prop:"createUserName",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"添加时间",align:"center",prop:"createTime","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"140","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"text-danger",attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getCarList}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"车辆名称",prop:"carName"}},[a("el-input",{attrs:{placeholder:"请输入车辆名称"},model:{value:e.form.carName,callback:function(t){e.$set(e.form,"carName",t)},expression:"form.carName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"车牌号",prop:"carNumber"}},[a("el-input",{attrs:{placeholder:"请输入车牌号",disabled:!!e.form.id},model:{value:e.form.carNumber,callback:function(t){e.$set(e.form,"carNumber",t)},expression:"form.carNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"车型",prop:"carType"}},[a("el-input",{attrs:{placeholder:"请输入车型"},model:{value:e.form.carType,callback:function(t){e.$set(e.form,"carType",t)},expression:"form.carType"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"VIN",prop:"vin"}},[a("el-input",{attrs:{placeholder:"请输入vin",disabled:!!e.form.id},model:{value:e.form.vin,callback:function(t){e.$set(e.form,"vin",t)},expression:"form.vin"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入备注",maxlength:"30"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{staticClass:"upload-wrap",attrs:{label:"车辆图片",prop:"carPicture"}},[a("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:"1","show-file-list":!1,"before-upload":e.beforeUpload,"http-request":e.handleUpload}},[a("div",{class:{mask:e.fileUrl}},[e.fileUrl?a("i",{staticClass:"el-icon-zoom-in bigImg",on:{click:function(t){return t.stopPropagation(),e.previewPicture(t)}}}):e._e(),e._v(" "),e.fileUrl?a("i",{staticClass:"el-icon-delete remove",on:{click:function(t){return t.stopPropagation(),e.removePicture(t)}}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),e.fileUrl?a("img",{staticClass:"avatar",attrs:{src:e.fileUrl}}):e._e()])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,width:e.dialogWidth,"append-to-body":"",visible:e.dialogPicture},on:{"update:visible":function(t){e.dialogPicture=t}}},[a("img",{attrs:{src:e.fileUrl},on:{load:e.onLoad}})])],1)},n=[],i=(a("456d"),a("ac6a"),a("7f7f"),a("2447")),o=a("f121"),l={name:"Car",components:{},data:function(){return{loading:!0,total:0,carList:null,title:"",open:!1,form:{carName:void 0,carNumber:void 0,vin:void 0,carPicture:void 0,status:0,remark:""},formData:new FormData,file:null,fileUrl:"",fileName:"",dialogPicture:!1,dialogWidth:"",dialogTitle:"图片预览",queryParams:{pageNo:1,pageSize:10,carName:"",carNumber:"",vin:"",orderBy:"createTime",order:"desc"},rules:{carName:[{required:!0,message:"车辆名称不能为空",trigger:"blur"},{max:15,message:"车辆名称长度最多15个字符",trigger:"blur"}],carNumber:[{required:!0,message:"车牌号不能为空",trigger:"blur"},{pattern:/^([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}(([0-9]{5}[DF])|([DF]([A-HJ-NP-Z0-9])[0-9]{4})))|([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳]{1})$/,message:"请输入正确格式的车牌号",trigger:"blur"}],carType:[{required:!0,message:"车型不能为空",trigger:"blur"},{max:15,message:"车型长度最多15个字符",trigger:"blur"}],vin:[{required:!0,message:"vin不能为空",trigger:"blur"},{pattern:/^[A-HJ-NPR-Z\d]{17}$/,message:"请输入17位正确格式VIN号码",trigger:"blur"}]}}},watch:{},created:function(){this.getCarList()},methods:{getCarList:function(){var e=this;this.loading=!0,Object(i["c"])(this.queryParams).then((function(t){if(t&&200===t.code){var a=t.data.list;e.carList=a,e.total=t.data.total,e.loading=!1}}))},handleQuery:function(){this.queryParams.pageNo=1,this.getCarList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleAdd:function(){this.reset(),this.title="添加车辆",this.open=!0},beforeUpload:function(e){var t="image/png"===e.type,a="image/jpeg"===e.type,r=e.size/1024/1024<10;return t||a||this.$message.error("上传图片必须是JPG/PNG格式 !"),r||this.$message.error("上传图片大小不能超过10MB !"),(t||a)&&r},getObjectURL:function(e){var t=null;return void 0!==window.createObjectURL?t=window.createObjectURL(e):void 0!==window.URL?t=window.URL.createObjectURL(e):void 0!==window.webkitURL&&(t=window.webkitURL.createObjectURL(e)),t},handleUpload:function(e){var t=this;this.file=e.file,this.fileName=e.file.name,this.fileUrl=this.getObjectURL(e.file),this.formData.set("file",e.file),this.formData.set("remark",""),this.formData.set("path","avatar"),Object(i["e"])(this.formData).then((function(e){t.form.carPicture=e.data.filePath}))},previewPicture:function(e){this.dialogImageUrl=this.fileUrl,this.dialogPicture=!0},onLoad:function(e){var t=e.target,a=0;(t.fileSize>0||t.width>1&&t.height>1)&&(a=t.width+40),this.dialogWidth=a+"px"},removePicture:function(){this.fileUrl="",this.form.carPicture="",this.formData.delete("file")},handleUpdate:function(e){var t=this;this.reset();var a=e.id,r=JSON.parse(JSON.stringify(this.carList.filter((function(e){return e.id==a}))[0]));console.log("current_info",r),r&&r.carPicture?this.fileUrl=o["a"].API_FILE+"/file/download?filePath=/avatar/&fileName="+r.carPicture:this.fileUrl="",Object.keys(this.form).forEach((function(e){t.form[e]=r[e]})),this.title="修改车辆",this.open=!0},reset:function(){this.form={id:void 0,carName:void 0,carNumber:void 0,carType:void 0,vin:void 0,carPicture:void 0,status:0,remark:""},this.resetForm("form"),this.removePicture()},cancel:function(){this.reset(),this.open=!1},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(console.log("---",e.form),e.form.id?Object(i["d"])(e.form).then((function(t){t&&200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getCarList())})).catch((function(t){e.msgError(t.data.message)})):Object(i["a"])(e.form).then((function(t){t&&200===t.code&&(e.msgSuccess("添加成功"),e.open=!1,e.getCarList())})).catch((function(t){e.msgError(t.data.message)})))}))},handleDelete:function(e){var t=this;if(1===e.status)return this.$message.warning("有进行中的项目不能删除该车辆！"),!1;this.$confirm('是否确认删除车辆名称为"'+e.carName+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["b"])(e.id).then((function(e){if(e&&200===e.code){t.msgSuccess("删除成功");var a=Math.ceil((t.total-1)/t.queryParams.pageSize),r=t.queryParams.pageNo>a?a:t.queryParams.pageNo;t.queryParams.pageNo=r<1?1:r,t.getCarList()}}))})).catch((function(){}))}}},s=l,c=(a("8af2"),a("2877")),u=Object(c["a"])(s,r,n,!1,null,"23c9603e",null);t["default"]=u.exports},"93c8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{staticClass:"clearfix"},[a("router-link",{staticClass:"pull-right mt10 mr20 go-back",attrs:{to:"/base/device"}},[e._v("返回 - 设备列表")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.logList}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"120",prop:"id"}}),e._v(" "),a("el-table-column",{attrs:{label:"模块",align:"center",prop:"module",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"内容",align:"center",prop:"content","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"项目动态",align:"center",prop:"description",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"IP",align:"center",prop:"ip",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作人",align:"center",prop:"userName",width:"100","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作时间",align:"center",prop:"createTime",width:"180","show-overflow-tooltip":""}})],1)],1)],1)},n=[],i=(a("c5f6"),a("435f")),o={name:"DeviceLog",data:function(){return{loading:!0,total:0,logList:null,queryParams:{bindId:Number(this.$route.params.id),pageNo:1,pageSize:10,module:"设备管理模块"}}},watch:{},created:function(){this.getLog()},methods:{getLog:function(){var e=this;this.loading=!0,Object(i["d"])(this.queryParams).then((function(t){t&&200===t.code&&(e.logList=t.data.list,e.total=t.data.total,e.loading=!1)}))}}},l=o,s=a("2877"),c=Object(s["a"])(l,r,n,!1,null,"96c51c94",null);t["default"]=c.exports},"93e1":function(e,t,a){},9429:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("img",{staticClass:"img-circle img-lg",attrs:{src:e.options.img,title:"点击上传头像"},on:{click:function(t){return e.editCropper()}}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"900px","append-to-body":""},on:{"update:visible":function(t){e.open=t},opened:e.modalOpened}},[a("el-row",{attrs:{gutter:0}},[a("el-col",{style:{height:"350px"},attrs:{xs:12,sm:12,md:12}},[e.visible?a("vue-cropper",{ref:"cropper",attrs:{img:e.options.img,info:!0,autoCrop:e.options.autoCrop,autoCropWidth:e.options.autoCropWidth,autoCropHeight:e.options.autoCropHeight,fixedBox:e.options.fixedBox},on:{realTime:e.realTime}}):e._e()],1),e._v(" "),a("el-col",{style:{height:"350px"},attrs:{xs:12,sm:12,md:12}},[a("div",{staticClass:"avatar-upload-preview"},[a("img",{style:e.previews.img,attrs:{src:e.previews.url}})])])],1),e._v(" "),a("br"),e._v(" "),a("el-row",[a("el-col",{attrs:{lg:2,md:2}},[a("el-upload",{attrs:{action:"#","http-request":e.requestUpload,"show-file-list":!1,"before-upload":e.beforeUpload}},[a("el-button",{attrs:{size:"small"}},[e._v("\n            上传\n            "),a("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1),e._v(" "),a("el-col",{attrs:{lg:{span:1,offset:2},md:2}},[a("el-button",{attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(t){return e.changeScale(1)}}})],1),e._v(" "),a("el-col",{attrs:{lg:{span:1,offset:1},md:2}},[a("el-button",{attrs:{icon:"el-icon-minus",size:"small"},on:{click:function(t){return e.changeScale(-1)}}})],1),e._v(" "),a("el-col",{attrs:{lg:{span:1,offset:1},md:2}},[a("el-button",{attrs:{icon:"el-icon-refresh-left",size:"small"},on:{click:function(t){return e.rotateLeft()}}})],1),e._v(" "),a("el-col",{attrs:{lg:{span:1,offset:1},md:2}},[a("el-button",{attrs:{icon:"el-icon-refresh-right",size:"small"},on:{click:function(t){return e.rotateRight()}}})],1),e._v(" "),a("el-col",{attrs:{lg:{span:2,offset:6},md:2}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.uploadImg()}}},[e._v("提 交")])],1)],1)],1)],1)},n=[],i=a("4360"),o=a("7e79"),l=a("c0c7"),s={components:{VueCropper:o["VueCropper"]},props:{user:{type:Object}},data:function(){return{open:!1,visible:!1,title:"修改头像",options:{img:i["a"].getters.avatar,autoCrop:!0,autoCropWidth:200,autoCropHeight:200,fixedBox:!0},previews:{}}},methods:{editCropper:function(){this.open=!0},modalOpened:function(){this.visible=!0},requestUpload:function(){},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},changeScale:function(e){e=e||1,this.$refs.cropper.changeScale(e)},beforeUpload:function(e){var t=this;if(-1==e.type.indexOf("image/"))this.msgError("文件格式错误，请上传图片类型,如：JPG，PNG后缀的文件。");else{var a=new FileReader;a.readAsDataURL(e),a.onload=function(){t.options.img=a.result}}},uploadImg:function(){var e=this;this.$refs.cropper.getCropBlob((function(t){var a=new FormData;a.append("avatarfile",t),Object(l["l"])(a).then((function(t){200===t.code&&(e.open=!1,e.options.img="http://180.76.54.21:8899/api"+t.imgUrl,i["a"].commit("SET_AVATAR",e.options.img),e.msgSuccess("修改成功")),e.visible=!1}))}))},realTime:function(e){this.previews=e}}},c=s,u=a("2877"),d=Object(u["a"])(c,r,n,!1,null,null,null);t["default"]=d.exports},9668:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-upload2",size:"mini"},on:{click:e.handleUpload}},[e._v("上传\n        ")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索\n        ")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置\n        ")])],1)],1),e._v(" "),a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"文件名称",prop:"fileName"}},[a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入文件名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.fileName,callback:function(t){e.$set(e.queryParams,"fileName",t)},expression:"queryParams.fileName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传人",prop:"createUserId"}},[a("auto-complete",{ref:"autoInput",attrs:{width:"160px"},on:{autoValue:e.autoValue},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传时间",prop:"uploadTime"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss",size:"small"},model:{value:e.uploadTime,callback:function(t){e.uploadTime=t},expression:"uploadTime"}})],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.fileList}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center",prop:"id"}}),e._v(" "),a("el-table-column",{attrs:{label:"文件名称",align:"center",prop:"fileName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.remark||"暂无")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上传人",align:"center",prop:"createUserName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"上传时间",align:"center",prop:"createTime","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleDownload(t.row)}}},[e._v("下载\n          ")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getFileList}})],1),e._v(" "),e.upOpen?a("upload-dialog",{attrs:{visable:e.upOpen},on:{cancel:e.cancel,refresh:e.getFileList}}):e._e()],1)},n=[],i=a("c0c7"),o=a("8889"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.visable,"close-on-click-modal":!1,"before-close":e.cancel,"append-to-body":"",width:"750px"},on:{"update:visible":function(t){e.visable=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"",prop:"file"}},[a("upload",{attrs:{"file-type":"dbc","limit-size":10,showFileList:!0},on:{getFile:e.getFile}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入内容",type:"textarea",rows:2,maxlength:"30","show-word-limit":""},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)},s=[],c=a("7d4e"),u={name:"UploadDialog",components:{Upload:c["a"]},props:{visable:{default:!1,type:Boolean}},data:function(){return{title:"上传",file:null,formData:new FormData,form:{fileName:"",filePath:"",fileType:"",remark:""}}},created:function(){this.reset()},methods:{getFile:function(e){this.file=e,this.formData.set("file",e)},submitForm:function(){var e=this;if(!this.file)return this.$message.warning("请选择文件！"),!1;this.formData.set("path","config"),this.formData.set("remark",this.form.remark),Object(o["g"])(this.formData).then((function(t){t&&200===t.code&&(e.msgSuccess("上传成功"),e.cancel(),e.$emit("refresh"))}))},reset:function(){this.file=null,this.resetForm("form")},cancel:function(){this.reset(),this.$emit("cancel")}}},d=u,m=a("2877"),p=Object(m["a"])(d,l,s,!1,null,"6f273aa0",null),f=p.exports,h=a("5b24"),g=a("f121"),v={name:"DBC",components:{uploadDialog:f,autoComplete:h["a"]},data:function(){return{loading:!0,total:0,fileList:null,title:"下载",upOpen:!1,uploadTime:[],form:{fileType:void 0},userOptions:void 0,queryParams:{pageNo:1,pageSize:10,fileName:"",fileType:".dbc",createUser:"",createUserId:"",beginTime:"",endTime:"",orderBy:"createTime",order:"desc"},rules:{fileType:[{required:!0,message:"下载文件类型不能为空",trigger:"change"}]}}},watch:{},created:function(){this.getFileList(),this.getUserList()},methods:{getFileList:function(){var e=this;this.loading=!0,Object(o["a"])(this.queryParams).then((function(t){console.log("res :>> ",t),t&&200===t.code&&(e.fileList=t.data.list,e.total=t.data.total,e.loading=!1)}))},getUserList:function(){var e=this;this.loading=!0,Object(i["b"])().then((function(t){t&&200===t.code&&(e.userOptions=t.data,e.loading=!1)}))},handleQuery:function(){this.queryParams.pageNo=1,this.uploadTime.length?(this.queryParams.beginTime=this.uploadTime[0],this.queryParams.endTime=this.uploadTime[1]):(this.queryParams.beginTime="",this.queryParams.endTime=""),this.getFileList()},autoValue:function(e){this.queryParams.createUserId=e.userId},resetQuery:function(){this.$refs.autoInput.handleClear(),this.uploadTime=[],this.resetForm("queryForm"),this.handleQuery()},handleUpload:function(e){this.reset(),this.upOpen=!0},handleDownload:function(e){console.log("row :>> ",e);var t=g["a"].API_FILE+"/file/download?filePath=/config/&fileName="+e.filePath,a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="blob",a.onload=function(){var t=window.URL.createObjectURL(a.response),r=document.createElement("a");r.href=t,r.download=e.fileName,r.click(),document.body.removeChild(r)},a.send()},reset:function(){this.resetForm("form")},cancel:function(){this.reset(),this.upOpen=!1}}},b=v,y=Object(m["a"])(b,r,n,!1,null,null,null);t["default"]=y.exports},"96ed":function(e,t,a){},"992a":function(e,t){e.exports="data:image/png;base64,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"},"9b8f":function(e,t,a){"use strict";a.r(t);a("a481");var r,n,i={created:function(){var e=this.$route,t=e.params,a=e.query,r=t.path;console.log("path======================",r,t,a),this.$router.replace({path:"/"+r,query:a})},render:function(e){return e()}},o=i,l=a("2877"),s=Object(l["a"])(o,r,n,!1,null,null,null);t["default"]=s.exports},"9bd3":function(e,t,a){"use strict";a("4779")},"9c89":function(e,t,a){},"9e04":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-row",{attrs:{gutter:24}},[r("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[r("el-col",{attrs:{span:12}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-s-tools",size:"mini"},on:{click:e.handleSetting}},[e._v("设置")])],1)],1),e._v(" "),r("el-row",[r("el-col",{staticClass:"data_wrap ml10",attrs:{span:10}},[r("el-row",{attrs:{gutter:0,type:"flex",justify:"center",align:"middle"}},[r("el-col",{staticClass:"data_left flex-center",attrs:{span:8}},[r("div",[r("div",{staticClass:"flex-center"},[r("img",{staticClass:"mt5",attrs:{src:a("4571")}})]),e._v(" "),r("p",[e._v("事故/标记数据")])])]),e._v(" "),r("el-col",{staticClass:"data_right flex-center text-center",attrs:{span:16}},[r("div",[r("h4",[e._v(e._s(e.dateOne)+"年")]),e._v(" "),r("p",[e._v("数据保存时间")])])])],1)],1),e._v(" "),r("el-col",{staticClass:"data_wrap ml20",attrs:{span:10}},[r("el-row",{attrs:{gutter:0,type:"flex",justify:"center",align:"middle"}},[r("el-col",{staticClass:"data_left flex-center",attrs:{span:8}},[r("div",[r("div",{staticClass:"flex-center"},[r("img",{staticClass:"mt5",attrs:{src:a("4571")}})]),e._v(" "),r("p",[e._v("事故/标记数据")])])]),e._v(" "),r("el-col",{staticClass:"data_right flex-center text-center",attrs:{span:16}},[r("div",[r("h4",[e._v(e._s(e.dateTwo)+"年")]),e._v(" "),r("p",[e._v("数据保存时间")])])])],1)],1)],1)],1),e._v(" "),r("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"166px"}},[r("el-row",[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"事故/标记数据储存年限",prop:"accident"}},[r("el-input",{attrs:{placeholder:"请输入储存年限"},model:{value:e.form.accident,callback:function(t){e.$set(e.form,"accident",t)},expression:"form.accident"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"普通数据储存年限",prop:"ordinary"}},[r("el-input",{attrs:{placeholder:"请输入储存年限"},model:{value:e.form.ordinary,callback:function(t){e.$set(e.form,"ordinary",t)},expression:"form.ordinary"}})],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),r("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},n=[],i={name:"Archive",components:{},data:function(){return{loading:!0,title:"设置",open:!1,dateOne:"3",dateTwo:"1.5",form:{},rules:{accident:[{required:!0,message:"存储年限不能为空",trigger:"blur"},{pattern:/^\d+(\.\d{0,2})?$/,message:"请输入正确的格式",trigger:"blur"}],ordinary:[{required:!0,message:"存储年限不能为空",trigger:"blur"},{pattern:/^\d+(\.\d{0,2})?$/,message:"请输入正确的格式",trigger:"blur"}]}}},created:function(){},methods:{handleSetting:function(){this.reset(),this.open=!0},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={accident:"",ordinary:""},this.resetForm("form")},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){e.msgSuccess("设置成功"),e.dateOne=e.form.accident,e.dateTwo=e.form.ordinary,e.cancel()}))}}},o=i,l=(a("5fff"),a("2877")),s=Object(l["a"])(o,r,n,!1,null,"4a94e867",null);t["default"]=s.exports},"9fd4":function(e,t,a){"use strict";a("788e")},"9fde":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-row",{attrs:{gutter:24}},[r("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[r("el-col",{staticClass:"clearfix"},[r("el-button",{attrs:{type:"primary",size:"mini",plain:"status"!==e.type},on:{click:function(t){return e.handleChange("status")}}},[e._v("设备状态\n        ")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"mini",plain:"config"!==e.type},on:{click:function(t){return e.handleChange("config")}}},[e._v("配置文件\n        ")]),e._v(" "),r("router-link",{staticClass:"pull-right mt10 mr20 go-back",attrs:{to:"/project/list"}},[e._v("返回 - 项目列表\n        ")])],1)],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"status"===e.type,expression:"type === 'status'"}]},[r("el-row",[r("el-col",{attrs:{span:4,offset:1}},[r("img",{staticStyle:{display:"block"},attrs:{src:a("992a"),alt:"device"}}),e._v(" "),r("p",[e._v("编号: "+e._s(e.deviceStatusObj.terminalId))]),e._v(" "),r("p",[e._v("\n            状态:\n            "),r("span",{staticClass:"text-primary"},[e._v(e._s(e.deviceStatusObj.online?"在线":"离线"))])])]),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-row",{staticClass:"mt20",attrs:{gutter:20}},[r("el-col",{staticClass:"text-right text-primary",attrs:{span:10}},[e._v("\n              磁盘容量\n            ")]),e._v(" "),r("el-col",{attrs:{span:12}},[e._v("\n               \n            ")])],1),e._v(" "),r("el-row",{staticClass:"mt20",attrs:{gutter:20}},[r("el-col",{staticClass:"text-right",attrs:{span:10}},[e._v("\n              可用:\n            ")]),e._v(" "),r("el-col",{attrs:{span:12}},[e._v("\n              "+e._s(e.deviceStatusObj.sdAvailableCapacity||"-")+" MB\n            ")])],1),e._v(" "),r("el-row",{staticClass:"mt20",attrs:{gutter:20}},[r("el-col",{staticClass:"text-right",attrs:{span:10}},[e._v("\n              总共:\n            ")]),e._v(" "),r("el-col",{attrs:{span:12}},[e._v("\n              "+e._s(e.deviceStatusObj.sdDiskCapacity||"-")+" MB\n            ")])],1),e._v(" "),r("el-row",{staticClass:"mt20",attrs:{gutter:20}},[r("el-col",{staticClass:"text-right",attrs:{span:10}},[e._v("\n              剩余可用:\n            ")]),e._v(" "),r("el-col",{attrs:{span:12}},[e._v("\n              "+e._s((100*e.deviceStatusObj.sdRemainingProportion).toFixed(2)||"-")+"%\n            ")])],1)],1),e._v(" "),r("el-col",{attrs:{span:10}},[r("el-row",{staticClass:"mt20",attrs:{gutter:20}},[r("el-col",{staticClass:"text-right",attrs:{span:8}},[e._v("\n              当前配置文件:\n            ")]),e._v(" "),r("el-col",{staticClass:"world-break",attrs:{span:14}},[e._v("\n              "+e._s(e.deviceStatusObj.configurationFile||"-")+"\n            ")])],1),e._v(" "),r("el-row",{staticClass:"mt20",attrs:{gutter:20}},[r("el-col",{staticClass:"text-right",attrs:{span:8}},[e._v("\n              最新联网时间:\n            ")]),e._v(" "),r("el-col",{staticClass:"world-break",attrs:{span:14}},[e._v("\n              "+e._s(e.deviceStatusObj.networkTime||"-")+"\n            ")])],1),e._v(" "),r("el-row",{staticClass:"mt20",attrs:{gutter:20}},[r("el-col",{staticClass:"text-right",attrs:{span:8}},[e._v("\n              程序版本:\n            ")]),e._v(" "),r("el-col",{staticClass:"world-break",attrs:{span:14}},[e._v("\n              "+e._s(e.deviceStatusObj.version||"-")+"\n            ")])],1),e._v(" "),r("el-row",{staticClass:"mt20",attrs:{gutter:20}},[r("el-col",{staticClass:"text-right",attrs:{span:8}},[e._v("\n              设备负责人:\n            ")]),e._v(" "),r("el-col",{staticClass:"world-break",attrs:{span:14}},[e._v("\n              "+e._s(e.chargeUserName)+"\n            ")])],1)],1),e._v(" "),r("el-col",{staticClass:"text-right",attrs:{span:2}},[r("el-button",{staticClass:"full-width mt10",attrs:{type:"primary",size:"small",plain:""},on:{click:e.handleRemoteRefresh}},[e._v("远程刷写\n          ")]),e._v(" "),r("br"),e._v(" "),r("el-button",{staticClass:"full-width mt10",attrs:{type:"primary",size:"small",plain:""},on:{click:e.handleRemoteDiagnose}},[e._v("远程诊断\n          ")]),e._v(" "),r("br"),e._v(" "),r("el-button",{staticClass:"full-width mt10",attrs:{type:"primary",size:"small",plain:""},on:{click:e.handleRestart}},[e._v("远程重启\n          ")]),e._v(" "),r("br"),e._v(" "),r("el-button",{staticClass:"full-width mt10",attrs:{type:"primary",size:"small",plain:""},on:{click:e.handleRemoteMonitor}},[e._v("远程监控\n          ")]),e._v(" "),r("br")],1),e._v(" "),r("el-col",{staticClass:"bottomLine"})],1)],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"config"===e.type,expression:"type === 'config'"}]},[r("el-row",{staticClass:"mt10 mb20",attrs:{gutter:24}},[r("el-col",{attrs:{span:12}},[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleDelivery}},[e._v("下发配置文件\n          ")]),e._v(" "),r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索\n          ")]),e._v(" "),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置\n          ")])],1)],1),e._v(" "),r("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"文件名称",prop:"fileName"}},[r("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入文件名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.fileName,callback:function(t){e.$set(e.queryParams,"fileName",t)},expression:"queryParams.fileName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"操作人",prop:"createUserId"}},[r("auto-complete",{ref:"autoInput",attrs:{width:"160px"},on:{autoValue:e.autoValue},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}}})],1),e._v(" "),r("el-form-item",{attrs:{label:"下发时间",prop:"vin"}},[r("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss",size:"small"},model:{value:e.issuingTime,callback:function(t){e.issuingTime=t},expression:"issuingTime"}})],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.configFileList}},[r("el-table-column",{attrs:{label:"序号",align:"center",prop:"id"}}),e._v(" "),r("el-table-column",{attrs:{label:"文件名称",align:"center",prop:"fileName","show-overflow-tooltip":""}}),e._v(" "),r("el-table-column",{attrs:{label:"下发状态",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.filterEnum(t.row.status,e.statusOptions)||"-"))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作人",align:"center",prop:"createUserId","show-overflow-tooltip":""}}),e._v(" "),r("el-table-column",{attrs:{label:"下发时间",align:"center",prop:"updateTime","show-overflow-tooltip":""}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center",width:"180","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleSendAgain(t.row)}}},[e._v("再次下发\n            ")]),e._v(" "),r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleDownload(t.row)}}},[e._v("下载\n            ")])]}}])})],1),e._v(" "),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getDeviceInfo}})],1)],1),e._v(" "),e.refreshOpen?r("remote-refresh",{attrs:{id:e.projectId,visable:e.refreshOpen},on:{cancel:e.cancel,refresh:e.getDeviceInfo}}):e._e(),e._v(" "),e.diagnoseOpen?r("remote-diagnose",{attrs:{id:e.projectId,visable:e.diagnoseOpen},on:{cancel:e.cancel,refresh:e.getDeviceInfo}}):e._e(),e._v(" "),e.deliveryOpen?r("delivery-config",{attrs:{visable:e.deliveryOpen,"current-info":e.current_info},on:{cancel:e.cancel,refresh:e.getDeviceInfo}}):e._e()],1)},n=[],i=(a("c5f6"),a("435f")),o=a("8889"),l=a("f121"),s=a("7ca7"),c=a("03ea"),u=a("befe"),d=a("dfcf"),m=a("5b24"),p={name:"Remote",components:{RemoteRefresh:c["a"],RemoteDiagnose:u["a"],DeliveryConfig:d["a"],autoComplete:m["a"]},data:function(){return{projectId:Number(this.$route.params.projectId),allProjectList:[],cur_project:null,type:"status",loading:!1,total:0,configFileList:null,deviceStatusObj:{},statusOptions:this.ENUMS.CONFIGFILE_ISSUE,issuingTime:[],title:"",chargeUserName:void 0,current_info:null,refreshOpen:!1,diagnoseOpen:!1,deliveryOpen:!1,queryParams:{pageNo:1,pageSize:10,fileName:"",fileType:".img",createUserId:"",projectCode:void 0,deviceCode:void 0,projectId:void 0,id:void 0}}},watch:{},created:function(){var e=this;this.projectId=Number(this.$route.params.projectId),Object(s["d"])().then((function(t){if(t&&200===t.code){if(e.allProjectList=t.data,e.cur_project=e.allProjectList.filter((function(t){return t.projectId===e.projectId})),console.log("cur_project",e.cur_project),e.chargeUserName=e.cur_project[0].chargeUserName,e.queryParams.deviceCode=e.cur_project[0].deviceCode,!e.cur_project.length)return e.$message.error("此项目不存在！"),setTimeout((function(){e.$router.push("/project/list")}),800),!1;if(1!==e.cur_project[0].status)return e.$message.error("此项目不在进行中"),setTimeout((function(){e.$router.push("/project/list")}),800),!1;e.getDeviceInfo()}}))},methods:{handleChange:function(e){this.type=e},getDeviceInfo:function(){var e=this;this.loading=!0,Object(o["b"])(this.queryParams).then((function(t){t&&200===t.code&&(e.configFileList=t.data.list,e.total=t.data.total,e.loading=!1)})),Object(i["e"])(encodeURI(this.cur_project[0].deviceCode)).then((function(t){t&&200===t.code&&(e.deviceStatusObj=t.data)}))},handleQuery:function(){this.queryParams.pageNo=1,this.issuingTime.length?(this.queryParams.beginTime=this.issuingTime[0],this.queryParams.endTime=this.issuingTime[1]):(this.queryParams.beginTime="",this.queryParams.endTime=""),this.getDeviceInfo()},autoValue:function(e){this.queryParams.createUserId=e.userId},resetQuery:function(){this.$refs.autoInput.handleClear(),this.issuingTime=[],this.resetForm("queryForm"),this.handleQuery()},handleRemoteRefresh:function(){this.$router.push("/remote/refresh/".concat(this.cur_project[0].projectCode,"/").concat(this.cur_project[0].deviceCode))},handleRemoteDiagnose:function(){this.$router.push("/remote/diagnose/".concat(this.cur_project[0].projectCode,"/").concat(this.cur_project[0].deviceCode))},handleRestart:function(){var e=this;this.$confirm("是否确认远程重启?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={projectCode:e.cur_project[0].projectCode,deviceCode:e.cur_project[0].deviceCode};Object(o["d"])(t).then((function(t){console.log("res",t),t&&200===t.code?e.$message.success(t.data):e.$message.error("操作失败！")}))})).catch((function(){}))},handleRemoteMonitor:function(){this.$router.push({path:"/cockpit",name:"cockpit",query:{projectId:this.projectId}})},handleFormat:function(){this.$confirm("格式化后设备本地存储数据将被清除，请慎重操作！","注意：确认格式化SD卡？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).catch((function(){}))},handleDelivery:function(){var e=this;this.deliveryOpen=!0,this.current_info=JSON.parse(JSON.stringify(this.allProjectList.filter((function(t){return t.id==e.projectId}))[0]))},handleSendAgain:function(e){var t=this,a={configId:e.id};this.$confirm('是否再次下发文件名为"'+e.fileName+'"的配置文件?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["f"])(a).then((function(e){e&&200===e.code&&(t.msgSuccess("下发成功"),t.getDeviceInfo())}))})).catch((function(){}))},handleDownload:function(e){var t=l["a"].API_FILE+"/file/download?filePath=/config/"+e.deviceCode+"/&fileName="+e.fileName,a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="blob",a.onload=function(){var t=window.URL.createObjectURL(a.response),r=document.createElement("a");r.href=t,r.download=e.fileName,r.click(),document.body.removeChild(r)},a.send()},cancel:function(){this.refreshOpen=!1,this.diagnoseOpen=!1,this.deliveryOpen=!1,this.getDeviceInfo()},submitForm:function(){this.$refs["form"].validate((function(e){}))},handleDelete:function(e){var t=this;this.$confirm('是否确认删除车辆名称为"'+e.carName+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){delCar(e.id).then((function(e){e&&200===e.code&&(t.msgSuccess("删除成功"),t.getDeviceInfo())}))})).catch((function(){}))},filterEnum:function(e,t){return t[e]}}},f=p,h=(a("dfc1"),a("2877")),g=Object(h["a"])(f,r,n,!1,null,"38aa9b8a",null);t["default"]=g.exports},"9fe5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"behavior_wrap mt10"},[a("el-row",{staticClass:"header"},[a("el-col",{staticClass:"text-monitor title_item",attrs:{span:24,align:"center"}},[e._v("驾驶行为分析")])],1),e._v(" "),a("el-row",{staticClass:"content_wrap"},[a("el-table",{ref:"table",attrs:{data:e.behaviorData,"show-header":!1,height:"388"}},[a("el-table-column",{attrs:{prop:"label",label:"类型",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"data",label:"数据",align:"center","show-overflow-tooltip":""}})],1)],1)],1)},n=[],i={name:"DriveBehavior",components:{},props:{behaviorData:{type:Array,default:function(){return[]}}},data:function(){return{scrollTop:null}},mounted:function(){},methods:{}},o=i,l=(a("123b"),a("2877")),s=Object(l["a"])(o,r,n,!1,null,"54860d6a",null);t["default"]=s.exports},a325:function(e,t,a){"use strict";a("c636")},a36b:function(e,t,a){e.exports=a.p+"static/img/404.a57b6f31.png"},a39f:function(e,t,a){"use strict";a("1de6")},a6dc:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"b",(function(){return c}));var r=a("b775"),n=a("f121");function i(){return Object(r["a"])({url:n["a"].API+"/menu/tree-list",method:"get"})}function o(e){return Object(r["a"])({url:n["a"].API+"/role/list-menu/"+e,method:"get"})}function l(e){return Object(r["a"])({url:n["a"].API+"/menu",method:"post",data:e})}function s(e){return Object(r["a"])({url:n["a"].API+"/menu/"+e.id,method:"put",data:e})}function c(e){return Object(r["a"])({url:n["a"].API+"/menu/"+e,method:"delete"})}},a73f:function(e,t,a){"use strict";a("abf1")},a857:function(e,t,a){"use strict";a("851b")},a8a2:function(e,t,a){},a8e6:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAE+ElEQVRYR72Xa2wUVRTH/+fuPLbl0aI0GCC0hgpqKZQdkko/6AeJRokEUvEVTIwJSHjNFpSniEiw1FC6W/lQQcDEKNEY8cEHAsgnCQ0wW6glCoIgtrZNJFDpsrtzd+aYqaGUstBdljDfZu45//O7507OPYeQ5jNmJQ8bHnOmM5znCDQBhIcInAeGwyS6Ab5IwAmXxT4R8x20tlFXOtI0kJGxKPEoK/SuYJoFwbku4ywRNbHrXmAWHSBOCvBIhigm4lIA4wDqZnZ2Rx29+vRWOn+nGLcFmPg6D1IfkOsh2CTQJQf0SfSyu/vMZ/pvdxKctJTHCTc5RwDzAR7KTPXR88qG0z/Q1VR+KQFK5sSLcwrEXgYKAapuPaXUdu6n6EDZ6rtuzOM8zrGXE2EVC54R2eLfmxbA1CouTUAeJJevSsbM5nq9JZPA/W1LquLFp+r8Z73vxjwebm2jf/ra3JQBYzGPhU82AuhIsDqtJUyd2QTv6xsw7beIeKMad6c0NuRcuL7WC1D0BvuH59sRMPT4IFnR8uHgAYOXmvJJ3ZHO8a25hwcCLV/Ho50u+zADXbimGdY2kp5PL0Cgyt7ic7HIAU+JhPXmgQR7UmraPwEct8L69HTsy9fahtONRnap1gqrK3sBJi2Mj1NU+hUQG62Q+l46Yv8DyP0QSFh16gvp+yQ2+YBlf/m1se015NUOIBC0dwlgRgepo1vrKJa+WOYAJQt4sK7JVmL3CyvsX0jjl/OQIQnZyYJrrTp9bbrB7zYDPX5VchNcLOgUygiaHEy8qij48tI5Hv/HHv+Z+wEwcUligq7il9glXyUFgvYOYjxlhbXiTIJnk4GeYzcTF0mhHz2AYwDORULaK/cXQH5L4AIyTNnOcHdGwvqauwFgwtVISK3M2DcoawG3kgwzEXWI1pwIaaGMRUz7EAMTALZAN2pKHx0ixlErfOvPbQTlKoDfzgogYCbngvh5MDglPIGI3SYrrH/Qfz1gytVEvKznCEDYZYXU1ZlmIBv7QNCuA3gWTQ7aRwH6symkzs5GMFPfgCm/B2GYB7CdgGciIa0wU5Fs7A0z0cZEeyhQlXiJGF/JOEqbG7K7+9MFKgnaZTnMTUnCLPJqs1+VnQDXW2F9Vboi2dgZQbuWGHM7hDqi5zIygvHtgHhRKuro5s2ZtV6ZghgrOA8J2crAjkhIC/YATFzED2uKPMN8457OVDhd+0DQDnkNq4wnx55syG3rbUgmm7JahfsOD6WpxzZoXnm+50/ZUlnhc9yfScf64x/p670AvQAls1nzj5LHiDlfHexUHNmY23YvCYwlPAZkH/EpaD9aq5UD5NwE4L1UrIkVym7R6AJXkglnmpeiewFhLLk2BkI5QIQcGVOnnmygXt1b5oJHavix/L/tQy5Rgl1URuo1KxsIw7TLQfwNQK7jutNO1Pt/76uXcjB5Yn6syPb7vhOMxx2izeKaUpPurHddvCzI+YKTqwVxFTNOSled2fwxtfbfzG1Hs+LFrA/x2et8TEtBiCZBnwqXv47UqxGAUl8+YFFiSkMDXhYCb3otPpiqrWHKJrxPyVSZHHA4LQrGih5M+lZAwWsQGMoutYFhgVyvfbvCDE0QFYC5ECTKAB4JoIsZnyddtSbVrgc8glSkXsUUjvO0luM+y4xJIB5FEHmeLYOvgNEOoAUk9kX/vXzg9M6ClMNof+3/ANZ2QFo4hF8XAAAAAElFTkSuQmCC"},abf1:function(e,t,a){},b117:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var r=a("b775"),n=(a("24bf"),a("f121"));function i(e){return Object(r["a"])({url:n["a"].API_MONIT+"/send-device/file-upload",method:"post",data:e})}function o(e){return Object(r["a"])({url:n["a"].API_FILE+"/device-file-upload",method:"get",params:e})}},b18f:function(e,t,a){"use strict";a("7c87")},b637:function(e,t,a){},b698:function(e,t,a){"use strict";a("c2e8")},b74d:function(e,t,a){"use strict";a.d(t,"h",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"f",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"g",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return m}));var r=a("b775"),n=a("f121");function i(e){return Object(r["a"])({url:n["a"].API_FILE+"/terminalUpgrade/upgrade",method:"post",data:e})}function o(e){return Object(r["a"])({url:n["a"].API_FILE+"/terminalUpgradeLog/upgradeLogs",method:"post",data:e})}function l(e){return Object(r["a"])({url:n["a"].API_FILE+"/terminalUpgrade/upgradeStatus",method:"post",data:e})}function s(e){return Object(r["a"])({url:n["a"].API_FILE+"/dtcDiagnosis/diagnosisResultQuery",method:"post",data:e})}function c(e){return Object(r["a"])({url:n["a"].API_FILE+"/dtcDiagnosis/diagnosisLogQuery",method:"post",data:e})}function u(e){return Object(r["a"])({url:n["a"].API_FILE+"/dtcDiagnosis/diagnosis",method:"post",data:e})}function d(e){return Object(r["a"])({url:n["a"].API_FILE+"/dtcDiagnosis/diagnosisFinished",method:"get",params:e})}function m(e){return Object(r["a"])({url:n["a"].API_FILE+"/dtcDiagnosis/clearDtcCode",method:"post",data:e})}},b808:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return c})),a.d(t,"g",(function(){return u})),a.d(t,"d",(function(){return d}));var r=a("b775"),n=a("f121");function i(e){return Object(r["a"])({url:n["a"].API_MONIT+"/alert/roles",method:"post",data:e})}function o(){return Object(r["a"])({url:n["a"].API_MONIT+"/alert/roles/all",method:"get"})}function l(e){return Object(r["a"])({url:n["a"].API_MONIT+"/alert/roles",method:"get",params:e})}function s(e){return Object(r["a"])({url:n["a"].API_MONIT+"/alert/roles/".concat(e),method:"delete"})}function c(e){return Object(r["a"])({url:n["a"].API_MONIT+"/alert/setting",method:"post",data:e})}function u(e){return Object(r["a"])({url:n["a"].API_MONIT+"/alert/setting",method:"get",params:e})}function d(e){return Object(r["a"])({url:n["a"].API_MONIT+"/alert/setting/".concat(e),method:"delete"})}},ba22:function(e,t){e.exports="data:image/png;base64,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"},bb49:function(e,t,a){"use strict";a.r(t);var r=["platform-eleme","eleme","delete-solid","delete","s-tools","setting","user-solid","user","phone","phone-outline","more","more-outline","star-on","star-off","s-goods","goods","warning","warning-outline","question","info","remove","circle-plus","success","error","zoom-in","zoom-out","remove-outline","circle-plus-outline","circle-check","circle-close","s-help","help","minus","plus","check","close","picture","picture-outline","picture-outline-round","upload","upload2","download","camera-solid","camera","video-camera-solid","video-camera","message-solid","bell","s-cooperation","s-order","s-platform","s-fold","s-unfold","s-operation","s-promotion","s-home","s-release","s-ticket","s-management","s-open","s-shop","s-marketing","s-flag","s-comment","s-finance","s-claim","s-custom","s-opportunity","s-data","s-check","s-grid","menu","share","d-caret","caret-left","caret-right","caret-bottom","caret-top","bottom-left","bottom-right","back","right","bottom","top","top-left","top-right","arrow-left","arrow-right","arrow-down","arrow-up","d-arrow-left","d-arrow-right","video-pause","video-play","refresh","refresh-right","refresh-left","finished","sort","sort-up","sort-down","rank","loading","view","c-scale-to-original","date","edit","edit-outline","folder","folder-opened","folder-add","folder-remove","folder-delete","folder-checked","tickets","document-remove","document-delete","document-copy","document-checked","document","document-add","printer","paperclip","takeaway-box","search","monitor","attract","mobile","scissors","umbrella","headset","brush","mouse","coordinate","magic-stick","reading","data-line","data-board","pie-chart","data-analysis","collection-tag","film","suitcase","suitcase-1","receiving","collection","files","notebook-1","notebook-2","toilet-paper","office-building","school","table-lamp","house","no-smoking","smoking","shopping-cart-full","shopping-cart-1","shopping-cart-2","shopping-bag-1","shopping-bag-2","sold-out","sell","present","box","bank-card","money","coin","wallet","discount","price-tag","news","guide","male","female","thumb","cpu","link","connection","open","turn-off","set-up","chat-round","chat-line-round","chat-square","chat-dot-round","chat-dot-square","chat-line-square","message","postcard","position","turn-off-microphone","microphone","close-notification","bangzhu","time","odometer","crop","aim","switch-button","full-screen","copy-document","mic","stopwatch","medal-1","medal","trophy","trophy-1","first-aid-kit","discover","place","location","location-outline","location-information","add-location","delete-location","map-location","alarm-clock","timer","watch-1","watch","lock","unlock","key","service","mobile-phone","bicycle","truck","ship","basketball","football","soccer","baseball","wind-power","light-rain","lightning","heavy-rain","sunrise","sunrise-1","sunset","sunny","cloudy","partly-cloudy","cloudy-and-sunny","moon","moon-night","dish","dish-1","food","chicken","fork-spoon","knife-fork","burger","tableware","sugar","dessert","ice-cream","hot-water","water-cup","coffee-cup","cold-drink","goblet","goblet-full","goblet-square","goblet-square-full","refrigerator","grape","watermelon","cherry","apple","pear","orange","coffee","ice-tea","ice-drink","milk-tea","potato-strips","lollipop","ice-cream-square","ice-cream-round"];t["default"]=r},bce5:function(e,t,a){"use strict";a("5a0c")},befe:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.visable,"close-on-click-modal":!1,"before-close":e.cancel,"append-to-body":"",width:"750px"},on:{"update:visible":function(t){e.visable=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:20,offset:1}},[a("el-form-item",{attrs:{label:"诊断类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.diagnoseOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:20,offset:1}},[a("el-form-item",{attrs:{label:"诊断文件",prop:"file"}},[a("el-input",{staticStyle:{width:"78%"},attrs:{placeholder:"请选择.zip文件",disabled:""},model:{value:e.form.file,callback:function(t){e.$set(e.form,"file",t)},expression:"form.file"}}),e._v(" "),a("upload",{attrs:{"file-type":"zip","limit-size":10,"bt-plain":!0,"bt-size":"medium","ipt-label":"file"},on:{getFile:e.getFile}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20,offset:1}},[a("el-form-item",{attrs:{label:"诊断方法",prop:"methods"}},[a("el-input",{staticStyle:{width:"78%"},attrs:{placeholder:"请选择.json文件",disabled:""},model:{value:e.form.methods,callback:function(t){e.$set(e.form,"methods",t)},expression:"form.methods"}}),e._v(" "),a("upload",{attrs:{"file-type":"json","limit-size":10,"bt-plain":!0,"bt-size":"medium","ipt-label":"methods"},on:{getFile:e.getFile}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)},n=[],i=(a("7f7f"),a("ac6a"),a("456d"),a("c5f6"),a("7d4e")),o={name:"RemoteDiagnose",components:{Upload:i["a"]},props:{visable:{default:!1,type:Boolean},id:{default:0,type:Number},currentInfo:{default:function(){return{}},type:Object}},data:function(){var e=this;return{title:"远程诊断",file:null,formData:new FormData,diagnoseOptions:Object.keys(this.ENUMS.DIAGNOSE_TYPE).map((function(t){return{value:t,label:e.ENUMS.DIAGNOSE_TYPE[t]}})),form:{},rules:{type:[{required:!0,message:"请选择诊断类型",trigger:"change"}],file:[{required:!0,message:"诊断文件不能为空",trigger:["blur","change"]}],methods:[{required:!0,message:"诊断方法不能为空",trigger:["blur","change"]}]}}},created:function(){this.reset()},methods:{getFile:function(e,t){t&&(this.form[t]=e.name)},submitForm:function(){this.$refs["form"].validate((function(e){}))},reset:function(){this.form={id:void 0,type:"",file:null,methods:null},this.resetForm("form")},cancel:function(){this.reset(),this.$emit("cancel")}}},l=o,s=a("2877"),c=Object(s["a"])(l,r,n,!1,null,"658522fa",null);t["a"]=c.exports},bf69:function(e,t,a){},c0c7:function(e,t,a){"use strict";a.d(t,"h",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"j",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"i",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"f",(function(){return m})),a.d(t,"k",(function(){return p})),a.d(t,"l",(function(){return f})),a.d(t,"e",(function(){return h})),a.d(t,"g",(function(){return g})),a.d(t,"m",(function(){return v}));var r=a("b775"),n=(a("24bf"),a("f121"));function i(e){return Object(r["a"])({url:n["a"].API+"/user/list",method:"get",params:e})}function o(e){return Object(r["a"])({url:n["a"].API+"/user/all",method:"get",params:e})}function l(e){return Object(r["a"])({url:n["a"].API+"/user/register",method:"post",data:e})}function s(e){return Object(r["a"])({url:n["a"].API+"/user/update",method:"put",data:e})}function c(e){return Object(r["a"])({url:n["a"].API+"/user/"+e,method:"delete"})}function u(e,t){var a={userId:e,password:t};return Object(r["a"])({url:n["a"].API+"/user/reset-pwd",method:"put",data:a})}function d(e,t){return Object(r["a"])({url:n["a"].API+"/user/"+e+"/"+t,method:"put"})}function m(){return Object(r["a"])({url:n["a"].API+"/user/info",method:"get"})}function p(e,t,a){var i={username:e,oldPassword:t,newPassword:a};return Object(r["a"])({url:n["a"].API+"/user/pwd",method:"put",data:i})}function f(e){return Object(r["a"])({url:n["a"].API+"/system/user/profile/avatar",method:"post",data:e})}function h(){return Object(r["a"])({url:n["a"].API_MONIT+"/device/duty-decide-list",method:"get"})}function g(){return Object(r["a"])({url:n["a"].API_MONIT+"/project/duty-project-list",method:"get"})}function v(e){return Object(r["a"])({url:n["a"].API+"/user/search",method:"get",params:e})}},c1c3:function(e,t,a){},c2e8:function(e,t,a){},c636:function(e,t,a){},c728:function(e,t,a){},c7756:function(e,t,a){"use strict";a("3c33")},c7e9:function(e,t,a){"use strict";a.r(t);a("4917"),a("ac6a");var r=a("23f1"),n=function(e){return e.keys()},i=/\.\/(.*)\.svg/,o=n(r).map((function(e){return e.match(i)[1]}));t["default"]=o},cadf3:function(e,t,a){"use strict";a("d869")},cc6c:function(e,t,a){e.exports=a.p+"static/img/401.089007e7.gif"},d869:function(e,t,a){},dd7b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("img",{staticClass:"login-logo",staticStyle:{width:"254px"},attrs:{src:a("a1d8"),alt:"苏州特瑞智能科技有限责任公司"}}),e._v(" "),r("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules}},[r("p",{staticClass:"title"},[e._v("特瑞智能数据采集系统")]),e._v(" "),r("p",{staticClass:"lable",staticStyle:{"margin-top":"85px"}},[e._v("用户名")]),e._v(" "),r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{staticStyle:{background:"#f00"},attrs:{type:"text","auto-complete":"off",placeholder:"请输入用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),r("p",{staticClass:"lable"},[e._v("密码")]),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",autocomplete:"new-password",placeholder:"请输入密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),r("p",{staticClass:"lable"},[e._v("验证码")]),e._v(" "),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticStyle:{width:"63%"},attrs:{"auto-complete":"off",placeholder:"请输入验证码"},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}}),e._v(" "),r("div",{staticClass:"login-code"},[r("img",{attrs:{src:e.codeUrl},on:{click:e.getCode}})])],1),e._v(" "),r("el-checkbox",{staticStyle:{margin:"0px 0px 25px 0px",color:"#444444"},model:{value:e.loginForm.rememberMe,callback:function(t){e.$set(e.loginForm,"rememberMe",t)},expression:"loginForm.rememberMe"}},[e._v("记住密码")]),e._v(" "),r("el-form-item",{staticClass:"text-center"},[r("el-button",{attrs:{type:"primary",round:""},on:{click:e.handleLogin}},[e.loading?r("span",[e._v("登 录 中...")]):r("span",[e._v("登 录")])])],1)],1),e._v(" "),e._m(0)],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el-login-footer"},[a("span",[e._v("2023 苏州特瑞智能科技有限责任公司版权所有")])])}],i=a("7ded"),o=a("a78e"),l=a.n(o),s=a("720d"),c=a.n(s),u="MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBANL378k3RiZHWx5AfJqdH9xRNBmD9wGD\n2iRe41HdTNF8RUhNnHit5NpMNtGL0NPTSSpPjjI1kJfVorRvaQerUgkCAwEAAQ==",d="MIIBUwIBADANBgkqhkiG9w0BAQEFAASCAT0wggE5AgEAAkEA0vfvyTdGJkdbHkB8\nmp0f3FE0GYP3AYPaJF7jUd1M0XxFSE2ceK3k2kw20YvQ09NJKk+OMjWQl9WitG9p\nB6tSCQIDAQABAkA2SimBrWC2/wvauBuYqjCFwLvYiRYqZKThUS3MZlebXJiLB+Ue\n/gUifAAKIg1avttUZsHBHrop4qfJCwAI0+YRAiEA+W3NK/RaXtnRqmoUUkb59zsZ\nUBLpvZgQPfj1MhyHDz0CIQDYhsAhPJ3mgS64NbUZmGWuuNKp5coY2GIj/zYDMJp6\nvQIgUueLFXv/eZ1ekgz2Oi67MNCk5jeTF2BurZqNLR3MSmUCIFT3Q6uHMtsB9Eha\n4u7hS31tj1UWE+D+ADzp59MGnoftAiBeHT7gDMuqeJHPL4b+kC+gzV4FGTfhR9q3\ntTbklZkD2A==";function m(e){var t=new c.a;return t.setPublicKey(u),t.encrypt(e)}function p(e){var t=new c.a;return t.setPrivateKey(d),t.decrypt(e)}var f={name:"Login",data:function(){return{codeUrl:"",cookiePassword:"",loginForm:{username:"",password:"",rememberMe:!1,code:"",uuid:""},loginRules:{username:[{required:!0,trigger:"blur",message:"用户名不能为空"}],password:[{required:!0,trigger:"blur",message:"密码不能为空"}],code:[{required:!0,trigger:"change",message:"验证码不能为空"}]},loading:!1,redirect:void 0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created:function(){var e=this;this.getCode(),this.getCookie(),document.onkeydown=function(t){var a=void 0===window.event?t.keyCode:window.event.keyCode;13===a&&e.handleLogin()}},destroyed:function(){document.onkeydown=null},methods:{getCode:function(){var e=this;Object(i["a"])().then((function(t){console.log("res code:>> ",t),e.codeUrl="data:image/gif;base64,"+t.data.img,e.loginForm.uuid=t.data.uuid}))},getCookie:function(){var e=l.a.get("username"),t=l.a.get("password"),a=l.a.get("rememberMe");this.loginForm={username:void 0===e?this.loginForm.username:e,password:void 0===t?this.loginForm.password:p(t),rememberMe:void 0!==a&&Boolean(a)}},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){t&&(e.loading=!0,e.loginForm.rememberMe?(l.a.set("username",e.loginForm.username,{expires:30}),l.a.set("password",m(e.loginForm.password),{expires:30}),l.a.set("rememberMe",e.loginForm.rememberMe,{expires:30})):(l.a.remove("username"),l.a.remove("password"),l.a.remove("rememberMe")),e.$store.dispatch("Login",e.loginForm).then((function(){e.$router.push({path:e.redirect||"/"})})).catch((function(t){e.loading=!1,e.getCode(),e.msgError(t.data.message)})))}))}}},h=f,g=(a("eecc"),a("2877")),v=Object(g["a"])(h,r,n,!1,null,null,null);t["default"]=v.exports},dfc1:function(e,t,a){"use strict";a("4d9e")},dfcf:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.visable,"close-on-click-modal":!1,"before-close":e.cancel,"append-to-body":"",width:"1150px"},on:{"update:visible":function(t){e.visable=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:11}},[a("el-col",[a("el-form-item",{attrs:{label:"当前配置文件"}},[e.deviceLastInfo?a("span",[e._v(e._s(e.deviceLastInfo.fileName||"--"))]):e._e()])],1),e._v(" "),a("el-col",[a("el-form-item",{staticClass:"form-btLine",attrs:{label:"下发时间"}},[e.deviceLastInfo?a("span",[e._v(e._s(e.deviceLastInfo.time||"--"))]):e._e()])],1),e._v(" "),a("el-col",[a("el-form-item",{staticClass:"mt20",attrs:{label:"配置文件",prop:"fileName"}},[a("el-input",{attrs:{size:"small",disabled:""},model:{value:e.form.fileName,callback:function(t){e.$set(e.form,"fileName",t)},expression:"form.fileName"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{"margin-bottom":"80px"}},[a("el-form-item",{attrs:{label:"选择文件"}},[a("el-button",{attrs:{size:"small",type:"primary",plain:"",disabled:!0},on:{click:function(t){return e.openRight("file","选择文件",e.fileTotal)}}},[e._v("文件库选择")]),e._v(" "),a("upload",{attrs:{"file-type":"img","limit-size":10,"bt-content":"本地电脑选择","bt-plain":!0},on:{getFile:e.getFile}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",disabled:!0,plain:""},on:{click:function(t){return e.openRight("file","历史文件",e.fileTotal)}}},[e._v("历史记录选择")])],1)],1)],1),e._v(" "),e.rightFlag?a("el-col",{staticClass:"right-wrap",attrs:{span:13}},[a("p",{staticClass:"rightTitle"},[e._v(e._s(e.rightTitle))]),e._v(" "),"file"===e.rightFlag?a("el-form",{ref:"queryParams_file",attrs:{model:e.queryParams_file,inline:!0}},[a("el-form-item",{attrs:{label:"文件名称",prop:"fileName"}},[a("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"请输入文件名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams_file.fileName,callback:function(t){e.$set(e.queryParams_file,"fileName",t)},expression:"queryParams_file.fileName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search",plain:""},on:{click:e.handleQuery}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmSelect}},[e._v("确定")])],1)],1):e._e(),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"file"===e.rightFlag,expression:"rightFlag === 'file'"}],attrs:{data:e.fileList,height:"264"}},[a("el-table-column",{attrs:{label:"选择",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},nativeOn:{change:function(a){return e.getCurrentRow(t.row)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(" ")])]}}],null,!1,2694489770)}),e._v(" "),a("el-table-column",{attrs:{label:"文件名称",align:"center",prop:"fileName","show-overflow-tooltip":""}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.rightTotal>0,expression:"rightTotal > 0"}],attrs:{total:e.rightTotal,page:e.rightParams.pageNo,limit:e.rightParams.pageSize},on:{"update:page":function(t){return e.$set(e.rightParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.rightParams,"pageSize",t)},pagination:e.freshData}})],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)},n=[],i=(a("7f7f"),a("8889")),o=a("7d4e"),l={name:"DeliveryConfig",components:{Upload:o["a"]},props:{visable:{default:!1,type:Boolean},currentInfo:{default:function(){return{}},type:Object}},data:function(){return{loading:!1,deviceLastInfo:null,title:"下发配置文件",fData:{},isLocal:!1,file:null,formData:new FormData,fileList:null,fileTotal:0,radio:"",currentSelect:null,form:{id:0,fileName:"",filePath:"",fileType:"",deviceCode:"",projectCode:""},rules:{fileName:[{required:!0,message:"配置文件不能为空",trigger:"change"}]},rightParams:null,queryParams_file:{pageNo:1,pageSize:10,fileName:"",createUserId:"",beginTime:"",endTime:""},rightFlag:"",rightTitle:"",rightTotal:0}},watch:{},created:function(){if(this.reset(),this.queryDeviceLastInfo(),this.getFileList(),this.currentInfo&&this.currentInfo.id){var e=JSON.parse(JSON.stringify(this.currentInfo));console.log("current_info",e),this.form.id=e.id}},methods:{getFileList:function(e){var t=this;Object(i["b"])(this.queryParams_file).then((function(a){console.log("res :>> ",a),a&&200===a.code&&(t.fileList=a.data.list,t.fileTotal=a.data.total,"query"===e&&(t.rightTotal=t.fileTotal))}))},queryDeviceLastInfo:function(){var e=this,t={deviceCode:encodeURI(this.currentInfo.deviceCode)};Object(i["c"])(t).then((function(t){t&&200===t.code&&(e.deviceLastInfo=t.data)}))},getFile:function(e){console.log("file :>> ",e),e&&(this.isLocal=!0,this.file=e,this.formData.set("file",e),this.formData.set("remark","file"),this.formData.set("path","config"),this.form.fileName=e.name)},openRight:function(e,t,a){switch(this.rightFlag=e,this.rightTitle=t,this.rightTotal=a,this.rightFlag){case"file":this.rightParams=this.queryParams_file;break}},freshData:function(e){switch(this.rightFlag){case"file":this.getFileList(e);break}},handleQuery:function(){this.rightParams.pageNo=1,this.freshData("query"),this.currentSelect=null,this.radio=""},getCurrentRow:function(e){console.log(e,"this.currentSelect.."),this.currentSelect=e},confirmSelect:function(){if(null===this.currentSelect)return this.$message.warning("请选择"),!1;switch(this.rightFlag){case"file":this.form.fileName=this.currentSelect.fileName,this.form.filePath=this.currentSelect.filePath,this.form.fileType=this.currentSelect.fileType,this.form.deviceCode=this.currentSelect.deviceCode,this.form.projectCode=this.currentSelect.projectCode;break}this.currentSelect=null,this.radio="",this.rightFlag=""},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.isLocal?(e.isLocal=!1,e.loading=!0,e.formData.set("path","config/"+e.currentInfo.deviceCode),Object(i["g"])(e.formData).then((function(t){t&&200===t.code?(e.loading=!1,e.form.fileName=t.data.fileName,e.form.filePath=t.data.filePath,e.form.fileType=t.data.fileType,e.form.fileSize=t.data.fileSize,e.form.deviceCode=e.currentInfo.deviceCode,e.form.projectCode=e.currentInfo.projectCode,Object(i["e"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("配置文件下发成功"),e.cancel())})).catch((function(t){console.log("err=====>",t),e.loading=!1,e.$message.error("文件下发失败，原因："+t.data.message)}))):e.$message.error("文件上传失败，请重新操作！")}))):Object(i["e"])(e.form).then((function(t){200===t.code?(e.msgSuccess("配置文件下发成功"),e.cancel()):e.$message.error("文件下发失败，请重新操作！")})).catch((function(t){console.log("err=====>",t),e.$message.error("文件下发失败，原因："+t.data.message)})))}))},reset:function(){this.form={id:0,fileName:"",filePath:""},this.resetForm("form")},cancel:function(){this.reset(),this.$emit("cancel")}}},s=l,c=(a("a325"),a("2877")),u=Object(c["a"])(s,r,n,!1,null,"7ab70796",null);t["a"]=u.exports},e5f7:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{staticClass:"clearfix"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")]),e._v(" "),a("router-link",{staticClass:"pull-right mt10 mr20 go-back",attrs:{to:"/project/list"}},[e._v("返回 - 项目列表")])],1)],1),e._v(" "),a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"操作人",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入操作人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.userName,callback:function(t){e.$set(e.queryParams,"userName",t)},expression:"queryParams.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作时间"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss",size:"small"},model:{value:e.queryDate,callback:function(t){e.queryDate=t},expression:"queryDate"}})],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.logList}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"120",prop:"id"}}),e._v(" "),a("el-table-column",{attrs:{label:"模块",align:"center",prop:"module",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"内容",align:"center",prop:"content","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"项目动态",align:"center",prop:"description",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"IP",align:"center",prop:"ip",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作人",align:"center",prop:"userName",width:"100","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作时间",align:"center",prop:"createTime",width:"180","show-overflow-tooltip":""}})],1)],1)],1)},n=[],i=(a("c5f6"),a("435f")),o={name:"ProjectLog",data:function(){return{loading:!0,total:0,logList:null,queryDate:[],queryParams:{bindId:Number(this.$route.params.projectId),pageNo:1,pageSize:10,module:"项目管理模块",userName:"",beginTime:"",endTime:""}}},watch:{},created:function(){this.getLog()},methods:{getLog:function(){var e=this;this.loading=!0,Object(i["d"])(this.queryParams).then((function(t){t&&200===t.code&&(e.logList=t.data.list,e.total=t.data.total,e.loading=!1)}))},handleQuery:function(){this.queryParams.pageNo=1,this.queryDate&&this.queryDate.length?(this.queryParams.beginTime=this.queryDate[0],this.queryParams.endTime=this.queryDate[1]):(this.queryParams.beginTime="",this.queryParams.endTime=""),this.getLog()},resetQuery:function(){this.queryDate=[],this.resetForm("queryForm"),this.handleQuery()}}},l=o,s=a("2877"),c=Object(s["a"])(l,r,n,!1,null,"706d43ea",null);t["default"]=c.exports},e692:function(e,t,a){"use strict";a("42e8")},ec55:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"errPage-container"},[a("el-button",{staticClass:"pan-back-btn",attrs:{icon:"arrow-left"},on:{click:e.back}},[e._v("\n    返回\n  ")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("h1",{staticClass:"text-jumbo text-ginormous"},[e._v("\n        401错误!\n      ")]),e._v(" "),a("h2",[e._v("您没有访问权限！")]),e._v(" "),a("h6",[e._v("对不起，您没有访问权限，请不要进行非法操作！您可以返回主页面")]),e._v(" "),a("ul",{staticClass:"list-unstyled"},[a("li",{staticClass:"link-type"},[a("router-link",{attrs:{to:"/"}},[e._v("\n            回首页\n          ")])],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("img",{attrs:{src:e.errGif,width:"313",height:"428",alt:"Girl has dropped her ice cream."}})])],1)],1)},n=[],i=a("cc6c"),o=a.n(i),l={name:"Page401",data:function(){return{errGif:o.a+"?"+ +new Date}},methods:{back:function(){this.$route.query.noGoBack?this.$router.push({path:"/"}):this.$router.go(-1)}}},s=l,c=(a("ecf6"),a("2877")),u=Object(c["a"])(s,r,n,!1,null,"f2e02586",null);t["default"]=u.exports},ecf6:function(e,t,a){"use strict";a("514f")},ed77:function(e,t,a){"use strict";a("8a5b")},ee46:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("br"),a("br"),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("el-form",{ref:"form",attrs:{model:e.user,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[a("el-input",{attrs:{placeholder:"请输入旧密码",type:"password"},model:{value:e.user.oldPassword,callback:function(t){e.$set(e.user,"oldPassword","string"===typeof t?t.trim():t)},expression:"user.oldPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[a("el-input",{attrs:{placeholder:"请输入新密码",type:"password",autocomplete:"off"},model:{value:e.user.newPassword,callback:function(t){e.$set(e.user,"newPassword","string"===typeof t?t.trim():t)},expression:"user.newPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[a("el-input",{attrs:{placeholder:"请确认密码",type:"password",autocomplete:"off"},model:{value:e.user.confirmPassword,callback:function(t){e.$set(e.user,"confirmPassword","string"===typeof t?t.trim():t)},expression:"user.confirmPassword"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-center"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("确认")])],1)],1)],1)],1)],1)},n=[],i=(a("7f7f"),a("c0c7")),o=a("a78e"),l=a.n(o),s={data:function(){var e=this,t=function(t,a,r){a?(e.user.newPassword&&e.$refs.form.validateField("newPassword"),r()):r(new Error("旧密码不能为空"))},a=function(t,a,r){a?(e.user.oldPassword&&a===e.user.oldPassword?r(new Error("输入的新密码与旧密码相同")):e.user.confirmPassword&&e.$refs.form.validateField("confirmPassword"),r()):r(new Error("新密码不能为空"))},r=function(t,a,r){a?(a!==e.user.newPassword&&r(new Error("两次输入密码不一致")),r()):r(new Error("确认密码不能为空"))};return{user:{oldPassword:void 0,newPassword:void 0,confirmPassword:void 0},rules:{oldPassword:[{validator:t,trigger:"blur"}],newPassword:[{validator:a,trigger:"blur"}],confirmPassword:[{validator:r,trigger:"blur"}]}}},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){t&&Object(i["k"])(e.$store.getters.name,e.user.oldPassword,e.user.newPassword).then((function(t){t&&200===t.code&&(e.msgSuccess("修改成功"),e.$store.dispatch("LogOut").then((function(t){e.$router.push("/login"),l.a.remove("password")})))})).catch((function(t){console.log("err :>> ",t),e.msgError(t.data.message||"修改失败！")}))}))}}},c=s,u=a("2877"),d=Object(u["a"])(c,r,n,!1,null,null,null);t["default"]=d.exports},eecc:function(e,t,a){"use strict";a("8dd8")},f153:function(e,t,a){"use strict";a("2d21")},f59c:function(e,t,a){"use strict";a("93e1")},f76f:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"a",(function(){return c}));var r=a("b775"),n=a("f121");function i(e){return Object(r["a"])({url:n["a"].API_FILE+"/dbc-file/getDbcChannel",method:"post",data:e})}function o(e){return Object(r["a"])({url:n["a"].API_FILE+"/dbc-file/getQuotas",method:"get",params:e})}function l(e){return Object(r["a"])({url:n["a"].API_FILE+"/dbc-file/sendQuota",method:"post",data:e})}function s(e){return Object(r["a"])({url:n["a"].API_FILE+"/dbc-file/stopCanControl",method:"post",data:e})}function c(e){return Object(r["a"])({url:n["a"].API_FILE+"/alarmRecord/recordListScreen",method:"get",params:e})}},f794:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-row",{staticClass:"headerBtnLine",attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.menuList,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"name",label:"菜单名称",align:"center",width:"150","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"组件路径",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"排序",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleAdd(t.row)}}},[e._v("新增")]),e._v(" "),a("el-button",{staticClass:"text-danger",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"上级菜单",prop:"pid"}},[a("treeselect",{attrs:{options:e.menuOptions,normalizer:e.normalizer,"show-count":!0,placeholder:"选择上级菜单"},model:{value:e.form.pid,callback:function(t){e.$set(e.form,"pid",t)},expression:"form.pid"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入菜单名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"路由地址",prop:"url"}},[a("el-input",{attrs:{placeholder:"请输入路由地址"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"使用状态",prop:"status"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input-number",{staticClass:"full-width",attrs:{"controls-position":"right",min:0},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{staticClass:"full-width",attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},n=[],i=(a("7f7f"),a("ac6a"),a("456d"),a("a6dc")),o=a("ca17"),l=a.n(o),s=(a("542c"),a("5aee")),c={name:"Menu",components:{Treeselect:l.a,IconSelect:s["a"]},data:function(){var e=this;return{loading:!0,menuList:[],menuOptions:[],title:"",open:!1,statusOptions:Object.keys(this.ENUMS.STATUS).map((function(t){return{dictValue:parseInt(t),dictLabel:e.ENUMS.STATUS[t]}})),typeOptions:Object.keys(this.ENUMS.FUNCTION_TYPE).map((function(t){return{dictValue:parseInt(t),dictLabel:e.ENUMS.FUNCTION_TYPE[t]}})),queryParams:{title:void 0,visible:void 0},form:{},rules:{pid:[{required:!0,message:"上级菜单不能为空",trigger:"change"}],name:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}],url:[{required:!0,message:"路由地址不能为空",trigger:"blur"}],status:[{required:!0,message:"使用状态不能为空",trigger:"blur"}],sort:[{required:!0,message:"菜单顺序不能为空",trigger:"blur"}]}}},created:function(){this.getTreeselect()},methods:{selected:function(e){this.form.icon=e},normalizer:function(e){return e.children&&!e.children.length&&delete e.children,{id:e.id,label:e.name,children:e.children}},getTreeselect:function(){var e=this;this.loading=!0,Object(i["d"])().then((function(t){e.menuOptions=[];var a={id:0,name:"主类目",children:[]};a.children=t.data,e.menuList=t.data,e.menuOptions.push(a),e.loading=!1}))},statusFormat:function(e,t){return this.ENUMS.STATUS[e.status]},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:void 0,pid:0,name:void 0,icon:void 0,sort:void 0,status:1,type:void 0,permission:void 0},this.resetForm("form")},handleQuery:function(){this.getTreeselect()},handleAdd:function(e){this.reset(),null!=e&&e.id?this.form.pid=e.id:this.form.pid=0,this.open=!0,this.title="添加菜单"},handleUpdate:function(e){this.reset(),console.log("===",e.pid),console.log("===",this.findTreeById(this.menuList,e.id),e.pid),this.form=this.findTreeById(this.menuList,e.id),this.open=!0,this.title="修改菜单"},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!=e.form.id?Object(i["e"])(e.form).then((function(t){e.msgSuccess("修改成功"),e.open=!1,e.getTreeselect()})):Object(i["a"])(e.form).then((function(t){e.msgSuccess("新增成功"),e.open=!1,e.getTreeselect()})))}))},handleDelete:function(e){var t=this;this.$confirm('是否确认删除名称为"'+e.name+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(i["b"])(e.id)})).then((function(){t.getTreeselect(),t.msgSuccess("删除成功")})).catch((function(){}))}}},u=c,d=a("2877"),m=Object(d["a"])(u,r,n,!1,null,null,null);t["default"]=m.exports},fba3:function(e,t,a){},fecb:function(e,t,a){"use strict";a("1b24")}}]);